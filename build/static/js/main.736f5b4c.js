/*! For license information please see main.736f5b4c.js.LICENSE.txt */
!function(){var e={637:function(e,t,n){"use strict";var r,i,o=n(388),a=n(971),s=n(826),u=n(386),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),v=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(e),this.container=new s.H0(t.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=f),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var m=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.r3)(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.wA(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw l.create("invalid-log-argument");(0,u.Am)(e,t)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||f,!(0,a.r3)(t,e))throw l.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++){var f=h[c];t[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(v);return t.INTERNAL=(0,o.pi)((0,o.pi)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,a.ZB)(t,e)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),t}(),g=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if((0,a.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,e)};var w=m;!function(e,t){e.INTERNAL.registerComponent(new s.wA("platform-logger",(function(e){return new g(e)}),"PRIVATE")),e.registerVersion(h,"0.6.17",t),e.registerVersion("fire-js","")}(w),t.Z=w},826:function(e,t,n){"use strict";n.d(t,{H0:function(){return u},wA:function(){return o},zt:function(){return s}});var r=n(388),i=n(971),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=(0,r.pi)({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService({instanceIdentifier:o});if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(u){if(i)return null;throw u}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.CR)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),(0,r.CR)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.initialize=function(e){void 0===e&&(e={});var t=e.instanceIdentifier,n=void 0===t?a:t,r=e.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===a?void 0:t),options:i}),this.instances.set(n,o)),o||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},895:function(e,t,n){"use strict";var r=n(637),i=n(388),o=n(971),a=n(386),s=n(826);e=n.hmd(e);var u=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.Pz)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.cI)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),c=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,o.r3)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),l=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new u(t)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new a.Yd("@firebase/database"),p=function(){var e=1;return function(){return e++}}(),v=function(e){var t=(0,o.dS)(e),n=new o.gQ;n.update(t);var r=n.digest();return o.US.encodeByteArray(r)},m=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++){var a=t[i];Array.isArray(a)||a&&"object"===typeof a&&"number"===typeof a.length?r+=e.apply(null,a):r+="object"===typeof a?(0,o.Pz)(a):a,r+=" "}return r},g=null,y=!0,b=function(e,t){(0,o.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(d.logLevel=a.in.VERBOSE,g=d.log.bind(d),t&&f.set("logging_enabled",!0)):"function"===typeof e?g=e:(g=null,f.remove("logging_enabled"))},w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===y&&(y=!1,null===g&&!0===f.get("logging_enabled")&&b(!0)),g){var n=m.apply(null,e);g(n)}},_=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];w.apply(void 0,(0,i.ev)([e],(0,i.CR)(t)))}},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,(0,i.ev)([],(0,i.CR)(e)));d.error(n)},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,(0,i.ev)([],(0,i.CR)(e)));throw d.error(n),new Error(n)},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+m.apply(void 0,(0,i.ev)([],(0,i.CR)(e)));d.warn(n)},I=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},C="[MIN_NAME]",k="[MAX_NAME]",x=function(e,t){if(e===t)return 0;if(e===C||t===k)return-1;if(t===C||e===k)return 1;var n=j(e),r=j(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},N=function(e,t){return e===t?0:e<t?-1:1},A=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.Pz)(t))},P=function e(t){if("object"!==typeof t||null===t)return(0,o.Pz)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=(0,o.Pz)(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},D=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function O(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var R=function(e){(0,o.hu)(!I(e),"Invalid JSON number");var t,n,r,i,a,s=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),s))+s,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var c=u.join(""),l="";for(a=0;a<64;a+=8){var h=parseInt(c.substr(a,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()},L=new RegExp("^-?(0*)\\d{1,10}$"),M=-2147483648,F=2147483647,j=function(e){if(L.test(e)){var t=Number(e);if(t>=M&&t<=F)return t}return null},U=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw S("Exception was thrown by user callback.",e),t}),Math.floor(0))}},q=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},V=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function B(){return new V("")}function z(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function G(e){return e.pieces_.length-e.pieceNum_}function K(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new V(e.pieces_,t)}function W(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function H(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Q(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function J(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new V(t,0)}function $(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof V)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new V(n,0)}function Y(e){return e.pieceNum_>=e.pieces_.length}function X(e,t){var n=z(e),r=z(t);if(null===n)return t;if(n===r)return X(K(e),K(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Z(e,t){for(var n=Q(e,0),r=Q(t,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function ee(e,t){if(G(e)!==G(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function te(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(G(e)>G(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var ne=function(e,t){this.errorPrefix_=t,this.parts_=Q(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);re(this)};function re(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ie(e))}function ie(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var oe="5",ae=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,se="websocket",ue="long_polling",ce=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function le(e,t,n){var r;if((0,o.hu)("string"===typeof t,"typeof type must == string"),(0,o.hu)("object"===typeof n,"typeof params must == object"),t===se)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ue)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return O(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var he,fe=function(e,t){var n=de(e),r=n.namespace;"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ce(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new V(n.pathString)}},de=function(e){var t="",n="",r="",o="",a="",s=!0,u="https",c=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(h,f)),h<f&&(o=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(h,f)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var o=(0,i.XA)(e.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:o,namespace:a}},pe=/[\[\].#$\/\u0000-\u001F\u007F]/,ve=/[\[\].#$\u0000-\u001F\u007F]/,me=10485760,ge=function(e){return"string"===typeof e&&0!==e.length&&!pe.test(e)},ye=function(e){return"string"===typeof e&&0!==e.length&&!ve.test(e)},be=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!I(e)||e&&"object"===typeof e&&(0,o.r3)(e,".sv")},we=function(e,t,n,r,i){i&&void 0===n||_e((0,o.gK)(e,t,i),n,r)},_e=function e(t,n,r){var i=r instanceof V?new ne(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+ie(i));if("function"===typeof n)throw new Error(t+"contains a function "+ie(i)+" with contents = "+n.toString());if(I(n))throw new Error(t+"contains "+n.toString()+" "+ie(i));if("string"===typeof n&&n.length>me/3&&(0,o.ug)(n)>me)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+ie(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,s=!1;if(O(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!ge(n)))throw new Error(t+" contains an invalid key ("+n+") "+ie(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,c;c=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(c),u.byteLength_+=(0,o.ug)(c),re(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=(0,o.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&s)throw new Error(t+' contains ".value" child '+ie(i)+" in addition to actual children.")}},Ee=function(e,t,n,r,i){if(!i||void 0!==n){var a=(0,o.gK)(e,t,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];O(n,(function(e,t){var n=new V(e);if(_e(a,t,$(r,n)),".priority"===W(n)&&!be(t))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Q(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ge(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Z);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&te(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(a,s)}},Te=function(e,t,n,r){if(!r||void 0!==n){if(I(n))throw new Error((0,o.gK)(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!be(n))throw new Error((0,o.gK)(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Se=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ie=function(e,t,n,r){if((!r||void 0!==n)&&!ge(n))throw new Error((0,o.gK)(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ce=function(e,t,n,r){if((!r||void 0!==n)&&!ye(n))throw new Error((0,o.gK)(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ke=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ce(e,t,n,r)},xe=function(e,t){if(".info"===z(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ne=function(e,t,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!ge(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ye(e)}(r))throw new Error((0,o.gK)(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ae=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,o.gK)(e,t,r)+"must be a boolean.")};var Pe,De,Oe,Re=function(e){return"number"===typeof e?"number:"+R(e):"string:"+e},Le=function(e){if(e.isLeafNode()){var t=e.val();(0,o.hu)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,o.r3)(t,".sv"),"Priority must be a string or number.")}else(0,o.hu)(e===he||e.isEmpty(),"priority of unexpected type.");(0,o.hu)(e===he||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Me=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Le(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return Pe},set:function(e){Pe=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return Y(t)?this:".priority"===z(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=z(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===G(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(K(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Re(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?R(this.value_):this.value_,this.lazyHash_=v(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,o.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),Fe=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),je=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:qe.EMPTY_NODE,this.right=null!=o?o:qe.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return qe.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return qe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Ue=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new je(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),qe=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,je.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,je.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Fe(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Fe(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Fe(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Fe(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Ue,e}(),Ve=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Be=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Ve(C,e),r=new Ve(C,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Ve.MIN},e}();var ze,Ge,Ke,We=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?x(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Ve.MIN},t.prototype.maxPost=function(){return new Ve(k,new Me("[PRIORITY-POST]",Oe))},t.prototype.makePost=function(e,t){var n=De(e);return new Ve(t,new Me("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Be),He=new We,Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return ze},set:function(e){ze=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return x(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Ve.MIN},t.prototype.maxPost=function(){return new Ve(k,ze)},t.prototype.makePost=function(e,t){return(0,o.hu)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ve(e,ze)},t.prototype.toString=function(){return".key"},t}(Be),Je=new Qe,$e=Math.log(2),Ye=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/$e,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Xe=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new je(a,o.node,je.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new je(a,o.node,je.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new je(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,je.BLACK):(s(h,je.BLACK),s(h,je.RED))}return o}(new Ye(e.length));return new qe(r||t,o)},Ze={},et=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,o.hu)(Ze&&He,"ChildrenNode.ts has not been loaded"),Ge=Ge||new e({".priority":Ze},{".priority":He})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,o.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qe?t:null},e.prototype.hasIndex=function(e){return(0,o.r3)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,o.hu)(t!==Je,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(Ve.Wrap),c=u.getNext();c;)s=s||t.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?Xe(a,t.getCompare()):Ze;var l=t.toString(),h=(0,i.pi)({},this.indexSet_);h[l]=t;var f=(0,i.pi)({},this.indexes_);return f[l]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e((0,o.UI)(this.indexes_,(function(e,i){var a=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(a,"Missing index implementation for "+i),e===Ze){if(a.isDefinedOn(t.node)){for(var s=[],u=n.getIterator(Ve.Wrap),c=u.getNext();c;)c.name!==t.name&&s.push(c),c=u.getNext();return s.push(t),Xe(s,a.getCompare())}return Ze}var l=n.get(t.name),h=e;return l&&(h=h.remove(new Ve(t.name,l))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,o.UI)(this.indexes_,(function(e){if(e===Ze)return e;var r=n.get(t.name);return r?e.remove(new Ve(t.name,r)):e})),this.indexSet_)},e}();function tt(e,t){return x(e.name,t.name)}function nt(e,t){return x(e,t)}var rt=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Le(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Ke||(Ke=new e(new qe(nt),null,et.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Ke},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Ke:t},e.prototype.getChild=function(e){var t=z(e);return null===t?this:this.getImmediateChild(t).getChild(K(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new Ve(t,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Ke:this.priorityNode_;return new e(i,s,a)},e.prototype.updateChild=function(e,t){var n=z(e);if(null===n)return t;(0,o.hu)(".priority"!==z(e)||1===G(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(K(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(He,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Re(this.getPriority().val())+":"),this.forEachChild(He,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":v(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ve(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Ve(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Ve(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Ve.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Ve.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===it?-1:0},e.prototype.withIndex=function(t){if(t===Je||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Je||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(He),r=t.getIterator(He),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Je?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),it=new(function(e){function t(){return e.call(this,new qe(nt),rt.EMPTY_NODE,et.Default)||this}return(0,i.ZT)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return rt.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(rt));Object.defineProperties(Ve,{MIN:{value:new Ve(C,rt.EMPTY_NODE)},MAX:{value:new Ve(k,it)}}),Qe.__EMPTY_NODE=rt.EMPTY_NODE,Me.__childrenNodeConstructor=rt,he=it,function(e){Oe=e}(it);var ot;function at(e,t){if(void 0===t&&(t=null),null===e)return rt.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.hu)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Me(e,at(t));if(e instanceof Array){var n=rt.EMPTY_NODE;return O(e,(function(t,r){if((0,o.r3)(e,t)&&"."!==t.substring(0,1)){var i=at(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(at(t))}var r=[],i=!1;if(O(e,(function(e,t){if("."!==e.substring(0,1)){var n=at(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ve(e,n)))}})),0===r.length)return rt.EMPTY_NODE;var a=Xe(r,tt,(function(e){return e.name}),nt);if(i){var s=Xe(r,He.getCompare());return new rt(a,at(t),new et({".priority":s},{".priority":He}))}return new rt(a,at(t),et.Default)}function st(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){De=e}(at),function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ot||(ot={}));var ut,ct=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ot.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(Y(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new V(t));return new e(B(),n,this.revert)}return(0,o.hu)(z(this.path)===t,"operationForChild called for unrelated child."),new e(K(this.path),this.affectedTree,this.revert)},e}(),lt=function(){function e(e,t){void 0===t&&(ut||(ut=new qe(N)),t=ut),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return O(t,(function(e,t){n=n.set(new V(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:B(),value:this.value};if(Y(e))return null;var n=z(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(K(e),t);return null!=i?{path:$(new V(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(Y(t))return this;var n=z(t),r=this.children.get(n);return null!==r?r.subtree(K(t)):new e(null)},e.prototype.set=function(t,n){if(Y(t))return new e(n,this.children);var r=z(t),i=(this.children.get(r)||new e(null)).set(K(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(Y(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=z(t),r=this.children.get(n);if(r){var i=r.remove(K(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(Y(e))return this.value;var t=z(e),n=this.children.get(t);return n?n.get(K(e)):null},e.prototype.setTree=function(t,n){if(Y(t))return n;var r=z(t),i=(this.children.get(r)||new e(null)).setTree(K(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(B(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_($(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,B(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Y(e))return null;var i=z(e),o=this.children.get(i);return o?o.findOnPath_(K(e),$(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,B(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(Y(t))return this;this.value&&r(n,this.value);var i=z(t),o=this.children.get(i);return o?o.foreachOnPath_(K(t),$(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(B(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_($(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),ht=function(){function e(e,t){this.source=e,this.path=t,this.type=ot.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return Y(this.path)?new e(this.source,B()):new e(this.source,K(this.path))},e}(),ft=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ot.OVERWRITE}return e.prototype.operationForChild=function(t){return Y(this.path)?new e(this.source,B(),this.snap.getImmediateChild(t)):new e(this.source,K(this.path),this.snap)},e}(),dt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ot.MERGE}return e.prototype.operationForChild=function(t){if(Y(this.path)){var n=this.children.subtree(new V(t));return n.isEmpty()?null:n.value?new ft(this.source,B(),n.value):new e(this.source,B(),n)}return(0,o.hu)(z(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,K(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),pt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(Y(e))return this.isFullyInitialized()&&!this.filtered_;var t=z(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}();function vt(e,t){return{eventCache:e,serverCache:t}}function mt(e,t,n,r){return vt(new pt(t,n,r),e.serverCache)}function gt(e,t,n,r){return vt(e.eventCache,new pt(t,n,r))}function yt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function bt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}function wt(e){return{type:"value",snapshotNode:e}}function _t(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Et(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Tt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var St=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,a){(0,o.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Et(t,s)):(0,o.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(_t(t,n)):a.trackChildChange(Tt(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(He,(function(e,r){t.hasChild(e)||n.trackChildChange(Et(e,r))})),t.isLeafNode()||t.forEachChild(He,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Tt(t,r,i))}else n.trackChildChange(_t(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?rt.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),It=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,o.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Tt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Et(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,_t(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Tt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),Ct=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new lt(null))},e}();function kt(e,t,n){if(Y(t))return new Ct(new lt(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=X(i,t);return o=o.updateChild(a,n),new Ct(e.writeTree_.set(i,o))}var s=new lt(n),u=e.writeTree_.setTree(t,s);return new Ct(u)}function xt(e,t,n){var r=e;return O(n,(function(e,n){r=kt(r,$(t,e),n)})),r}function Nt(e,t){if(Y(t))return Ct.empty();var n=e.writeTree_.setTree(t,new lt(null));return new Ct(n)}function At(e,t){return null!=Pt(e,t)}function Pt(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(X(n.path,t)):null}function Dt(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(He,(function(e,n){t.push(new Ve(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Ve(e,n.value))})),t}function Ot(e,t){if(Y(t))return e;var n=Pt(e,t);return new Ct(null!=n?new lt(n):e.writeTree_.subtree(t))}function Rt(e){return e.writeTree_.isEmpty()}function Lt(e,t){return Mt(B(),e.writeTree_,t)}function Mt(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Mt($(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild($(e,".priority"),r)),n}function Ft(e,t){return $t(t,e)}function jt(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=e.allWrites.length-1;i&&s>=0;){var u=e.allWrites[s];u.visible&&(s>=n&&Ut(u,r.path)?i=!1:te(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return function(e){e.visibleWrites=Vt(e.allWrites,qt,B()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Nt(e.visibleWrites,r.path):O(r.children,(function(t){e.visibleWrites=Nt(e.visibleWrites,$(r.path,t))}));return!0}return!1}function Ut(e,t){if(e.snap)return te(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&te($(e.path,n),t))return!0;return!1}function qt(e){return e.visible}function Vt(e,t,n){for(var r=Ct.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var s=a.path,u=void 0;if(a.snap)te(n,s)?r=kt(r,u=X(n,s),a.snap):te(s,n)&&(u=X(s,n),r=kt(r,B(),a.snap.getChild(u)));else{if(!a.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(te(n,s))r=xt(r,u=X(n,s),a.children);else if(te(s,n))if(Y(u=X(s,n)))r=xt(r,B(),a.children);else{var c=(0,o.DV)(a.children,z(u));if(c){var l=c.getChild(K(u));r=kt(r,B(),l)}}}}}return r}function Bt(e,t,n,r,i){if(r||i){var o=Ot(e.visibleWrites,t);if(!i&&Rt(o))return n;if(i||null!=n||At(o,B())){return Lt(Vt(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(te(e.path,t)||te(t,e.path))}),t),n||rt.EMPTY_NODE)}return null}var a=Pt(e.visibleWrites,t);if(null!=a)return a;var s=Ot(e.visibleWrites,t);return Rt(s)?n:null!=n||At(s,B())?Lt(s,n||rt.EMPTY_NODE):null}function zt(e,t,n,r){return Bt(e.writeTree,e.treePath,t,n,r)}function Gt(e,t){return function(e,t,n){var r=rt.EMPTY_NODE,i=Pt(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(He,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=Ot(e.visibleWrites,t);return n.forEachChild(He,(function(e,t){var n=Lt(Ot(o,new V(e)),t);r=r.updateImmediateChild(e,n)})),Dt(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Dt(Ot(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Kt(e,t,n,r){return function(e,t,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=$(t,n);if(At(e.visibleWrites,a))return null;var s=Ot(e.visibleWrites,a);return Rt(s)?i.getChild(n):Lt(s,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Wt(e,t){return function(e,t){return Pt(e.visibleWrites,t)}(e.writeTree,$(e.treePath,t))}function Ht(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=Ot(e.visibleWrites,t),c=Pt(u,B());if(null!=c)s=c;else{if(null==n)return[];s=Lt(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,o)}function Qt(e,t,n){return function(e,t,n,r){var i=$(t,n),o=Pt(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Lt(Ot(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Jt(e,t){return $t($(e.treePath,t),e.writeTree)}function $t(e,t){return{treePath:e,writeTree:t}}var Yt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),Xt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new pt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qt(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bt(this.viewCache_),i=Ht(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();function Zt(e,t,n,r,i){var a,s,u=new It;if(n.type===ot.OVERWRITE){var c=n;c.source.fromUser?a=nn(e,t,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.serverCache.isFiltered()&&!Y(c.path),a=tn(e,t,c.path,c.snap,r,i,s,u))}else if(n.type===ot.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=$(n,r);rn(t,z(c))&&(s=nn(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=$(n,r);rn(t,z(c))||(s=nn(e,s,c,u,i,o,a))})),s}(e,t,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=an(e,t,l.path,l.children,r,i,s,u))}else if(n.type===ot.ACK_USER_WRITE){var h=n;a=h.revert?function(e,t,n,r,i,a){var s;if(null!=Wt(r,n))return t;var u=new Xt(r,t,i),c=t.eventCache.getNode(),l=void 0;if(Y(n)||".priority"===z(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=zt(r,bt(t));else{var f=t.serverCache.getNode();(0,o.hu)(f instanceof rt,"serverChildren would be complete if leaf node"),h=Gt(r,f)}l=e.filter.updateFullNode(c,h,a)}else{var d=z(n),p=Qt(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?e.filter.updateChild(c,d,p,K(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,rt.EMPTY_NODE,K(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(s=zt(r,bt(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,s,a))}return s=t.serverCache.isFullyInitialized()||null!=Wt(r,B()),mt(t,l,s,e.filter.filtersNodes())}(e,t,h.path,r,i,u):function(e,t,n,r,i,o,a){if(null!=Wt(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Y(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return tn(e,t,n,u.getNode().getChild(n),i,o,s,a);if(Y(n)){var c=new lt(null);return u.getNode().forEachChild(Je,(function(e,t){c=c.set(new V(e),t)})),an(e,t,n,c,i,o,s,a)}return t}var l=new lt(null);return r.foreach((function(e,t){var r=$(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),an(e,t,n,l,i,o,s,a)}(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ot.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var o=t.serverCache,a=gt(t,o.getNode(),o.isFullyInitialized()||Y(n),o.isFiltered());return en(e,a,n,r,Yt,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=yt(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(wt(yt(t)))}}(t,a,f),{viewCache:a,changes:f}}function en(e,t,n,r,i,a){var s=t.eventCache;if(null!=Wt(r,n))return t;var u=void 0,c=void 0;if(Y(n))if((0,o.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=bt(t),h=Gt(r,l instanceof rt?l:rt.EMPTY_NODE);u=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=zt(r,bt(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var d=z(n);if(".priority"===d){(0,o.hu)(1===G(n),"Can't have a priority with additional path components");var p=s.getNode(),v=Kt(r,n,p,c=t.serverCache.getNode());u=null!=v?e.filter.updatePriority(p,v):s.getNode()}else{var m=K(n),g=void 0;if(s.isCompleteForChild(d)){c=t.serverCache.getNode();var y=Kt(r,n,s.getNode(),c);g=null!=y?s.getNode().getImmediateChild(d).updateChild(m,y):s.getNode().getImmediateChild(d)}else g=Qt(r,d,t.serverCache);u=null!=g?e.filter.updateChild(s.getNode(),d,g,m,i,a):s.getNode()}}return mt(t,u,s.isFullyInitialized()||Y(n),e.filter.filtersNodes())}function tn(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(Y(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=z(n);if(!c.isCompleteForPath(n)&&G(n)>1)return t;var d=K(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Yt,null)}var v=gt(t,u,c.isFullyInitialized()||Y(n),l.filtersNodes());return en(e,v,n,i,new Xt(i,v,o),s)}function nn(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new Xt(i,t,o);if(Y(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=mt(t,u,!0,e.filter.filtersNodes());else{var h=z(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=mt(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=K(n),d=c.getNode().getImmediateChild(h),p=void 0;if(Y(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===W(f)&&v.getChild(J(f)).isEmpty()?v:v.updateChild(f,r):rt.EMPTY_NODE}if(d.equals(p))s=t;else s=mt(t,e.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function rn(e,t){return e.eventCache.isCompleteForChild(t)}function on(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function an(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Y(n)?r:new lt(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=on(0,t.serverCache.getNode().getImmediateChild(n),r);c=tn(e,c,new V(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=on(0,t.serverCache.getNode().getImmediateChild(n),r);c=tn(e,c,new V(n),h,i,o,a,s)}})),c}var sn=function(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()};function un(e,t,n,r,i,a){var s=r.filter((function(e){return e.type===n}));s.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Ve(t.childName,t.snapshotNode),i=new Ve(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),s.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}var cn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ln=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=cn.charAt(n%64),n=Math.floor(n/64);(0,o.hu)(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=cn.charAt(t[r]);return(0,o.hu)(20===s.length,"nextPushId: Length should be 20."),s}}(),hn=function(e){if("2147483647"===e)return"-";var t=j(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return k;var o=n[i],a=cn.charAt(cn.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},fn=function(e){if("-2147483648"===e)return C;var t=j(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=cn.charAt(cn.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?x(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Ve.MIN},t.prototype.maxPost=function(){return Ve.MAX},t.prototype.makePost=function(e,t){var n=at(e);return new Ve(t,n)},t.prototype.toString=function(){return".value"},t}(Be),pn=new dn,vn=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,o.hu)(!Y(t)&&".priority"!==z(t),"Can't create PathIndex with empty path or .priority key"),n}return(0,i.ZT)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?x(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=at(e),r=rt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ve(t,r)},t.prototype.maxPost=function(){var e=rt.EMPTY_NODE.updateChild(this.indexPath_,it);return new Ve(k,e)},t.prototype.toString=function(){return Q(this.indexPath_,0).join("/")},t}(Be),mn=function(){function e(t){this.indexedFilter_=new St(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Ve(t,n))||(n=rt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=rt.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(rt.EMPTY_NODE);var i=this;return t.forEachChild(He,(function(e,t){i.matches(new Ve(e,t))||(r=r.updateImmediateChild(e,rt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),gn=function(){function e(e){this.rangedFilter_=new mn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Ve(t,n))||(n=rt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=rt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=rt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(rt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var u=e;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Ve(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Tt(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Et(t,f));var v=u.updateImmediateChild(t,rt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_t(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?e:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(Et(l.name,l.node)),i.trackChildChange(_t(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,rt.EMPTY_NODE)):e},e}(),yn=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=He}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:C},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===He},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function bn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function wn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function _n(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function En(e,t,n){var r;if(e.index_===Je)"string"===typeof t&&(t=hn(t)),r=_n(e,t,n);else{r=_n(e,t,null==n?k:hn(n))}return r.startAfterSet_=!0,r}function Tn(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Sn(e,t,n){var r;return e.index_===Je?("string"===typeof t&&(t=fn(t)),r=Tn(e,t,n)):r=Tn(e,t,null==n?C:fn(n)),r.endBeforeSet_=!0,r}function In(e,t){var n=e.copy();return n.index_=t,n}function Cn(e){var t,n={};return e.isDefault()||(e.index_===He?t="$priority":e.index_===pn?t="$value":e.index_===Je?t="$key":((0,o.hu)(e.index_ instanceof vn,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,o.Pz)(t),e.startSet_&&(n.startAt=(0,o.Pz)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,o.Pz)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,o.Pz)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,o.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}var kn,xn=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new St(r.getIndex()),o=(n=r).loadsAllData()?new St(n.getIndex()):n.hasLimit()?new gn(n):new mn(n);this.processor_=function(e){return{filter:e}}(o);var a=t.serverCache,s=t.eventCache,u=i.updateFullNode(rt.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(rt.EMPTY_NODE,s.getNode(),null),l=new pt(u,a.isFullyInitialized(),i.filtersNodes()),h=new pt(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=vt(h,l),this.eventGenerator_=new sn(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Nn(e,t){var n=bt(e.viewCache_);return n&&(e.query.getQueryParams().loadsAllData()||!Y(t)&&!n.getImmediateChild(z(t)).isEmpty())?n.getChild(t):null}function An(e){return 0===e.eventRegistrations_.length}function Pn(e,t,n){var r=[];if(n){(0,o.hu)(null==t,"A cancel should cancel all event registrations.");var i=e.query.path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],s=0;s<e.eventRegistrations_.length;++s){var u=e.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(s+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Dn(e,t,n,r){t.type===ot.MERGE&&null!==t.source.queryId&&((0,o.hu)(bt(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(yt(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=e.viewCache_,u=Zt(e.processor_,s,t,n,r);return i=e.processor_,a=u.viewCache,(0,o.hu)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,On(e,u.changes,u.viewCache.eventCache.getNode(),null)}function On(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),un(e,i,"child_removed",t,r,n),un(e,i,"child_added",t,r,n),un(e,i,"child_moved",o,r,n),un(e,i,"child_changed",t,r,n),un(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Rn=function(){this.views=new Map};function Ln(e,t,n,r){var a,s,u=t.source.queryId;if(null!==u){var c=e.views.get(u);return(0,o.hu)(null!=c,"SyncTree gave us an op for an invalid query."),Dn(c,t,n,r)}var l=[];try{for(var h=(0,i.XA)(e.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(Dn(c,t,n,r))}}catch(d){a={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return l}function Mn(e,t,n,r,i){var o=t.queryIdentifier(),a=e.views.get(o);if(!a){var s=zt(n,i?r:null),u=!1;s?u=!0:r instanceof rt?(s=Gt(n,r),u=!1):(s=rt.EMPTY_NODE,u=!1);var c=vt(new pt(s,u,!1),new pt(r,i,!1));return new xn(t,c)}return a}function Fn(e,t,n,r,i,o){var a=Mn(e,t,r,i,o);return e.views.has(t.queryIdentifier())||e.views.set(t.queryIdentifier(),a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(He,(function(e,t){r.push(_t(e,t))})),n.isFullyInitialized()&&r.push(wt(n.getNode())),On(e,r,n.getNode(),t)}(a,n)}function jn(e,t,n,r){var a,s,u=t.queryIdentifier(),c=[],l=[],h=zn(e);if("default"===u)try{for(var f=(0,i.XA)(e.views.entries()),d=f.next();!d.done;d=f.next()){var p=(0,i.CR)(d.value,2),v=p[0],m=p[1];l=l.concat(Pn(m,n,r)),An(m)&&(e.views.delete(v),m.query.getQueryParams().loadsAllData()||c.push(m.query))}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}else(m=e.views.get(u))&&(l=l.concat(Pn(m,n,r)),An(m)&&(e.views.delete(u),m.query.getQueryParams().loadsAllData()||c.push(m.query)));return h&&!zn(e)&&c.push(new((0,o.hu)(kn,"Reference.ts has not been loaded"),kn)(t.repo,t.path)),{removed:c,events:l}}function Un(e){var t,n,r=[];try{for(var o=(0,i.XA)(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;s.query.getQueryParams().loadsAllData()||r.push(s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function qn(e,t){var n,r,o=null;try{for(var a=(0,i.XA)(e.views.values()),s=a.next();!s.done;s=a.next()){var u=s.value;o=o||Nn(u,t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}function Vn(e,t){if(t.getQueryParams().loadsAllData())return Gn(e);var n=t.queryIdentifier();return e.views.get(n)}function Bn(e,t){return null!=Vn(e,t)}function zn(e){return null!=Gn(e)}function Gn(e){var t,n;try{for(var r=(0,i.XA)(e.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;if(a.query.getQueryParams().loadsAllData())return a}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var Kn=1,Wn=function(e){this.listenProvider_=e,this.syncPointTree_=new lt(null),this.pendingWriteTree_={visibleWrites:Ct.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Hn(e,t,n,r,i){return function(e,t,n,r,i){(0,o.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=kt(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?tr(e,new ft({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Qn(e,t,n,r){!function(e,t,n,r){(0,o.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=xt(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=lt.fromObject(n);return tr(e,new dt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Jn(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(jt(e.pendingWriteTree_,t)){var i=new lt(null);return null!=r.snap?i=i.set(B(),!0):O(r.children,(function(e){i=i.set(new V(e),!0)})),tr(e,new ct(r.path,i,n))}return[]}function $n(e,t,n){return tr(e,new ft({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Yn(e,t,n,r){var i=t.path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t.queryIdentifier()||Bn(o,t))){var s=jn(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e.getQueryParams().loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return zn(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&zn(t))return[Gn(t)];var r=[];return t&&(r=Un(t)),O(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,m=ir(e,p);e.listenProvider_.startListening(lr(v),or(e,v),m.hashFn,m.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(lr(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(ar(t));e.listenProvider_.stopListening(lr(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=ar(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function Xn(e,t,n){var r=t.path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=X(e,r);i=i||qn(t,n),a=a||zn(t)}));var s,u=e.syncPointTree_.get(r);(u?(a=a||zn(u),i=i||qn(u,B())):(u=new Rn,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=rt.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=qn(t,B());n&&(i=i.updateImmediateChild(e,n))})));var c=Bn(u,t);if(!c&&!t.getQueryParams().loadsAllData()){var l=ar(t);(0,o.hu)(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Kn++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=Fn(u,t,n,Ft(e.pendingWriteTree_,r),i,s);if(!c&&!a){var d=Vn(u,t);f=f.concat(function(e,t,n){var r=t.path,i=or(e,t),a=ir(e,n),s=e.listenProvider_.startListening(lr(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)(0,o.hu)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(e,t,n){if(!Y(e)&&t&&zn(t))return[Gn(t).query];var r=[];return t&&(r=r.concat(Un(t).map((function(e){return e.query})))),O(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<c.length;++l){var h=c[l];e.listenProvider_.stopListening(lr(h),or(e,h))}return s}(e,t,d))}return f}function Zn(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=qn(n,X(e,t));if(r)return r}));return Bt(r,t,i,n,!0)}function er(e,t){var n=t.path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=X(e,n);r=r||qn(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||qn(i,B()):(i=new Rn,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new pt(r,!0,!1):null;return function(e){return yt(e.viewCache_)}(Mn(i,t,Ft(e.pendingWriteTree_,t.path),o?a.getNode():rt.EMPTY_NODE,o))}function tr(e,t){return nr(t,e.syncPointTree_,null,Ft(e.pendingWriteTree_,B()))}function nr(e,t,n,r){if(Y(e.path))return rr(e,t,n,r);var i=t.get(B());null==n&&null!=i&&(n=qn(i,B()));var o=[],a=z(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=Jt(r,a);o=o.concat(nr(s,u,c,l))}return i&&(o=o.concat(Ln(i,e,r,n))),o}function rr(e,t,n,r){var i=t.get(B());null==n&&null!=i&&(n=qn(i,B()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=Jt(r,t),u=e.operationForChild(t);u&&(o=o.concat(rr(u,i,a,s)))})),i&&(o=o.concat(Ln(i,e,r,n))),o}function ir(e,t){var n=t.query,r=or(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||rt.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=sr(e,n);if(r){var i=ur(r),o=i.path,a=i.queryId,s=X(o,t);return cr(e,o,new ht(st(a),s))}return[]}(e,n.path,r):function(e,t){return tr(e,new ht({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Yn(e,n,null,i)}}}function or(e,t){var n=ar(t);return e.queryToTagMap.get(n)}function ar(e){return e.path.toString()+"$"+e.queryIdentifier()}function sr(e,t){return e.tagToQueryMap.get(t)}function ur(e){var t=e.indexOf("$");return(0,o.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new V(e.substr(0,t))}}function cr(e,t,n){var r=e.syncPointTree_.get(t);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Ln(r,n,Ft(e.pendingWriteTree_,t),null)}function lr(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e}var hr=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),fr=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=$(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Zn(this.syncTree_,this.path_)},e}(),dr=function(e,t,n){return e&&"object"===typeof e?((0,o.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?pr(e[".sv"],t,n):"object"===typeof e[".sv"]?vr(e[".sv"],t):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},pr=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,o.hu)(!1,"Unexpected server value: "+e)},vr=function(e,t,n){e.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,o.hu)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},mr=function(e,t,n,r){return yr(t,new fr(n,e),r)},gr=function(e,t,n){return yr(e,new hr(t),n)};function yr(e,t,n){var r,i=e.getPriority().val(),o=dr(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=dr(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new Me(s,at(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Me(o))),u.forEachChild(He,(function(e,i){var o=yr(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}function br(){return{value:null,children:new Map}}function wr(e,t,n){if(Y(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=z(t);e.children.has(r)||e.children.set(r,br()),wr(e.children.get(r),t=K(t),n)}}function _r(e,t){if(Y(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(He,(function(t,n){wr(e,new V(t),n)})),_r(e,t)}if(e.children.size>0){var r=z(t);if(t=K(t),e.children.has(r))_r(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Er(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Er(r,new V(t.toString()+"/"+e),n)}))}var Tr=function(){function e(){this.rootNode_=rt.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Sr=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,o.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,o.p$)(this.counters_)},e}(),Ir={},Cr={};function kr(e){var t=e.toString();return Ir[t]||(Ir[t]=new Sr),Ir[t]}var xr=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,i.pi)({},e);return this.last_&&O(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),Nr=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xr(e);var n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;O(t,(function(t,i){i>0&&(0,o.r3)(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();var Ar=function(){this.eventLists_=[],this.recursionDepth_=0};function Pr(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||ee(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Dr(e,t,n){Pr(e,n),Rr(e,(function(e){return ee(e,t)}))}function Or(e,t,n){Pr(e,n),Rr(e,(function(e){return te(e,t)||te(t,e)}))}function Rr(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Lr(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Lr(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();g&&w("event: "+n.toString()),U(r)}}}var Mr=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,o.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=(0,i.ev)([],(0,i.CR)(this.listeners_[e])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){(0,o.hu)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),Fr=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return(0,i.ZT)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Mr),jr=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,o.uI)()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return(0,i.ZT)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.hu)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Mr),Ur=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&U((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),qr="start",Vr="close",Br=function(){function e(e,t,n,r,i){this.connId=e,this.repoInfo=t,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_(e),this.stats_=kr(t),this.urlFn=function(e){return le(t,ue,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ur(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,o.Yr)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new zr((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,i.CR)(e,5),o=r[0],a=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===qr)n.id=a,n.password=s;else{if(o!==Vr)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,i.CR)(e,2),o=r[0],a=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(o,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=oe,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),"undefined"!==typeof location&&location.hostname&&ae.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(0,o.Yr)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,o.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,o.h$)(t),r=D(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,o.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),zr=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){w("frame writing exception"),u.stack&&w(u.stack),w(u)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||w("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;(0,o.Yr)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){w("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),Gr="";function Kr(e){Gr=e}var Wr=null;"undefined"!==typeof MozWebSocket?Wr=MozWebSocket:"undefined"!==typeof WebSocket&&(Wr=WebSocket);var Hr=function(){function e(t,n,r,i,o){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_(this.connId),this.stats_=kr(n),this.connURL=e.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n){var r={};return r.v=oe,!(0,o.Yr)()&&"undefined"!==typeof location&&location.hostname&&ae.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),le(e,se,r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+Gr+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new Wr(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Wr(this.connURL,[],i)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Wr&&!e.forceDisallow_},e.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,o.cI)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,o.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=D(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Qr=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Br,Hr]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,o=Hr&&Hr.isAvailable(),a=o&&!Hr.previouslyFailed();if(t.webSocketOnly&&(o||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Hr];else{var s=this.transports_=[];try{for(var u=(0,i.XA)(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Jr=function(){function e(e,t,n,r,i,o,a,s){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_("c:"+this.id+":"),this.transportManager_=new Qr(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=q((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=A("t",e),n=A("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=A("t",e),n=A("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=A("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?E("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),oe!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),$r=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),Yr=1e3,Xr=function(e){function t(n,r,i,a,s,u,c){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=t.nextPersistentConnectionId_++,l.log_=_("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Yr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Fr.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&jr.getInstance().on("online",l.onOnline_,l),l}return(0,i.ZT)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this,n=new o.BH,r={p:e.path.toString(),q:e.queryObject()},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),a=e.path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.hu)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&(0,o.r3)(e,"w")){var n=(0,o.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,o.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,o.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,o.Pz)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):E("Unrecognized action received from server: "+(0,o.Pz)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Yr),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var e=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+t.nextConnectionId_++,s=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(e){(0,o.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(e){c?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),s.authToken_=e&&e.accessToken,l=new Jr(a,s.repoInfo_,s.applicationId_,n,r,i,(function(e){S(e+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),u))})).then(null,(function(t){s.log_("Failed to get token: "+t),c||(e.repoInfo_.nodeAdmin&&S(t),h())}))}},t.prototype.interrupt=function(e){w("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){w("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Yr,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return P(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new V(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){w("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var o=(0,i.XA)(this.listens.values()),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,(0,i.XA)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,o.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Gr.replace(/\./g,"-")]=1,(0,o.uI)()?e["framework.cordova"]=1:(0,o.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=jr.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}($r),Zr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=_("p:rest:"),i.listens_={},i}return(0,i.ZT)(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,o.hu)(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var a=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=Cn(e.getQueryParams());this.restRequest_(s+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(s,n,!1,r),(0,o.DV)(a.listens_,u)===c)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Cn(e.getQueryParams()),r=e.path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var a=i&&i.accessToken;a&&(t.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,o.xO)(t);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var e=null;if(u.status>=200&&u.status<300){try{e=(0,o.cI)(u.responseText)}catch(t){S("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,e)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},t}($r),ei=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Ce("DataSnapshot.child",1,t,!1);var n=new V(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,He)},e.prototype.hasChild=function(e){(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ce("DataSnapshot.hasChild",1,e,!1);var t=new V(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if((0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),He))}))},e.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),ti=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function ni(e,t){for(var n=t instanceof V?t:new V(t),r=e,i=z(n);null!==i;){var a=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new ti(i,r,a),i=z(n=K(n))}return r}function ri(e){return e.node.value}function ii(e,t){e.node.value=t,ci(e)}function oi(e){return e.node.childCount>0}function ai(e,t){O(e.node.children,(function(n,r){t(new ti(n,e,r))}))}function si(e,t,n,r){n&&!r&&t(e),ai(e,(function(e){si(e,t,!0,r)})),n&&r&&t(e)}function ui(e){return new V(null===e.parent?e.name:ui(e.parent)+"/"+e.name)}function ci(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===ri(e)&&!oi(e)}(n),i=(0,o.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ci(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ci(e))}(e.parent,e.name,e)}var li="repo_interrupt",hi=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ar,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=br(),this.transactionQueueTree_=new ti,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function fi(e){if(e.stats_=kr(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Zr(e.repoInfo_,(function(t,n,r,i){vi(e,t,n,r,i)}),e.authTokenProvider_),setTimeout((function(){return mi(e,!0)}),0);else{var t=e.app.options.databaseAuthVariableOverride;if("undefined"!==typeof t&&null!==t){if("object"!==typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new Xr(e.repoInfo_,e.app.options.appId,(function(t,n,r,i){vi(e,t,n,r,i)}),(function(t){mi(e,t)}),(function(t){!function(e,t){O(t,(function(t,n){gi(e,t,n)}))}(e,t)}),e.authTokenProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.statsReporter_=function(e,t){var n=e.toString();return Cr[n]||(Cr[n]=t()),Cr[n]}(e.repoInfo_,(function(){return new Nr(e.stats_,e.server_)})),e.infoData_=new Tr,e.infoSyncTree_=new Wn({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t.path);return a.isEmpty()||(o=$n(e.infoSyncTree_,t.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),gi(e,"connected",!1),e.serverSyncTree_=new Wn({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);Or(e.eventQueue_,t.path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function di(e){var t=e.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function pi(e){return(t=(t={timestamp:di(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function vi(e,t,n,r,i){e.dataUpdateCount++;var a=new V(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(i)if(r){var u=(0,o.UI)(n,(function(e){return at(e)}));s=function(e,t,n,r){var i=sr(e,r);if(i){var o=ur(i),a=o.path,s=o.queryId,u=X(a,t),c=lt.fromObject(n);return cr(e,a,new dt(st(s),u,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var c=at(n);s=function(e,t,n,r){var i=sr(e,r);if(null!=i){var o=ur(i),a=o.path,s=o.queryId,u=X(a,t);return cr(e,a,new ft(st(s),u,n))}return[]}(e.serverSyncTree_,a,c,i)}else if(r){var l=(0,o.UI)(n,(function(e){return at(e)}));s=function(e,t,n){var r=lt.fromObject(n);return tr(e,new dt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var h=at(n);s=$n(e.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=Li(e,a)),Or(e.eventQueue_,f,s)}function mi(e,t){gi(e,"connected",t),!1===t&&function(e){Ni(e,"onDisconnectEvents");var t=pi(e),n=br();Er(e.onDisconnect_,B(),(function(r,i){var o=mr(r,i,e.serverSyncTree_,t);wr(n,r,o)}));var r=[];Er(n,B(),(function(t,n){r=r.concat($n(e.serverSyncTree_,t,n));var i=qi(e,t);Li(e,i)})),e.onDisconnect_=br(),Or(e.eventQueue_,B(),r)}(e)}function gi(e,t,n){var r=new V("/.info/"+t),i=at(n);e.infoData_.updateSnapshot(r,i);var o=$n(e.infoSyncTree_,r,i);Or(e.eventQueue_,r,o)}function yi(e){return e.nextWriteId_++}function bi(e,t,n,r,i){Ni(e,"set",{path:t.toString(),value:n,priority:r});var o=pi(e),a=at(n,r),s=Zn(e.serverSyncTree_,t),u=gr(a,s,o),c=yi(e),l=Hn(e.serverSyncTree_,t,u,c,!0);Pr(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||S("set at "+t+" failed: "+n);var a=Jn(e.serverSyncTree_,c,!o);Or(e.eventQueue_,t,a),Ai(e,i,n,r)}));var h=qi(e,t);Li(e,h),Or(e.eventQueue_,h,[])}function wi(e,t,n,r){Ni(e,"update",{path:t.toString(),value:n});var i=!0,o=pi(e),a={};if(O(n,(function(n,r){i=!1,a[n]=mr($(t,n),at(r),e.serverSyncTree_,o)})),i)w("update() called with empty data.  Don't do anything."),Ai(e,r,"ok",void 0);else{var s=yi(e),u=Qn(e.serverSyncTree_,t,a,s);Pr(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||S("update at "+t+" failed: "+n);var a=Jn(e.serverSyncTree_,s,!o),u=a.length>0?Li(e,t):t;Or(e.eventQueue_,u,a),Ai(e,r,n,i)})),O(n,(function(n){var r=qi(e,$(t,n));Li(e,r)})),Or(e.eventQueue_,t,[])}}function _i(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&_r(e.onDisconnect_,t),Ai(e,n,r,i)}))}function Ei(e,t,n,r){var i=at(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&wr(e.onDisconnect_,t,i),Ai(e,r,n,o)}))}function Ti(e,t,n,r,i){var o=at(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&wr(e.onDisconnect_,t,o),Ai(e,i,n,r)}))}function Si(e,t,n,r){if((0,o.xb)(n))return w("onDisconnect().update() called with empty data.  Don't do anything."),void Ai(e,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&O(n,(function(n,r){var i=at(r);wr(e.onDisconnect_,$(t,n),i)})),Ai(e,r,i,o)}))}function Ii(e,t,n){var r;r=".info"===z(t.path)?Xn(e.infoSyncTree_,t,n):Xn(e.serverSyncTree_,t,n),Dr(e.eventQueue_,t.path,r)}function Ci(e,t,n){var r;r=".info"===z(t.path)?Yn(e.infoSyncTree_,t,n):Yn(e.serverSyncTree_,t,n),Dr(e.eventQueue_,t.path,r)}function ki(e){e.persistentConnection_&&e.persistentConnection_.interrupt(li)}function xi(e){e.persistentConnection_&&e.persistentConnection_.resume(li)}function Ni(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),w.apply(void 0,(0,i.ev)([r],(0,i.CR)(t)))}function Ai(e,t,n,r){t&&U((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function Pi(e){return e.__database||(e.__database=new no(e))}function Di(e,t,n,r,i){Ni(e,"transaction on "+t);var a=function(){},s=new $i(e,t);s.on("value",a);var u={path:t,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",a)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Oi(e,t,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new ei(u.currentInputSnapshot,new $i(e,u.path),He);u.onComplete(null,!1,h)}}else{_e("transaction failed: Data returned ",l,u.path),u.status=0;var f=ni(e.transactionQueueTree_,t),d=ri(f)||[];d.push(u),ii(f,d);var v=void 0;if("object"===typeof l&&null!==l&&(0,o.r3)(l,".priority"))v=(0,o.DV)(l,".priority"),(0,o.hu)(be(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else v=(Zn(e.serverSyncTree_,t)||rt.EMPTY_NODE).getPriority().val();var m=pi(e),g=at(l,v),y=gr(g,c,m);u.currentOutputSnapshotRaw=g,u.currentOutputSnapshotResolved=y,u.currentWriteId=yi(e);var b=Hn(e.serverSyncTree_,t,y,u.currentWriteId,u.applyLocally);Or(e.eventQueue_,t,b),Ri(e,e.transactionQueueTree_)}}function Oi(e,t,n){return Zn(e.serverSyncTree_,t,n)||rt.EMPTY_NODE}function Ri(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||Ui(e,t),ri(t)){var n=Fi(e,t);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Oi(e,t,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=X(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;e.server_.put(f.toString(),h,(function(r){Ni(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++){if(n[a].status=2,i=i.concat(Jn(e.serverSyncTree_,n[a].currentWriteId)),n[a].onComplete){var s=n[a].currentOutputSnapshotResolved,u=new $i(e,n[a].path),c=new ei(s,u,He);o.push(n[a].onComplete.bind(null,null,!0,c))}n[a].unwatcher()}Ui(e,ni(e.transactionQueueTree_,t)),Ri(e,e.transactionQueueTree_),Or(e.eventQueue_,t,i);for(a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else{S("transaction at "+f.toString()+" failed: "+r);for(a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r}Li(e,t)}}),s)}(e,ui(t),n)}else oi(t)&&ai(t,(function(t){Ri(e,t)}))}function Li(e,t){var n=Mi(e,t),r=ui(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),s=0;s<t.length;s++){var u=t[s],c=X(n,u.path),l=!1,h=void 0;if((0,o.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Jn(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Jn(e.serverSyncTree_,u.currentWriteId,!0));else{var f=Oi(e,u.path,a);u.currentInputSnapshot=f;var d=t[s].update(f.val());if(void 0!==d){_e("transaction failed: Data returned ",d,u.path);var p=at(d);"object"===typeof d&&null!=d&&(0,o.r3)(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=pi(e),g=gr(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=g,u.currentWriteId=yi(e),a.splice(a.indexOf(v),1),i=(i=i.concat(Hn(e.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally))).concat(Jn(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Jn(e.serverSyncTree_,u.currentWriteId,!0))}if(Or(e.eventQueue_,n,i),i=[],l&&(t[s].status=2,_=t[s].unwatcher,setTimeout(_,Math.floor(0)),t[s].onComplete))if("nodata"===h){var y=new $i(e,t[s].path),b=t[s].currentInputSnapshot,w=new ei(b,y,He);r.push(t[s].onComplete.bind(null,null,!1,w))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}var _;Ui(e,e.transactionQueueTree_);for(s=0;s<r.length;s++)U(r[s]);Ri(e,e.transactionQueueTree_)}(e,Fi(e,n),r),r}function Mi(e,t){var n,r=e.transactionQueueTree_;for(n=z(t);null!==n&&void 0===ri(r);)r=ni(r,n),n=z(t=K(t));return r}function Fi(e,t){var n=[];return ji(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function ji(e,t,n){var r=ri(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);ai(t,(function(t){ji(e,t,n)}))}function Ui(e,t){var n=ri(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ii(t,n.length>0?n:void 0)}ai(t,(function(t){Ui(e,t)}))}function qi(e,t){var n=ui(Mi(e,t)),r=ni(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Vi(e,t)})),Vi(e,r),si(r,(function(t){Vi(e,t)})),n}function Vi(e,t){var n=ri(t);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)if(3===n[s].status);else if(1===n[s].status)(0,o.hu)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set";else if((0,o.hu)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Jn(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete){r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))}-1===a?ii(t,void 0):n.length=a+1,Or(e.eventQueue_,ui(t),i);for(s=0;s<r.length;s++)U(r[s])}}var Bi,zi=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel",1,e,!0);var t=new o.BH;return _i(this.repo_,this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),xe("OnDisconnect.remove",this.path_),(0,o.Wj)("OnDisconnect.remove",1,e,!0);var t=new o.BH;return Ei(this.repo_,this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),xe("OnDisconnect.set",this.path_),we("OnDisconnect.set",1,e,this.path_,!1),(0,o.Wj)("OnDisconnect.set",2,t,!0);var n=new o.BH;return Ei(this.repo_,this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),xe("OnDisconnect.setWithPriority",this.path_),we("OnDisconnect.setWithPriority",1,e,this.path_,!1),Te("OnDisconnect.setWithPriority",2,t,!1),(0,o.Wj)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.BH;return Ti(this.repo_,this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),xe("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ee("OnDisconnect.update",1,e,this.path_,!1),(0,o.Wj)("OnDisconnect.update",2,t,!0);var i=new o.BH;return Si(this.repo_,this.path_,e,i.wrapCallback(t)),i.promise},e}(),Gi=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Ki=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},e}(),Wi=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Hi=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Ki("value",this,new ei(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Wi(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Qi=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,(0,o.r3)(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Wi(this,e,t):null},e.prototype.createEvent=function(e,t){(0,o.hu)(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Ki(e.type,this,new ei(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return s===a&&(!t.callbacks_[a]||!this.callbacks_[s]||t.callbacks_[a]===this.callbacks_[s])}return i.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Ji=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return(0,o.hu)(Bi,"Reference.ts has not been loaded"),Bi},set:function(e){Bi=e},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Je){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==C)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==k)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===He){if(null!=t&&!be(t)||null!=n&&!be(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(e.getIndex()instanceof vn||e.getIndex()===pn,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return(0,o.Dv)("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){(0,o.Dv)("Query.on",2,4,arguments.length),Se("Query.on",1,t,!1),(0,o.Wj)("Query.on",2,n,!1);var a=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[t]=n,this.onChildEvent(s,a.cancel,a.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new Hi(e,t||null,n||null);Ii(this.repo,this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new Qi(e,t,n);Ii(this.repo,this,r)},e.prototype.off=function(e,t,n){(0,o.Dv)("Query.off",0,3,arguments.length),Se("Query.off",1,e,!0),(0,o.Wj)("Query.off",2,t,!0),(0,o.lb)("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var a=t||null;r=new Hi(a,null,n||null)}else e&&(t&&((i={})[e]=t),r=new Qi(i,null,n||null));Ci(this.repo,this,r)},e.prototype.get=function(){return function(e,t){var n=er(e.serverSyncTree_,t);return null!=n?Promise.resolve(new ei(n,t.getRef(),t.getQueryParams().getIndex())):e.server_.get(t).then((function(n){var r=at(n),i=$n(e.serverSyncTree_,t.path,r);return Dr(e.eventQueue_,t.path,i),Promise.resolve(new ei(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return Ni(e,"get for query "+(0,o.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))}))}(this.repo,this)},e.prototype.once=function(t,n,r,i){var a=this;(0,o.Dv)("Query.once",1,4,arguments.length),Se("Query.once",1,t,!1),(0,o.Wj)("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.BH;c.promise.catch((function(){}));var l=function e(r){u&&(u=!1,a.off(t,e),n&&n.bind(s.context)(r),c.resolve(r))};return this.on(t,l,(function(e){a.off(t,l),s.cancel&&s.cancel.bind(s.context)(e),c.reject(e)})),c.promise},e.prototype.limitToFirst=function(t){if((0,o.Dv)("Query.limitToFirst",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,bn(this.queryParams_,t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if((0,o.Dv)("Query.limitToLast",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,wn(this.queryParams_,t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if((0,o.Dv)("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ce("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new V(t);if(Y(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new vn(n),i=In(this.queryParams_,r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){(0,o.Dv)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=In(this.queryParams_,Je);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=In(this.queryParams_,He);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){(0,o.Dv)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=In(this.queryParams_,pn);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),we("Query.startAt",1,t,this.path,!0),Ie("Query.startAt",2,n,!0);var r=_n(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.startAfter=function(t,n){void 0===t&&(t=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),we("Query.startAfter",1,t,this.path,!1),Ie("Query.startAfter",2,n,!0);var r=En(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),we("Query.endAt",1,t,this.path,!0),Ie("Query.endAt",2,n,!0);var r=Tn(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endBefore=function(t,n){void 0===t&&(t=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),we("Query.endBefore",1,t,this.path,!1),Ie("Query.endBefore",2,n,!0);var r=Sn(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if((0,o.Dv)("Query.equalTo",1,2,arguments.length),we("Query.equalTo",1,e,this.path,!1),Ie("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this.repo.toString()+H(this.path)},e.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return function(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==He&&(t.i=e.index_.toString()),t}(this.queryParams_)},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=P(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=ee(this.path,t.path),a=this.queryIdentifier()===t.queryIdentifier();return r&&i&&a},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,(0,o.Wj)(e,3,r.cancel,!0),r.context=n,(0,o.lb)(e,4,r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error((0,o.gK)(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),$i=function(e){function t(t,n){if(!(t instanceof hi))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,new yn,!1)||this}return(0,i.ZT)(t,e),t.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),Y(this.path)?null:W(this.path)},t.prototype.child=function(e){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"===typeof e?e=String(e):e instanceof V||(null===z(this.path)?ke("Reference.child",1,e,!1):Ce("Reference.child",1,e,!1)),new t(this.repo,$(this.path,e))},t.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var e=J(this.path);return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){(0,o.Dv)("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return Pi(this.repo)},t.prototype.set=function(e,t){(0,o.Dv)("Reference.set",1,2,arguments.length),xe("Reference.set",this.path),we("Reference.set",1,e,this.path,!1),(0,o.Wj)("Reference.set",2,t,!0);var n=new o.BH;return bi(this.repo,this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if((0,o.Dv)("Reference.update",1,2,arguments.length),xe("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ee("Reference.update",1,e,this.path,!1),(0,o.Wj)("Reference.update",2,t,!0);var i=new o.BH;return wi(this.repo,this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if((0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),xe("Reference.setWithPriority",this.path),we("Reference.setWithPriority",1,e,this.path,!1),Te("Reference.setWithPriority",2,t,!1),(0,o.Wj)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.BH;return bi(this.repo,this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return(0,o.Dv)("Reference.remove",0,1,arguments.length),xe("Reference.remove",this.path),(0,o.Wj)("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if((0,o.Dv)("Reference.transaction",1,3,arguments.length),xe("Reference.transaction",this.path),(0,o.Wj)("Reference.transaction",1,e,!1),(0,o.Wj)("Reference.transaction",2,t,!0),Ae("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.BH;"function"===typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new Gi(n,i)),"function"===typeof t&&t(e,n,i)};return Di(this.repo,this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),xe("Reference.setPriority",this.path),Te("Reference.setPriority",1,e,!1),(0,o.Wj)("Reference.setPriority",2,t,!0);var n=new o.BH;return bi(this.repo,$(this.path,".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){(0,o.Dv)("Reference.push",0,2,arguments.length),xe("Reference.push",this.path),we("Reference.push",1,e,this.path,!0),(0,o.Wj)("Reference.push",2,t,!0);var n,r=di(this.repo),i=ln(r),a=this.child(i),s=this.child(i);return n=null!=e?a.set(e,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"===typeof t&&n.catch((function(){})),a},t.prototype.onDisconnect=function(){return xe("Reference.onDisconnect",this.path),new zi(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Ji);Ji.__referenceConstructor=$i,function(e){(0,o.hu)(!kn,"__referenceConstructor has already been defined"),kn=e}($i);var Yi=function(){function e(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then((function(e){return n.auth_=e}))}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout((function(){return e(null)}),0),this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)})))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',S(e)},e}(),Xi=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}(),Zi={},eo=!1;function to(e,t,n,r){var i=n||e.options.databaseURL;void 0===i&&(e.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",e.options.projectId),i=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=fe(i,r),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,i="http://"+c+"?ns="+u.namespace,u=(s=fe(i,r)).repoInfo):a=!s.repoInfo.secure;var l=r&&a?new Xi:new Yi(e,t);Ne("Invalid Firebase Database URL",1,s),Y(s.path)||T("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n){var r=(0,o.DV)(Zi,t.name);r||(r={},Zi[t.name]=r);var i=(0,o.DV)(r,e.toURLString());i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new hi(e,eo,t,n),r[e.toURLString()]=i,i}(u,e,l);return Pi(h)}var no=function(){function e(e){var t=this;this.repoInternal_=e,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return this.checkDeleted_("delete"),function(e){var t=(0,o.DV)(Zi,e.app.name);t&&(0,o.DV)(t,e.key)===e||T("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),ki(e),delete t[e.key]}(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},e instanceof hi||T("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(e.prototype,"repo_",{get:function(){return this.instanceStarted_||(fi(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new $i(this.repo_,B())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.useEmulator=function(e,t){this.checkDeleted_("useEmulator"),this.instanceStarted_?T("Cannot call useEmulator() after instance has already been initialized."):function(e,t,n){e.repoInfo_=new ce(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),e.repoInfo_.nodeAdmin&&(e.authTokenProvider_=new Xi)}(this.repoInternal_,e,t)},e.prototype.ref=function(e){return this.checkDeleted_("ref"),(0,o.Dv)("database.ref",0,1,arguments.length),e instanceof $i?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),(0,o.Dv)(t,1,1,arguments.length);var n=fe(e,this.repo_.repoInfo_.nodeAdmin);Ne(t,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||T(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repoInternal_&&T("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){(0,o.Dv)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),ki(this.repo_)},e.prototype.goOnline=function(){(0,o.Dv)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),xi(this.repo_)},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},e}();var ro=Object.freeze({__proto__:null,forceLongPolling:function(){Hr.forceDisallow(),Br.forceAllow()},forceWebSockets:function(){Br.forceDisallow()},isWebSocketsAvailable:function(){return Hr.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var n;t?(e.statsListener_||(e.statsListener_=new xr(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);O(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e.repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e.repo,t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e.repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,u=void 0!==a&&a;Kr(r);var c=new s.zt("auth-internal",new s.H0("database-standalone"));return c.setComponent(new s.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:to(t,c,n,u),namespace:o}}}),io=Xr;Xr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Xr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var oo=Jr,ao=ce,so=Object.freeze({__proto__:null,DataConnection:io,RealTimeConnection:oo,hijackHash:function(e){var t=Xr.prototype.put;return Xr.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Xr.prototype.put=t}},ConnectionTarget:ao,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){!function(e){eo=e}(e)}}),uo=no.ServerValue;!function(t){Kr(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new s.wA("database",(function(e,t){var n=t.instanceIdentifier;return to(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),n,void 0)}),"PUBLIC").setServiceProps({Reference:$i,Query:Ji,Database:no,DataSnapshot:ei,enableLogging:b,INTERNAL:ro,ServerValue:uo,TEST_ACCESS:so}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.9.6"),(0,o.Yr)()&&(e.exports=n)}(r.Z)},494:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},386:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(t,{Am:function(){return d},Ub:function(){return f},Yd:function(){return h},in:function(){return o}});var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=c[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},365:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},971:function(e,t,n){"use strict";n.d(t,{$s:function(){return Z},BH:function(){return v},DV:function(){return U},Dv:function(){return H},GJ:function(){return F},LL:function(){return A},Mn:function(){return S},Pz:function(){return R},UG:function(){return y},UI:function(){return V},US:function(){return l},Wj:function(){return J},Yr:function(){return I},ZB:function(){return p},ZR:function(){return N},b$:function(){return _},cI:function(){return O},d:function(){return E},dS:function(){return Y},eu:function(){return k},g5:function(){return u},gK:function(){return Q},gQ:function(){return z},h$:function(){return h},hl:function(){return C},hu:function(){return s},jU:function(){return b},lb:function(){return $},ne:function(){return G},p$:function(){return d},r3:function(){return j},ru:function(){return w},uI:function(){return g},ug:function(){return X},w1:function(){return T},w9:function(){return M},xO:function(){return B},xb:function(){return q},z$:function(){return m},zI:function(){return x}});var r=n(388),i=!1,o=!1,a="${JSCORE_VERSION}",s=function(e,t){if(!e)throw u(t)},u=function(e){return new Error("Firebase Database ("+a+") INTERNAL ASSERT FAILED: "+e)},c=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){var t=c(e);return l.encodeByteArray(t,!0)},f=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=p(e[n],t[n]));return e}var v=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function b(){return"object"===typeof self&&self.self===self}function w(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function _(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function E(){return m().indexOf("Electron/")>=0}function T(){var e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return m().indexOf("MSAppHost/")>=0}function I(){return!0===i||!0===o}function C(){return"indexedDB"in self&&null!=indexedDB}function k(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))}function x(){return!(!navigator||!navigator.cookieEnabled)}var N=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,A.prototype.create),o}return(0,r.ZT)(t,e),t}(Error),A=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?P(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new N(i,s,r);return u},e}();function P(e,t){return e.replace(D,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var D=/\{\$([^}]+)}/g;function O(e){return JSON.parse(e)}function R(e){return JSON.stringify(e)}var L=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=O(f(o[0])||""),n=O(f(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},M=function(e){var t=L(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},F=function(e){var t=L(e).claims;return"object"===typeof t&&!0===t.admin};function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function q(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function V(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function B(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}var z=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function G(e,t){var n=new K(e,t);return n.subscribe.bind(n)}var K=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=W),void 0===r.error&&(r.error=W),void 0===r.complete&&(r.complete=W);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function W(){}var H=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Q(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function J(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Q(e,t,r)+"must be a valid function.")}function $(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Q(e,t,r)+"must be a valid context object.")}var Y=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},X=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Z(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},892:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",u="week",c="month",l="quarter",h="year",f="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,a=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:h,w:u,d:s,D:f,h:a,m:o,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=m;var _=function(e){return e instanceof I},E=function e(t,n,r){var i;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();w[o]&&(i=o),n&&(w[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;w[s]=t,i=s}return!r&&i&&(b=i),i||!r&&b},T=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new I(n)},S=y;S.l=E,S.i=_,S.w=function(e,t){return T(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var I=function(){function m(e){this.$L=E(e.locale,null,!0),this.parse(e)}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return S},g.isValid=function(){return!(this.$d.toString()===d)},g.isSame=function(e,t){var n=T(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return T(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<T(e)},g.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!S.u(t)||t,l=S.p(e),d=function(e,t){var i=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},p=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,m=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case h:return r?d(1,0):d(31,11);case c:return r?d(1,m):d(0,m+1);case u:var b=this.$locale().weekStart||0,w=(v<b?v+7:v)-b;return d(r?g-w:g+(6-w),m);case s:case f:return p(y+"Hours",0);case a:return p(y+"Minutes",1);case o:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,u=S.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[s]=l+"Date",n[f]=l+"Date",n[c]=l+"Month",n[h]=l+"FullYear",n[a]=l+"Hours",n[o]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],p=u===s?this.$D+(t-this.$W):t;if(u===c||u===h){var v=this.clone().set(f,1);v.$d[d](p),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[S.p(e)]()},g.add=function(r,l){var f,d=this;r=Number(r);var p=S.p(l),v=function(e){var t=T(d);return S.w(t.date(t.date()+Math.round(e*r)),d)};if(p===c)return this.set(c,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===s)return v(1);if(p===u)return v(7);var m=(f={},f[o]=t,f[a]=n,f[i]=e,f)[p]||1,g=this.$d.getTime()+r*m;return S.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),o=this.$H,a=this.$m,s=this.$M,u=n.weekdays,c=n.months,l=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},h=function(e){return S.s(o%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:S.s(s+1,2,"0"),MMM:l(n.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:S.s(o,2,"0"),h:h(1),hh:h(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:S.s(a,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:i};return r.replace(v,(function(e,t){return t||p[e]||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,f,d){var p,v=S.p(f),m=T(r),g=(m.utcOffset()-this.utcOffset())*t,y=this-m,b=S.m(this,m);return b=(p={},p[h]=b/12,p[c]=b,p[l]=b/3,p[u]=(y-g)/6048e5,p[s]=(y-g)/864e5,p[a]=y/n,p[o]=y/t,p[i]=y/e,p)[v]||y,d?b:S.a(b)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return w[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=E(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return S.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),C=I.prototype;return T.prototype=C,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",c],["$y",h],["$D",f]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),T.extend=function(e,t){return e.$i||(e(t,I,T),e.$i=!0),T},T.locale=E,T.isDayjs=_,T.unix=function(e){return T(1e3*e)},T.en=w[b],T.Ls=w,T.p={},T}()},893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,n,r){var i=n.prototype,o=i.format;r.en.formats=e,i.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,r=function(t,n){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,i){var o=i&&i.toUpperCase();return r||n[i]||e[i]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))}(t,void 0===n?{}:n);return o.call(this,r)}}}()},618:function(e,t,n){var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},888:function(e,t,n){"use strict";var r=n(47);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function q(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function V(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case E:return"Portal";case I:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Te=null,Se=null;function Ie(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function Ce(e){Te?Se?Se.push(e):Se=[e]:Te=e}function ke(){if(Te){var e=Te,t=Se;if(Se=Te=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Te||null!==Se)&&(Ne(),ke())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Oe=!1}function Le(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,qe={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,o,a,s,u){Me=!1,Fe=null,Le.apply(qe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Be(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ge(i),e;if(a===r)return Ge(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,Tt,St,It,Ct=!1,kt=[],xt=null,Nt=null,At=null,Pt=new Map,Dt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void It(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function qt(){Ct=!1,null!==xt&&jt(xt)&&(xt=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Pt.forEach(Ut),Dt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<kt.length){Vt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var zt=w.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=1,Ht(e,t,n,r)}finally{bt=i,zt.transition=o}}function Wt(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=4,Ht(e,t,n,r)}finally{bt=i,zt.transition=o}}function Ht(e,t,n,r){if(Gt){var i=Jt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Mt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dt.set(o,Mt(Dt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Jt(e,t,n,r))&&Gr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),hn=F({},cn,{view:0,detail:0}),fn=on(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(dn),vn=on(F({},dn,{dataTransfer:0})),mn=on(F({},hn,{relatedTarget:0})),gn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function In(){return Sn}var Cn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(Cn),xn=on(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Pn),On=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Rn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function qn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){jr(e,0)}function Jn(e){if(H(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Jn(Hn)){var t=[];Kn(t,Hn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Hn)}function or(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=lr(n,o);var a=lr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Wr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Tr={},Sr={};function Ir(e){if(Tr[e])return Tr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Tr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Cr=Ir("animationend"),kr=Ir("animationiteration"),xr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Rr=Pr[Or];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Cr,"onAnimationEnd"),Dr(kr,"onAnimationIteration"),Dr(xr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(o(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,qr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=o,i=_e(n),a=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=kn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case kr:case xr:u=gn;break;case Nr:u=An;break;case"scroll":u=fn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=xn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=De(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=xn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:wi(u),d=null==c?s:wi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Hr(d))p++;for(d=0,v=f;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)f=Hr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==u&&Qr(a,s,u,l,!1),null!==c&&null!==h&&Qr(a,h,c,l,!0)}if("select"===(u=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Gn(s))if(Yn)m=ar;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Kn(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?wi(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(g=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:g}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&qn(e,t)?(e=en(),Zt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}jr(a,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=De(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=De(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=De(n,o))&&a.unshift(Kr(n,u,s)):i||null!=(u=De(n,o))&&a.push(Kr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[di]||null}var Ei=[],Ti=-1;function Si(e){return{current:e}}function Ii(e){0>Ti||(e.current=Ei[Ti],Ei[Ti]=null,Ti--)}function Ci(e,t){Ti++,Ei[Ti]=e.current,e.current=t}var ki={},xi=Si(ki),Ni=Si(!1),Ai=ki;function Pi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ni),Ii(xi)}function Ri(e,t,n){if(xi.current!==ki)throw Error(o(168));Ci(xi,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ai=xi.current,Ci(xi,e),Ci(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(xi),Ci(xi,e)):Ii(Ni),Ci(Ni,n)}var ji=null,Ui=!1,qi=!1;function Vi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!qi&&null!==ji){qi=!0;var e=0,t=bt;try{var n=ji;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),He(Ze,Bi),i}finally{bt=t,qi=!1}}return null}var zi=[],Gi=0,Ki=null,Wi=0,Hi=[],Qi=0,Ji=null,$i=1,Yi="";function Xi(e,t){zi[Gi++]=Wi,zi[Gi++]=Ki,Ki=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Yi,Hi[Qi++]=Ji,Ji=e;var r=$i;e=Yi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$i=1<<32-at(t)+i|n<<i|r,Yi=o+e}else $i=1<<o|n<<i|r,Yi=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Ki;)Ki=zi[--Gi],zi[Gi]=null,Wi=zi[--Gi],zi[Gi]=null;for(;e===Ji;)Ji=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Si(null),bo=null,wo=null,_o=null;function Eo(){_o=wo=bo=null}function To(e){var t=yo.current;Ii(yo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){bo=e,_o=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var ko=null;function xo(e){null===ko?ko=[e]:ko.push(e)}function No(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ao(e,r)}function Ao(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ro(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ao(e,n)}return null===(i=r.interleaved)?(t.next=t,xo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ao(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jo(e,t,n,r){var i=e.updateQueue;Po=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==o){var h=i.baseState;for(a=0,l=c=u=null,s=o;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Po=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Mu|=a,e.lanes=a,e.memoizedState=h}}function Uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var qo=(new r.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Ro(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(nc(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Ro(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(nc(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ro(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(nc(t,e,r,n),Mo(t,e,r))}};function zo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Go(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Di(t)?Ai:xi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function Wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=qo,Do(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Di(t)?Ai:xi.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bo.enqueueReplaceState(i,i.state,null),jo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===qo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===T?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&Jo(o)===t.type)?((r=i(t,n.props)).ref=Ho(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Ho(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Ho(e,null,t),n.return=e,n;case E:return(t=jc(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g,h=m}if(v===s.length)return n(i,h),io&&Xi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return io&&Xi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),io&&Xi(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(i,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=a(b,s,m),null===h?l=b:h.sibling=b,h=b,v=g}if(y.done)return n(i,v),io&&Xi(i,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,c))&&(s=a(y,s,m),null===h?l=y:h.sibling=y,h=y);return io&&Xi(i,m),l}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),io&&Xi(i,m),l}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===T&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,l=o;null!==l;){if(l.key===c){if((c=a.type)===T){if(7===l.tag){n(r,l.sibling),(o=i(l,a.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Jo(c)===l.type){n(r,l.sibling),(o=i(l,a.props)).ref=Ho(r,l,a),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===T?((o=Lc(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Rc(a.type,a.key,a.props,null,r.mode,u)).ref=Ho(r,o,a),u.return=r,r=u)}return s(r);case E:e:{for(l=a.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=jc(a,r.mode,u)).return=r,r=o}return s(r);case D:return e(r,o,(l=a._init)(a._payload),u)}if(te(a))return v(r,o,a,u);if(L(a))return m(r,o,a,u);Qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fc(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Yo=$o(!0),Xo=$o(!1),Zo={},ea=Si(Zo),ta=Si(Zo),na=Si(Zo);function ra(e){if(e===Zo)throw Error(o(174));return e}function ia(e,t){switch(Ci(na,t),Ci(ta,e),Ci(ea,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(ea),Ci(ea,t)}function oa(){Ii(ea),Ii(ta),Ii(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ci(ta,e),Ci(ea,n))}function sa(e){ta.current===e&&(Ii(ea),Ii(ta))}var ua=Si(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function ha(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var fa=w.ReactCurrentDispatcher,da=w.ReactCurrentBatchConfig,pa=0,va=null,ma=null,ga=null,ya=!1,ba=!1,wa=0,_a=0;function Ea(){throw Error(o(321))}function Ta(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,i,a){if(pa=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ba){a=0;do{if(ba=!1,wa=0,25<=a)throw Error(o(301));a+=1,ga=ma=null,t.updateQueue=null,fa.current=cs,e=n(r,i)}while(ba)}if(fa.current=as,t=null!==ma&&null!==ma.next,pa=0,ga=ma=va=null,ya=!1,t)throw Error(o(300));return e}function Ia(){var e=0!==wa;return wa=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?va.memoizedState=ga=e:ga=ga.next=e,ga}function ka(){if(null===ma){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?va.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?va.memoizedState=ga=e:ga=ga.next=e}return ga}function xa(e,t){return"function"===typeof t?t(e):t}function Na(e){var t=ka(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,c=null,l=a;do{var h=l.lane;if((pa&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,va.lanes|=h,Mu|=h}l=l.next}while(null!==l&&l!==a);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,Mu|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Aa(e){var t=ka(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Pa(){}function Da(e,t){var n=va,r=ka(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,ws=!0),r=r.queue,Ga(La.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Ua(9,Ra.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(o(349));0!==(30&pa)||Oa(n,t,i)}return i}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ra(e,t,n,r){t.value=n,t.getSnapshot=r,Ma(t)&&Fa(e)}function La(e,t,n){return n((function(){Ma(t)&&Fa(e)}))}function Ma(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fa(e){var t=Ao(e,1);null!==t&&nc(t,e,1,-1)}function ja(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function Ua(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qa(){return ka().memoizedState}function Va(e,t,n,r){var i=Ca();va.flags|=e,i.memoizedState=Ua(1|t,n,void 0,void 0===r?null:r)}function Ba(e,t,n,r){var i=ka();r=void 0===r?null:r;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==r&&Ta(r,a.deps))return void(i.memoizedState=Ua(t,n,o,r))}va.flags|=e,i.memoizedState=Ua(1|t,n,o,r)}function za(e,t){return Va(8390656,8,e,t)}function Ga(e,t){return Ba(2048,8,e,t)}function Ka(e,t){return Ba(4,2,e,t)}function Wa(e,t){return Ba(4,4,e,t)}function Ha(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4,4,Ha.bind(null,t,e),n)}function Ja(){}function $a(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ta(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ya(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ta(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xa(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,Mu|=n,e.baseState=!0),t)}function Za(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=da.transition;da.transition={};try{e(!1),t()}finally{bt=n,da.transition=r}}function es(){return ka().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=No(e,t,n,r))){nc(n,e,r,ec()),os(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,xo(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=No(e,t,i,r))&&(nc(n,e,r,i=ec()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function is(e,t){ba=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Co,useCallback:Ea,useContext:Ea,useEffect:Ea,useImperativeHandle:Ea,useInsertionEffect:Ea,useLayoutEffect:Ea,useMemo:Ea,useReducer:Ea,useRef:Ea,useState:Ea,useDebugValue:Ea,useDeferredValue:Ea,useTransition:Ea,useMutableSource:Ea,useSyncExternalStore:Ea,useId:Ea,unstable_isNewReconciler:!1},ss={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:za,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4194308,4,Ha.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:ja,useDebugValue:Ja,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=Za.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Ca();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nu)throw Error(o(349));0!==(30&pa)||Oa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,za(La.bind(null,r,a,e),[e]),r.flags|=2048,Ua(9,Ra.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Nu.identifierPrefix;if(io){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-at($i)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_a++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Co,useCallback:$a,useContext:Co,useEffect:Ga,useImperativeHandle:Qa,useInsertionEffect:Ka,useLayoutEffect:Wa,useMemo:Ya,useReducer:Na,useRef:qa,useState:function(){return Na(xa)},useDebugValue:Ja,useDeferredValue:function(e){return Xa(ka(),ma.memoizedState,e)},useTransition:function(){return[Na(xa)[0],ka().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Da,useId:es,unstable_isNewReconciler:!1},cs={readContext:Co,useCallback:$a,useContext:Co,useEffect:Ga,useImperativeHandle:Qa,useInsertionEffect:Ka,useLayoutEffect:Wa,useMemo:Ya,useReducer:Aa,useRef:qa,useState:function(){return Aa(xa)},useDebugValue:Ja,useDeferredValue:function(e){var t=ka();return null===ma?t.memoizedState=e:Xa(t,ma.memoizedState,e)},useTransition:function(){return[Aa(xa)[0],ka().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Da,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Ku=r),fs(0,t)},n}function vs(e,t,n){(n=Ro(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Wu?Wu=new Set([this]):Wu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ro(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=w.ReactCurrentOwner,ws=!1;function _s(e,t,n,r){t.child=null===e?Xo(t,null,n,r):Yo(t,e.child,n,r)}function Es(e,t,n,r,i){n=n.render;var o=t.ref;return Io(t,i),r=Sa(e,t,n,r,o,i),n=Ia(),null===e||ws?(io&&n&&eo(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Ts(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Dc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Oc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return ks(e,t,n,r,i)}function Is(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ou,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ou,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Ou,Du),Du|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Ou,Du),Du|=r;return _s(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,n,r,i){var o=Di(n)?Ai:xi.current;return o=Pi(t,o),Io(t,i),n=Sa(e,t,n,r,o,i),r=Ia(),null===e||ws?(io&&r&&eo(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function xs(e,t,n,r,i){if(Di(n)){var o=!0;Mi(t)}else o=!1;if(Io(t,i),null===t.stateNode)zs(e,t),Go(t,n,r),Wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Pi(t,c=Di(n)?Ai:xi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Ko(t,a,r,c),Po=!1;var f=t.memoizedState;a.state=f,jo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Po?("function"===typeof l&&(Vo(t,n,l,r),u=t.memoizedState),(s=Po||zo(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:go(t.type,s),a.props=c,h=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Co(u):u=Pi(t,u=Di(n)?Ai:xi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&Ko(t,a,r,u),Po=!1,f=t.memoizedState,a.state=f,jo(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Po?("function"===typeof d&&(Vo(t,n,d,r),p=t.memoizedState),(c=Po||zo(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,o,i)}function Ns(e,t,n,r,i,o){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Gs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Yo(t,e.child,null,o),t.child=Yo(t,null,s,o)):_s(e,t,s,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ia(e,t.containerInfo)}function Ps(e,t,n,r,i){return po(),vo(i),t.flags|=256,_s(e,t,n,r),t.child}var Ds,Os,Rs,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(ua,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):js(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Yo(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ao(e,i),nc(r,e,i,-1))}return vc(),Us(e,t,s,r=hs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Yi,Hi[Qi++]=Ji,$i=e.id,Yi=e.overflow,Ji=t),(t=js(t,r.children)).flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Oc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&vo(r),Yo(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function Vs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qs(e,n,t);else if(19===e.tag)qs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,o);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Di(t.type)&&Oi(),Ws(t),null;case 3:return r=t.stateNode,oa(),Ii(Ni),Ii(xi),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ws(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ws(t),null}if(e=ra(ea.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[di]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var u in ye(n,a),i=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ds(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=J(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?me(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Ur("scroll",e):null!=l&&b(e,a,l,u))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Rs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ws(t),null;case 13:if(Ii(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Ru&&(Ru=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return oa(),null===e&&Br(t.stateNode.containerInfo),Ws(t),null;case 10:return To(t.type._context),Ws(t),null;case 19:if(Ii(ua),null===(a=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Ks(a,!1);else{if(0!==Ru||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ca(e))){for(t.flags|=128,Ks(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>Bu&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Ws(t),null}else 2*Ye()-a.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=ua.current,Ci(ua,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qs(e,t){switch(to(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ii(Ni),Ii(xi),ha(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ii(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ua),null;case 4:return oa(),null;case 10:return To(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=J(e,i),r=J(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),a||u===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,$s=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&eu(t,n,o)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||Zs(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&eu(n,t,a),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!$s&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,fu(e,t,n),$s=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=xc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(o(160));du(a,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Sc(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:vu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===a.type&&null!=a.name&&Y(i,a),be(u,s);var l=be(u,a);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):b(i,h,f,l)}switch(u){case"input":X(i,a);break;case"textarea":oe(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):d!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[di]=a}catch(m){Sc(e,e.return,m)}}break;case 6:if(vu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Sc(e,e.return,m)}}break;case 3:if(vu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=Ye())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($s=(l=$s)||h,vu(t,e),$s=l):vu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Xs=e,h=e.child;null!==h;){for(f=Xs=h;null!==Xs;){switch(p=(d=Xs).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){_u(f);continue}}null!==p?(p.return=d,Xs=p):_u(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Sc(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;uu(e,su(e),a);break;default:throw Error(o(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Xs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Js;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Js;var c=$s;if(Js=a,($s=u)&&!c)for(Xs=i;null!==Xs;)u=(a=Xs).child,22===a.tag&&null!==a.memoizedState?Eu(i):null!==u?(u.return=a,Xs=u):Eu(i);for(;null!==o;)Xs=o,bu(o,t,n),o=o.sibling;Xs=i,Js=s,$s=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xs=o):wu(e)}}function wu(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:go(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Uo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Uo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(o(163))}$s||512&t.flags&&iu(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function _u(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function Eu(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var o=t.return;try{iu(t)}catch(u){Sc(t,o,u)}break;case 5:var a=t.return;try{iu(t)}catch(u){Sc(t,a,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Tu,Su=Math.ceil,Iu=w.ReactCurrentDispatcher,Cu=w.ReactCurrentOwner,ku=w.ReactCurrentBatchConfig,xu=0,Nu=null,Au=null,Pu=0,Du=0,Ou=Si(0),Ru=0,Lu=null,Mu=0,Fu=0,ju=0,Uu=null,qu=null,Vu=0,Bu=1/0,zu=null,Gu=!1,Ku=null,Wu=null,Hu=!1,Qu=null,Ju=0,$u=0,Yu=null,Xu=-1,Zu=0;function ec(){return 0!==(6&xu)?Ye():-1!==Xu?Xu:Xu=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&xu)&&0!==Pu?Pu&-Pu:null!==mo.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$u)throw $u=0,Yu=null,Error(o(185));gt(e,n,r),0!==(2&xu)&&e===Nu||(e===Nu&&(0===(2&xu)&&(Fu|=n),4===Ru&&sc(e,Pu)),rc(e,r),1===n&&0===xu&&0===(1&t.mode)&&(Bu=Ye()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=dt(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Nu?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(uc.bind(null,e)):Vi(uc.bind(null,e)),ai((function(){0===(6&xu)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xu=-1,Zu=0,0!==(6&xu))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=xu;xu|=2;var a=pc();for(Nu===e&&Pu===t||(zu=null,Bu=Ye()+500,fc(e,t));;)try{yc();break}catch(u){dc(e,u)}Eo(),Iu.current=a,xu=i,null!==Au?t=0:(Nu=null,Pu=0,t=Ru)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,Ye()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_c(e,qu,zu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Vu+500-Ye())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,qu,zu),t);break}_c(e,qu,zu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,qu,zu),r);break}_c(e,qu,zu);break;default:throw Error(o(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=qu,qu=n,null!==t&&ac(t)),e}function ac(e){null===qu?qu=e:qu.push.apply(qu,e)}function sc(e,t){for(t&=~ju,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&xu))throw Error(o(327));Ec();var t=ft(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,qu,zu),rc(e,Ye()),null}function cc(e,t){var n=xu;xu|=1;try{return e(t)}finally{0===(xu=n)&&(Bu=Ye()+500,Ui&&Bi())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&xu)&&Ec();var t=xu;xu|=1;var n=ku.transition,r=bt;try{if(ku.transition=null,bt=1,e)return e()}finally{bt=r,ku.transition=n,0===(6&(xu=t))&&Bi()}}function hc(){Du=Ou.current,Ii(Ou)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:oa(),Ii(Ni),Ii(xi),ha();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ii(ua);break;case 10:To(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nu=e,Au=e=Oc(e.current,null),Pu=Du=t,Ru=0,Lu=null,ju=Fu=Mu=0,qu=Uu=null,null!==ko){for(t=0;t<ko.length;t++)if(null!==(r=(n=ko[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}ko=null}return e}function dc(e,t){for(;;){var n=Au;try{if(Eo(),fa.current=as,ya){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(pa=0,ga=ma=va=null,ba=!1,wa=0,Cu.current=null,null===n||null===n.return){Ru=1,Lu=t,Au=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(a,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(a,l,t),vc();break e}c=Error(o(426))}else if(io&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),vo(ls(c,u));break e}}a=c=ls(c,u),4!==Ru&&(Ru=2),null===Uu?Uu=[a]:Uu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,ps(0,c,t));break e;case 1:u=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wu||!Wu.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,vs(a,u,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function pc(){var e=Iu.current;return Iu.current=as,null===e?as:e}function vc(){0!==Ru&&3!==Ru&&2!==Ru||(Ru=4),null===Nu||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Nu,Pu)}function mc(e,t){var n=xu;xu|=2;var r=pc();for(Nu===e&&Pu===t||(zu=null,fc(e,t));;)try{gc();break}catch(i){dc(e,i)}if(Eo(),xu=n,Iu.current=r,null!==Au)throw Error(o(261));return Nu=null,Pu=0,Ru}function gc(){for(;null!==Au;)bc(Au)}function yc(){for(;null!==Au&&!Je();)bc(Au)}function bc(e){var t=Tu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wc(e):Au=t,Cu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hs(n,t,Du)))return void(Au=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Ru=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Ru&&(Ru=5)}function _c(e,t,n){var r=bt,i=ku.transition;try{ku.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Qu);if(0!==(6&xu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Nu&&(Au=Nu=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hu||(Hu=!0,Nc(tt,(function(){return Ec(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=ku.transition,ku.transition=null;var s=bt;bt=1;var u=xu;xu|=4,Cu.current=null,function(e,t){if(ei=Gt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==a||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===a&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:go(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,yu(n,e,i),$e(),xu=u,bt=s,ku.transition=a}else e.current=n;if(Hu&&(Hu=!1,Qu=e,Ju=i),0===(a=e.pendingLanes)&&(Wu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,e=Ku,Ku=null,e;0!==(1&Ju)&&0!==e.tag&&Ec(),0!==(1&(a=e.pendingLanes))?e===Yu?$u++:($u=0,Yu=e):$u=0,Bi()}(e,t,n,r)}finally{ku.transition=i,bt=r}return null}function Ec(){if(null!==Qu){var e=wt(Ju),t=ku.transition,n=bt;try{if(ku.transition=null,bt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Ju=0,0!==(6&xu))throw Error(o(331));var i=xu;for(xu|=4,Xs=e.current;null!==Xs;){var a=Xs,s=a.child;if(0!==(16&Xs.flags)){var u=a.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Xs=l;null!==Xs;){var h=Xs;switch(h.tag){case 0:case 11:case 15:nu(8,h,a)}var f=h.child;if(null!==f)f.return=h,Xs=f;else for(;null!==Xs;){var d=(h=Xs).sibling,p=h.return;if(ou(h),h===l){Xs=null;break}if(null!==d){d.return=p,Xs=d;break}Xs=p}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Xs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(a=Xs).flags))switch(a.tag){case 0:case 11:case 15:nu(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Xs=y;break e}Xs=a.return}}var b=e.current;for(Xs=b;null!==Xs;){var w=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Xs=w;else e:for(s=b;null!==Xs;){if(0!==(2048&(u=Xs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(E){Sc(u,u.return,E)}if(u===s){Xs=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Xs=_;break e}Xs=u.return}}if(xu=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,ku.transition=t}}return!1}function Tc(e,t,n){e=Lo(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wu||!Wu.has(r))){t=Lo(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Pu&n)===n&&(4===Ru||3===Ru&&(130023424&Pu)===Pu&&500>Ye()-Vu?fc(e,0):ju|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ao(e,t))&&(gt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function xc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case T:return Lc(n.children,i,a,t);case S:s=8,i|=8;break;case I:return(e=Pc(12,n,t,2|i)).elementType=I,e.lanes=a,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=a,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=a,e;case O:return Mc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case k:s=9;break e;case x:s=11;break e;case P:s=14;break e;case D:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,o,a,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return ki;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,o,a,s,u){return(e=qc(n,r,!0,e,0,o,0,s,u)).context=Bc(null),n=e.current,(o=Ro(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,gt(e,i,r),rc(e,r),e}function Gc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ro(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,a))&&(nc(e,i,a,o),Mo(e,i,a)),a}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Tu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:As(t),po();break;case 5:aa(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ci(ua,1&ua.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ci(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Is(e,t,n)}return Gs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,io&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Io(t,n),i=Sa(null,t,r,e,i,n);var a=Ia();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(t),i.updater=Bo,t.stateNode=i,i._reactInternals=t,Wo(t,r,e,n),t=Ns(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=go(r,e),i){case 0:t=ks(null,t,r,e,n);break e;case 1:t=xs(null,t,r,e,n);break e;case 11:t=Es(null,t,r,e,n);break e;case 14:t=Ts(null,t,r,go(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:go(r,i),n);case 1:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:go(r,i),n);case 3:e:{if(As(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),jo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(o(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Gs(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Cs(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Yo(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:go(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ci(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ni.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ro(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),So(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),So(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Io(t,n),r=r(i=Co(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=go(r=t.type,t.pendingProps),Ts(e,t,r,i=go(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:go(r,i),zs(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Io(t,n),Go(t,r,i),Wo(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Is(e,t,n)}throw Error(o(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Kc(a);s.call(e)}}Gc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Kc(a);o.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),lc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Kc(u);s.call(e)}}var u=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Gc(t,u,n,r)})),u}(n,t,e,i,r);return Kc(a)}$c.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gc(e,t,null,null)},$c.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ye()),0===(6&xu)&&(Bu=Ye()+500,Bi()))}break;case 13:lc((function(){var t=Ao(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},Et=function(e){if(13===e.tag){var t=Ao(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},Tt=function(e){if(13===e.tag){var t=tc(e),n=Ao(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},St=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));H(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[bi,wi,_i,Ce,ke,cc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(o(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(o(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},688:function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var u=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:function(){return a}}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(791),a=p(o),s=p(n(164)),u=p(n(7)),c=p(n(334)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(858)),h=n(663),f=p(h),d=n(688);function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var g=t.portalClassName="ReactModalPortal",y=t.bodyOpenClassName="ReactModal__Body--open",b=h.canUseDOM&&void 0!==s.default.createPortal,w=function(e){return document.createElement(e)},_=function(){return b?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function E(e){return e()}var T=function(e){function t(){var e,n,i;v(this,t);for(var o=arguments.length,u=Array(o),l=0;l<o;l++)u[l]=arguments[l];return n=i=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.removePortal=function(){!b&&s.default.unmountComponentAtNode(i.node);var e=E(i.props.parentSelector);e&&e.contains(i.node)?e.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(e){i.portal=e},i.renderPortal=function(e){var n=_()(i,a.default.createElement(c.default,r({defaultStyles:t.defaultStyles},e)),i.node);i.portalRef(n)},m(i,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){h.canUseDOM&&(b||(this.node=w("div")),this.node.className=this.props.portalClassName,E(this.props.parentSelector).appendChild(this.node),!b&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:E(e.parentSelector),nextParent:E(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(h.canUseDOM){var r=this.props,i=r.isOpen,o=r.portalClassName;e.portalClassName!==o&&(this.node.className=o);var a=n.prevParent,s=n.nextParent;s!==a&&(a.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||i)&&!b&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(h.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return h.canUseDOM&&b?(!this.node&&b&&(this.node=w("div")),_()(a.default.createElement(c.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){l.setElement(e)}}]),t}(o.Component);T.propTypes={isOpen:u.default.bool.isRequired,style:u.default.shape({content:u.default.object,overlay:u.default.object}),portalClassName:u.default.string,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,className:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),overlayClassName:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),appElement:u.default.oneOfType([u.default.instanceOf(f.default),u.default.instanceOf(h.SafeHTMLCollection),u.default.instanceOf(h.SafeNodeList),u.default.arrayOf(u.default.instanceOf(f.default))]),onAfterOpen:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,ariaHideApp:u.default.bool,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,parentSelector:u.default.func,aria:u.default.object,data:u.default.object,role:u.default.string,contentLabel:u.default.string,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func},T.defaultProps={isOpen:!1,portalClassName:g,bodyOpenClassName:y,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return a.default.createElement("div",e,t)},contentElement:function(e,t){return a.default.createElement("div",e,t)}},T.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,d.polyfill)(T),t.default=T},334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(791),s=m(n(7)),u=v(n(844)),c=m(n(870)),l=v(n(858)),h=v(n(942)),f=n(663),d=m(f),p=m(n(484));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}n(670);var g={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,i=e.htmlOpenClassName,o=e.bodyOpenClassName;o&&h.remove(document.body,o),i&&h.remove(document.getElementsByTagName("html")[0],i),r&&y>0&&0===(y-=1)&&l.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(u.returnFocus(n.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),p.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(u.setupScopedFocus(n.node),u.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){9===e.keyCode&&(0,c.default)(n.content,e),n.props.shouldCloseOnEsc&&27===e.keyCode&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===("undefined"===typeof t?"undefined":i(t))?t:{base:g[e],afterOpen:g[e]+"--after-open",beforeClose:g[e]+"--before-close"},o=r.base;return n.state.afterOpen&&(o=o+" "+r.afterOpen),n.state.beforeClose&&(o=o+" "+r.beforeClose),"string"===typeof t&&t?o+" "+t:o},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,i=e.bodyOpenClassName;i&&h.add(document.body,i),r&&h.add(document.getElementsByTagName("html")[0],r),n&&(y+=1,l.hide(t)),p.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,i=e.overlayClassName,o=e.defaultStyles,a=e.children,s=n?{}:o.content,u=i?{}:o.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",i),style:r({},u,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},l=r({id:t,ref:this.setContentRef,style:r({},s,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),h=this.props.contentElement(l,a);return this.props.overlayElement(c,h)}}]),t}(a.Component);b.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},b.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(d.default),s.default.instanceOf(f.SafeHTMLCollection),s.default.instanceOf(f.SafeNodeList),s.default.arrayOf(s.default.instanceOf(d.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=b,e.exports=t.default},858:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):null!=s.length?s.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(s).forEach((function(e){return e.removeAttribute("aria-hidden")})));s=null},t.log=function(){0},t.assertNodeList=u,t.setElement=function(e){var t=e;if("string"===typeof t&&a.canUseDOM){var n=document.querySelectorAll(t);u(n,t),t=n}return s=t||s},t.validateElement=c,t.hide=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=c(e)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.setAttribute("aria-hidden","true")}}catch(a){n=!0,r=a}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},t.show=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=c(e)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.removeAttribute("aria-hidden")}}catch(a){n=!0,r=a}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},t.documentNotReadyOrSSRTesting=function(){s=null};var r,i=n(391),o=(r=i)&&r.__esModule?r:{default:r},a=n(663);var s=null;function u(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){var t=e||s;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,o.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[a,s],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}a=s=null,u=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(u.length);for(var e=[a,s],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var r,i=n(484),o=(r=i)&&r.__esModule?r:{default:r};var a=void 0,s=void 0,u=[];function c(){0!==u.length&&u[u.length-1].focusContent()}o.default.subscribe((function(e,t){a||s||((a=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),a.style.position="absolute",a.style.opacity="0",a.setAttribute("tabindex","0"),a.addEventListener("focus",c),(s=a.cloneNode()).addEventListener("focus",c)),(u=t).length>0?(document.body.firstChild!==a&&document.body.insertBefore(a,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(a.parentElement&&a.parentElement.removeChild(a),s.parentElement&&s.parentElement.removeChild(s))}))},942:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)i(e,n[t]);var o=document.body;for(var a in r)i(o,r[a]);n={},r={}},t.log=function(){0};var n={},r={};function i(e,t){e.classList.remove(t)}t.add=function(e,t){return i=e.classList,o="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(o,e),i.add(e)}));var i,o},t.remove=function(e,t){return i=e.classList,o="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(o,e),0===o[e]&&i.remove(e)}));var i,o}},844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){a=[]},t.log=function(){0},t.handleBlur=c,t.handleFocus=l,t.markForFocusLater=function(){a.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==a.length&&(t=a.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){a.length>0&&a.pop()},t.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",l,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",l))},t.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",l)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",l))};var r,i=n(750),o=(r=i)&&r.__esModule?r:{default:r};var a=[],s=null,u=!1;function c(){u=!0}function l(){if(u){if(u=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,o.default)(s)[0]||s).focus()}),0)}}},484:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){r=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},r=new n;t.default=r},663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var r,i=n(618);var o=((r=i)&&r.__esModule?r:{default:r}).default,a=o.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=o.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=o.canUseDOM?window.NodeList:{},t.canUseDOM=o.canUseDOM;t.default=a},870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,i=t.shiftKey,s=n[0],u=n[n.length-1],c=a();if(e===c){if(!i)return;r=u}u!==c||i||(r=s);s===c&&i&&(r=u);if(r)return t.preventDefault(),void r.focus();var l=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==l||"Chrome"==l[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var h=n.indexOf(c);h>-1&&(h+=i?-1:1);if("undefined"===typeof(r=n[h]))return t.preventDefault(),void(r=i?u:s).focus();t.preventDefault(),r.focus()};var r,i=n(750),o=(r=i)&&r.__esModule?r:{default:r};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?a(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},750:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]);return n.filter(o)};var n=/input|select|textarea|button|object|iframe/;function r(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var n=window.getComputedStyle(e);return t?"visible"!==n.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0:"none"==n.getPropertyValue("display")}catch(r){return console.warn("Failed to inspect element style"),!1}}function i(e,t){var i=e.nodeName.toLowerCase();return(n.test(i)&&!e.disabled||"a"===i&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),r(t))return!1;t=t.parentNode}return!0}(e)}function o(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&i(e,!n)}e.exports=t.default},948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(240),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default,e.exports=t.default},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=b.prototype=new y;w.constructor=b,v(w,g.prototype),w.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,T={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:T.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+x(u,0):o,_(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),N(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var l=o+x(s=e[c],c);u+=N(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=o+x(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:T};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=T.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)E.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>o(u,n))c<i&&0>o(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,O(E);else{var t=r(l);null!==t&&R(_,t.startTime-e)}}function E(e,n){v=!1,m&&(m=!1,y(C),C=-1),p=!0;var o=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var a=f.callback;if("function"===typeof a){f.callback=null,d=f.priorityLevel;var s=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&R(_,h.startTime-n),u=!1}return u}finally{f=null,d=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,S=!1,I=null,C=-1,k=5,x=-1;function N(){return!(t.unstable_now()-x<k)}function A(){if(null!==I){var e=t.unstable_now();x=e;var n=!0;try{n=I(!0,e)}finally{n?T():(S=!1,I=null)}}else S=!1}if("function"===typeof b)T=function(){b(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=A,T=function(){D.postMessage(null)}}else T=function(){g(A,0)};function O(e){I=e,S||(S=!0,T())}function R(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(m?(y(C),C=-1):m=!0,R(_,o-a))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},388:function(e,t,n){"use strict";n.d(t,{CR:function(){return c},Jh:function(){return s},XA:function(){return u},ZT:function(){return i},ev:function(){return l},mG:function(){return a},pi:function(){return o}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".072b343a.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="saga:";n.l=function(r,i,o,a){if(e[r])e[r].push(i);else{var s,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,o,a=r[0],s=r[1],u=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunksaga=self.webpackChunksaga||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){if(t){if("string"===typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i,o=n(791),a=n(250);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));var u=function(e){return e};var c="beforeunload",l="popstate";function h(e){e.preventDefault(),e.returnValue=""}function f(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function d(){return Math.random().toString(36).substr(2,8)}function p(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function v(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var m=(0,o.createContext)(null);var g=(0,o.createContext)(null);var y=(0,o.createContext)({outlet:null,matches:[]});function b(e,t){if(!e)throw new Error(t)}function w(e,t,n){void 0===n&&(n="/");var r=x(("string"===typeof t?v(t):t).pathname||"/",n);if(null==r)return null;var i=_(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=I(i[a],r);return o}function _(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||b(!1),o.relativePath=o.relativePath.slice(r.length));var a=N([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(!0===e.index&&b(!1),_(e.children,t,s,a)),(null!=e.path||e.index)&&t.push({path:a,score:S(a,e.index),routesMeta:s})})),t}var E=/^:\w+$/,T=function(e){return"*"===e};function S(e,t){var n=e.split("/"),r=n.length;return n.some(T)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!T(e)})).reduce((function(e,t){return e+(E.test(t)?3:""===t?1:10)}),r)}function I(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],u=a===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=C({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;o.push({params:r,pathname:N([i,l.pathname]),pathnameBase:A(N([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=N([i,l.pathnameBase]))}return o}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=r(n,2),o=i[0],a=i[1],s=t.match(o);if(!s)return null;var u=s[0],c=u.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function k(e,t,n){var r,i="string"===typeof e?v(e):e,o=""===e||""===i.pathname?"/":i.pathname;if(null==o)r=n;else{var a=t.length-1;if(o.startsWith("..")){for(var s=o.split("/");".."===s[0];)s.shift(),a-=1;i.pathname=s.join("/")}r=a>=0?t[a]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?v(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:P(o),hash:D(s)}}(i,r);return o&&"/"!==o&&o.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function x(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var N=function(e){return e.join("/").replace(/\/\/+/g,"/")},A=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},P=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},D=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function O(e){R()||b(!1);var t=(0,o.useContext)(m),n=t.basename,r=t.navigator,i=U(e),a=i.hash,s=i.pathname,u=i.search,c=s;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?v(e).pathname:e.pathname}(e),h=null!=l&&l.endsWith("/");c="/"===s?n+(h?"/":""):N([n,s])}return r.createHref({pathname:c,search:u,hash:a})}function R(){return null!=(0,o.useContext)(g)}function L(){return R()||b(!1),(0,o.useContext)(g).location}function M(){R()||b(!1);var e=(0,o.useContext)(m),t=e.basename,n=e.navigator,r=(0,o.useContext)(y).matches,i=L().pathname,a=JSON.stringify(r.map((function(e){return e.pathnameBase}))),s=(0,o.useRef)(!1);(0,o.useEffect)((function(){s.current=!0}));var u=(0,o.useCallback)((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var o=k(e,JSON.parse(a),i);"/"!==t&&(o.pathname=N([t,o.pathname])),(r.replace?n.replace:n.push)(o,r.state)}else n.go(e)}),[t,n,a,i]);return u}var F=(0,o.createContext)(null);function j(){var e=(0,o.useContext)(y).matches,t=e[e.length-1];return t?t.params:{}}function U(e){var t=(0,o.useContext)(y).matches,n=L().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,o.useMemo)((function(){return k(e,JSON.parse(r),n)}),[e,r,n])}function q(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,i){return(0,o.createElement)(y.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,i+1))}})}),null)}function V(e){return function(e){var t=(0,o.useContext)(y).outlet;return t?(0,o.createElement)(F.Provider,{value:e},t):t}(e.context)}function B(e){b(!1)}function z(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,s=e.location,u=e.navigationType,c=void 0===u?i.Pop:u,l=e.navigator,h=e.static,f=void 0!==h&&h;R()&&b(!1);var d=A(n),p=(0,o.useMemo)((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=v(s));var y=s,w=y.pathname,_=void 0===w?"/":w,E=y.search,T=void 0===E?"":E,S=y.hash,I=void 0===S?"":S,C=y.state,k=void 0===C?null:C,N=y.key,P=void 0===N?"default":N,D=(0,o.useMemo)((function(){var e=x(_,d);return null==e?null:{pathname:e,search:T,hash:I,state:k,key:P}}),[d,_,T,I,k,P]);return null==D?null:(0,o.createElement)(m.Provider,{value:p},(0,o.createElement)(g.Provider,{children:a,value:{location:D,navigationType:c}}))}function G(e){var t=e.children,n=e.location;return function(e,t){R()||b(!1);var n,r=(0,o.useContext)(y).matches,i=r[r.length-1],a=i?i.params:{},s=(i&&i.pathname,i?i.pathnameBase:"/"),u=(i&&i.route,L());if(t){var c,l="string"===typeof t?v(t):t;"/"===s||(null==(c=l.pathname)?void 0:c.startsWith(s))||b(!1),n=l}else n=u;var h=n.pathname||"/",f=w(e,{pathname:"/"===s?h:h.slice(s.length)||"/"});return q(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:N([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:N([s,e.pathnameBase])})})),r)}(K(t),n)}function K(e){var t=[];return o.Children.forEach(e,(function(e){if((0,o.isValidElement)(e))if(e.type!==o.Fragment){e.type!==B&&b(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=K(e.props.children)),t.push(n)}else t.push.apply(t,K(e.props.children))})),t}function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function J(e){var t=e.basename,n=e.children,a=e.window,m=(0,o.useRef)();null==m.current&&(m.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function o(){var e=n.location,t=e.pathname,i=e.search,o=e.hash,a=r.state||{};return[a.idx,u({pathname:t,search:i,hash:o,state:a.usr||null,key:a.key||"default"})]}var a=null;n.addEventListener(l,(function(){if(a)_.call(a),a=null;else{var e=i.Pop,t=o(),n=t[0],r=t[1];if(_.length){if(null!=n){var s=y-n;s&&(a={action:e,location:r,retry:function(){k(-1*s)}},k(s))}}else C(e)}}));var m=i.Pop,g=o(),y=g[0],b=g[1],w=f(),_=f();function E(e){return"string"===typeof e?e:p(e)}function T(e,t){return void 0===t&&(t=null),u(s({pathname:b.pathname,hash:"",search:""},"string"===typeof e?v(e):e,{state:t,key:d()}))}function S(e,t){return[{usr:e.state,key:e.key,idx:t},E(e)]}function I(e,t,n){return!_.length||(_.call({action:e,location:t,retry:n}),!1)}function C(e){m=e;var t=o();y=t[0],b=t[1],w.call({action:m,location:b})}function k(e){r.go(e)}null==y&&(y=0,r.replaceState(s({},r.state,{idx:y}),""));var x={get action(){return m},get location(){return b},createHref:E,push:function e(t,o){var a=i.Push,s=T(t,o);if(I(a,s,(function(){e(t,o)}))){var u=S(s,y+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(h){n.location.assign(l)}C(a)}},replace:function e(t,n){var o=i.Replace,a=T(t,n);if(I(o,a,(function(){e(t,n)}))){var s=S(a,y),u=s[0],c=s[1];r.replaceState(u,"",c),C(o)}},go:k,back:function(){k(-1)},forward:function(){k(1)},listen:function(e){return w.push(e)},block:function(e){var t=_.push(e);return 1===_.length&&n.addEventListener(c,h),function(){t(),_.length||n.removeEventListener(c,h)}}};return x}({window:a}));var g=m.current,y=r((0,o.useState)({action:g.action,location:g.location}),2),b=y[0],w=y[1];return(0,o.useLayoutEffect)((function(){return g.listen(w)}),[g]),(0,o.createElement)(z,{basename:t,children:n,location:b.location,navigationType:b.action,navigator:g})}var $=(0,o.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,i=e.replace,a=void 0!==i&&i,s=e.state,u=e.target,c=e.to,l=H(e,Q),h=O(c),f=function(e,t){var n=void 0===t?{}:t,r=n.target,i=n.replace,a=n.state,s=M(),u=L(),c=U(e);return(0,o.useCallback)((function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!i||p(u)===p(c);s(e,{replace:n,state:a})}}),[u,s,c,i,a,r,e])}(c,{replace:a,state:s,target:u});return(0,o.createElement)("a",W({},l,{href:h,onClick:function(e){n&&n(e),e.defaultPrevented||r||f(e)},ref:t,target:u}))}));var Y=(0,o.createContext)({themeData:[],theme:{},setTheme:function(){return null}});function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Z(){Z=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(S([])));m&&m!==t&&n.call(m,i)&&(p=m);var g=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==X(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ee(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ee(o,r,i,a,s,"next",e)}function s(e){ee(o,r,i,a,s,"throw",e)}a(void 0)}))}}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(n){return function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ie=n(892),oe=n.n(ie),ae=n(893),se=n.n(ae),ue=n(637);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}!function(e,n){if(n){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[e=e[e.length-1]]))!=o&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(Se){this.f(Se)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Qa(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(Se){n.reject(Se)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Qa(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qa=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),a=r.next();!a.done;a=r.next())i(a.value).Qa(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""}function h(){}function f(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function d(e){var t=f(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"function"==f(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function m(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++y)}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now;function S(e,t){function n(){}n.prototype=t.prototype,e.ab=t.prototype,e.prototype=new n,e.prototype.constructor=e}function I(e){return e}function C(e,t,n){this.code=N+e,this.message=t||A[e]||"",this.a=n||null}function k(e){var t=e&&e.code;return t?new C(t.substring(N.length),e.message,e.serverResponse):null}S(C,Error),C.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},C.prototype.toJSON=function(){return this.w()};var x,N="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(e){for(var t in P)if(P[t].id===e)return{firebaseEndpoint:(e=P[t]).Ta,secureTokenEndpoint:e.Za,identityPlatformEndpoint:e.Wa};return null}function O(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function R(e){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function L(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");R.call(this,n+e[r])}function M(e,t){throw new L("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function F(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function j(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function U(){this.b=this.a=null}x=D("__EID__")?"__EID__":void 0,S(R,Error),R.prototype.name="CustomError",S(L,R),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var q=new F((function(){return new B}),(function(e){e.reset()}));function V(){var e=Et,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function B(){this.next=this.b=this.a=null}U.prototype.add=function(e,t){var n=q.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var z=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},G=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var K=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},W=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},H=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Q(e,t){return 0<=z(e,t)}function J(e,t){var n;return(n=0<=(t=z(e,t)))&&Array.prototype.splice.call(e,t,1),n}function $(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function Y(e){return Array.prototype.concat.apply([],arguments)}function X(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var Z,ee=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},te=/&/g,ne=/</g,re=/>/g,ie=/"/g,oe=/'/g,ae=/\x00/g,se=/[\x00&<>"']/;function ce(e,t){return-1!=e.indexOf(t)}function le(e,t){return e<t?-1:e>t?1:0}e:{var he=s.navigator;if(he){var fe=he.userAgent;if(fe){Z=fe;break e}}Z=""}function pe(e){return ce(Z,e)}function ve(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function me(e){for(var t in e)return!1;return!0}function ge(e){var t,n={};for(t in e)n[t]=e[t];return n}var ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ye.length;o++)n=ye[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function we(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(v(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function _e(e,t){this.a=e===Ce&&t||"",this.b=Ie}function Ee(e){return e instanceof _e&&e.constructor===_e&&e.b===Ie?e.a:(M("expected object of type Const, got '"+e+"'"),"type_error:Const")}_e.prototype.sa=!0,_e.prototype.ra=function(){return this.a},_e.prototype.toString=function(){return"Const{"+this.a+"}"};var Te,Ie={},Ce={};function ke(){if(void 0===Te){var e=null,t=s.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){s.console&&s.console.error(n.message)}Te=e}else Te=e}return Te}function xe(e,t){this.a=t===Oe?e:""}function Ne(e){return e instanceof xe&&e.constructor===xe?e.a:(M("expected object of type TrustedResourceUrl, got '"+e+"' of type "+f(e)),"type_error:TrustedResourceUrl")}function Ae(e,t){var n=Ee(e);if(!De.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=ke();return new xe(e=t?t.createScriptURL(e):e,Oe)}(e=n.replace(Pe,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof _e?Ee(e):encodeURIComponent(String(e))})))}xe.prototype.sa=!0,xe.prototype.ra=function(){return this.a.toString()},xe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Pe=/%{(\w+)}/g,De=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Oe={};function Re(e,t){this.a=t===Ve?e:""}function Le(e){return e instanceof Re&&e.constructor===Re?e.a:(M("expected object of type SafeUrl, got '"+e+"' of type "+f(e)),"type_error:SafeUrl")}Re.prototype.sa=!0,Re.prototype.ra=function(){return this.a.toString()},Re.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Me=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Fe=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,je=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ue(e){if(e instanceof Re)return e;if(e="object"==typeof e&&e.sa?e.ra():String(e),je.test(e))e=new Re(e,Ve);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Fe);e=t&&Me.test(t[1])?new Re(e,Ve):null}return e}function qe(e){return e instanceof Re?e:(e="object"==typeof e&&e.sa?e.ra():String(e),je.test(e)||(e="about:invalid#zClosurez"),new Re(e,Ve))}var Ve={},Be=new Re("about:invalid#zClosurez",Ve);function ze(e,t,n){this.a=n===Ge?e:""}ze.prototype.sa=!0,ze.prototype.ra=function(){return this.a.toString()},ze.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ge={};function Ke(e,t,n,r){return e=e instanceof Re?e:qe(e),t=t||s,n=n instanceof _e?Ee(n):n||"",t.open(Le(e),n,r,void 0)}function We(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function He(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(te,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ne,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(re,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ie,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ae,"&#0;"))),e}function Qe(e){return Qe[" "](e),e}Qe[" "]=h;var Je,$e=pe("Opera"),Ye=pe("Trident")||pe("MSIE"),Xe=pe("Edge"),Ze=Xe||Ye,et=pe("Gecko")&&!(ce(Z.toLowerCase(),"webkit")&&!pe("Edge"))&&!(pe("Trident")||pe("MSIE"))&&!pe("Edge"),tt=ce(Z.toLowerCase(),"webkit")&&!pe("Edge");function nt(){var e=s.document;return e?e.documentMode:void 0}e:{var rt="",it=function(){var e=Z;return et?/rv:([^\);]+)(\)|;)/.exec(e):Xe?/Edge\/([\d\.]+)/.exec(e):Ye?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):tt?/WebKit\/(\S+)/.exec(e):$e?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(it&&(rt=it?it[1]:""),Ye){var ot=nt();if(null!=ot&&ot>parseFloat(rt)){Je=String(ot);break e}}Je=rt}var at,st={};function ut(e){return function(e,t){var n=st;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=ee(String(Je)).split("."),r=ee(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=le(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||le(0==a[2].length,0==s[2].length)||le(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(s.document&&Ye){var ct=nt();at=ct||(parseInt(Je,10)||void 0)}else at=void 0;var lt=at;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(pa){}var ht=!Ye||9<=Number(lt);function ft(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function dt(e,t){ve(t,(function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:mt.hasOwnProperty(n)?e.setAttribute(mt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var pt,vt,mt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function gt(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(p(o)){a="function"==typeof o.item;break e}}a=!1}G(a?X(o):o,r)}}}function yt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function bt(e){s.setTimeout((function(){throw e}),0)}function wt(e,t){vt||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);vt=function(){e.then(Tt)}}else vt=function(){var e=Tt;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!pe("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(pt||(pt=function(){var e=s.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!pe("Presto")&&(e=function(){var e=yt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=_((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!pe("Trident")&&!pe("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Gb;n.Gb=null,e()}},function(e){r.next={Gb:e},r=r.next,t.port2.postMessage(0)}}return function(e){s.setTimeout(e,0)}}()),pt(e)):s.setImmediate(e)}}(),_t||(vt(),_t=!0),Et.add(e,t)}var _t=!1,Et=new U;function Tt(){for(var e;e=V();){try{e.a.call(e.b)}catch(t){bt(t)}j(q,e)}_t=!1}function St(e,t){if(this.a=It,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){jt(n,Ct,e)}),(function(e){if(!(e instanceof Kt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(Bp){}jt(n,kt,e)}))}catch(r){jt(this,kt,r)}}var It=0,Ct=2,kt=3;function xt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}xt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Nt=new F((function(){return new xt}),(function(e){e.reset()}));function At(e,t,n){var r=Nt.get();return r.g=e,r.b=t,r.f=n,r}function Pt(e){if(e instanceof St)return e;var t=new St(h);return jt(t,Ct,e),t}function Dt(e){return new St((function(t,n){n(e)}))}function Ot(e,t,n){Ut(e,t,n,null)||wt(E(t,e))}function Rt(e){return new St((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Ot(e[o],E(i,o,!0),E(i,o,!1));else t(r)}))}function Lt(e,t){if(e.a==It)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==It&&1==r?Lt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Vt(n),Bt(n,i,kt,t)))}e.c=null}else jt(e,kt,t)}function Mt(e,t){e.b||e.a!=Ct&&e.a!=kt||qt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Ft(e,t,n,r){var i=At(null,null,null);return i.a=new St((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(Se){o(Se)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Kt?o(t):e(i)}catch(Se){o(Se)}}:o})),i.a.c=e,Mt(e,i),i.a}function jt(e,t,n){e.a==It&&(e===n&&(t=kt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ut(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,qt(e),t!=kt||n instanceof Kt||function(e,t){e.g=!0,wt((function(){e.g&&Gt.call(null,t)}))}(e,n)))}function Ut(e,t,n,r){if(e instanceof St)return Mt(e,At(t||h,n||null,r)),!0;if(O(e))return e.then(t,n,r),!0;if(v(e))try{var i=e.then;if(p(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function qt(e){e.h||(e.h=!0,wt(e.gc,e))}function Vt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Bt(e,t,n,r){if(n==kt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,zt(t,n,r);else try{t.c?t.g.call(t.f):zt(t,n,r)}catch(Bp){Gt.call(null,Bp)}j(Nt,t)}function zt(e,t,n){t==Ct?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}St.prototype.then=function(e,t,n){return Ft(this,p(e)?e:null,p(t)?t:null,n)},St.prototype.$goog_Thenable=!0,(e=St.prototype).oa=function(e,t){return(e=At(e,e,t)).c=!0,Mt(this,e),this},e.o=function(e,t){return Ft(this,null,e,t)},e.cancel=function(e){if(this.a==It){var t=new Kt(e);wt((function(){Lt(this,t)}),this)}},e.$c=function(e){this.a=It,jt(this,Ct,e)},e.ad=function(e){this.a=It,jt(this,kt,e)},e.gc=function(){for(var e;e=Vt(this);)Bt(this,e,this.a,this.i);this.h=!1};var Gt=bt;function Kt(e){R.call(this,e)}function Wt(){0!=Ht&&(Qt[m(this)]=this),this.xa=this.xa,this.pa=this.pa}S(Kt,R),Kt.prototype.name="cancel";var Ht=0,Qt={};function Jt(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=Ht)){var t=m(e);if(0!=Ht&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Qt[t]}}Wt.prototype.xa=!1,Wt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var $t=Object.freeze||function(e){return e},Yt=!Ye||9<=Number(lt),Xt=Ye&&!ut("9"),Zt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",h,t),s.removeEventListener("test",h,t)}catch(n){}return e}();function en(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function tn(e,t){if(en.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(et){e:{try{Qe(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:nn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}en.prototype.preventDefault=function(){this.defaultPrevented=!0},S(tn,en);var nn=$t({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.ab.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Xt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},tn.prototype.g=function(){return this.a};var rn="closure_listenable_"+(1e6*Math.random()|0),on=0;function an(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Va=i,this.key=++on,this.va=this.Pa=!1}function sn(e){e.va=!0,e.listener=null,e.proxy=null,e.src=null,e.Va=null}function un(e){this.src=e,this.a={},this.b=0}function cn(e,t){var n=t.type;n in e.a&&J(e.a[n],t)&&(sn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function ln(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.va&&o.listener==t&&o.capture==!!n&&o.Va==r)return i}return-1}un.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=ln(e,t,r,i);return-1<a?(t=e[a],n||(t.Pa=!1)):((t=new an(t,this.src,o,!!r,i)).Pa=n,e.push(t)),t};var hn="closure_lm_"+(1e6*Math.random()|0),fn={};function dn(e,t,n,r,i){if(r&&r.once)vn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)dn(e,t[o],n,r,i);else n=Sn(n),e&&e[rn]?Cn(e,t,n,v(r)?!!r.capture:!!r,i):pn(e,t,n,!1,r,i)}function pn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=En(e);if(s||(e[hn]=s=new un(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var e=_n,t=Yt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Zt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(yn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function vn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)vn(e,t[o],n,r,i);else n=Sn(n),e&&e[rn]?kn(e,t,n,v(r)?!!r.capture:!!r,i):pn(e,t,n,!0,r,i)}function mn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)mn(e,t[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=Sn(n),e&&e[rn]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=ln(o=e.a[t],n,r,i))&&(sn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=En(e))&&(t=e.a[t.toString()],e=-1,t&&(e=ln(t,n,r,i)),(n=-1<e?t[e]:null)&&gn(n))}function gn(e){if("number"!==typeof e&&e&&!e.va){var t=e.src;if(t&&t[rn])cn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(yn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=En(t))?(cn(n,e),0==n.b&&(n.src=null,t[hn]=null)):sn(e)}}}function yn(e){return e in fn?fn[e]:fn[e]="on"+e}function bn(e,t,n,r){var i=!0;if((e=En(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.va&&(o=wn(o,r),i=i&&!1!==o)}return i}function wn(e,t){var n=e.listener,r=e.Va||e.src;return e.Pa&&gn(e),n.call(r,t)}function _n(e,t){if(e.va)return!0;if(!Yt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new tn(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=bn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=bn(r[i],e,!1,t),n=n&&o}return n}return wn(e,new tn(t,this))}function En(e){return(e=e[hn])instanceof un?e:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sn(e){return p(e)?e:(e[Tn]||(e[Tn]=function(t){return e.handleEvent(t)}),e[Tn])}function In(){Wt.call(this),this.v=new un(this),this.ac=this,this.gb=null}function Cn(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function kn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function xn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&cn(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(e,t,n){if(p(e))n&&(e=_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function An(e){var t=null;return new St((function(n,r){-1==(t=Nn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw s.clearTimeout(t),e}))}function Pn(e){if(e.W&&"function"==typeof e.W)return e.W();if("string"===typeof e)return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Dn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.W||"function"!=typeof e.W){if(d(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function On(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof On)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Rn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ln(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Ln(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ln(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S(In,Wt),In.prototype[rn]=!0,In.prototype.addEventListener=function(e,t,n,r){dn(this,e,t,n,r)},In.prototype.removeEventListener=function(e,t,n,r){mn(this,e,t,n,r)},In.prototype.dispatchEvent=function(e){var t,n=this.gb;if(n)for(t=[];n;n=n.gb)t.push(n);n=this.ac;var r=e.type||e;if("string"===typeof e)e=new en(e,n);else if(e instanceof en)e.target=e.target||n;else{var i=e;be(e=new en(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=xn(a,r,!0,e)&&i}if(i=xn(a=e.b=n,r,!0,e)&&i,i=xn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=xn(a=e.b=t[o],r,!1,e)&&i;return i},In.prototype.Da=function(){if(In.ab.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)sn(n[r]);delete t.a[e],t.b--}}this.gb=null},(e=On.prototype).W=function(){Rn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return Rn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return Ln(this.b,e)?this.b[e]:t},e.set=function(e,t){Ln(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Fn?(this.i=void 0!==t?t:e.i,jn(this,e.c),this.l=e.l,this.a=e.a,Un(this,e.g),this.f=e.f,qn(this,or(e.b)),this.h=e.h):e&&(n=String(e).match(Mn))?(this.i=!!t,jn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Un(this,n[4]),this.f=Kn(n[5]||"",!0),qn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!t,this.b=new Zn(null,this.i))}function jn(e,t,n){e.c=n?Kn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Un(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function qn(e,t,n){t instanceof Zn?(e.b=t,function(e,t){t&&!e.f&&(er(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(nr(this,t),ir(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=Wn(t,Yn)),e.b=new Zn(t,e.i))}function Vn(e,t,n){e.b.set(t,n)}function Bn(e,t){return e.b.get(t)}function zn(e){return e instanceof Fn?new Fn(e):new Fn(e,void 0)}function Gn(e,t,n,r){var i=new Fn(null,void 0);return e&&jn(i,e),t&&(i.a=t),n&&Un(i,n),r&&(i.f=r),i}function Kn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Hn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Hn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Wn(t,Qn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(Wn(t,Qn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wn(n,"/"==n.charAt(0)?$n:Jn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Wn(n,Xn)),e.join("")},Fn.prototype.resolve=function(e){var t=new Fn(this),n=!!e.c;n?jn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Un(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ce(i,"./")||ce(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?qn(t,or(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Qn=/[#\/\?@]/g,Jn=/[#\?:]/g,$n=/[#\?]/g,Yn=/[#\?@]/g,Xn=/#/g;function Zn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function er(e){e.a||(e.a=new On,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function tr(e){var t=Dn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Zn(null,void 0);e=Pn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?ir(n,i,o):n.add(i,o)}return n}function nr(e,t){er(e),t=ar(e,t),Ln(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Ln((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Rn(e)))}function rr(e,t){return er(e),t=ar(e,t),Ln(e.a.b,t)}function ir(e,t,n){nr(e,t),0<n.length&&(e.c=null,e.a.set(ar(e,t),X(n)),e.b+=n.length)}function or(e){var t=new Zn;return t.c=e.c,e.a&&(t.a=new On(e.a),t.b=e.b),t}function ar(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function sr(e){var t=[];return cr(new ur,e,t),t.join("")}function ur(){}function cr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),cr(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),fr(r,n),n.push(":"),cr(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":fr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=Zn.prototype).add=function(e,t){er(this),this.c=null,e=ar(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){er(this),this.a.forEach((function(n,r){G(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){er(this);for(var e=this.a.W(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.W=function(e){er(this);var t=[];if("string"===typeof e)rr(this,e)&&(t=Y(t,this.a.get(ar(this,e))));else{e=this.a.W();for(var n=0;n<e.length;n++)t=Y(t,e[n])}return t},e.set=function(e,t){return er(this),this.c=null,rr(this,e=ar(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var lr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function fr(e,t){t.push('"',e.replace(hr,(function(e){var t=lr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),lr[e]=t),t})),'"')}function dr(){var e=Or();return Ye&&!!lt&&11==lt||/Edge\/\d+/.test(e)}function pr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function vr(e,t){t=t||s.window;var n="about:blank";e&&(n=Le(Ue(e)||Be)),t.location.href=n}function mr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<mr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function gr(e){return!!((e=(e||Or()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function yr(e){e=e||s.window;try{e.close()}catch(t){}}function br(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Or().toLowerCase(),r&&(t.target=r,ce(n,"crios/")&&(t.target="_blank")),Ar(Or())==xr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Re?n:Ue("undefined"!=typeof n.href?n.href:String(n))||Be,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((pe("iPhone")&&!pe("iPod")&&!pe("iPad")||pe("iPad")||pe("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(we(a=yt(document,"A"),"HTMLAnchorElement"),t=t instanceof Re?t:qe(t),a.href=Le(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=Ke("",r,n,a),e=Le(t),a&&(Ze&&ce(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+He(e)+'">',e=new ze(e=(r=ke())?r.createHTML(e):e,null,Ge),r=a.document)&&(r.write(function(e){return e instanceof ze&&e.constructor===ze?e.a:(M("expected object of type SafeHtml, got '"+e+"' of type "+f(e)),"type_error:SafeHtml")}(e)),r.close())):(a=Ke(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(de){}return a}var wr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function Er(){var e=null;return new St((function(t){"complete"==s.document.readyState?t():(e=function(){t()},vn(window,"load",e))})).o((function(t){throw mn(window,"load",e),t}))}function Tr(e){return e=e||Or(),!("file:"!==jr()&&"ionic:"!==jr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sr(){var e=s.window;try{return!(!e||e==e.top)}catch(t){return!1}}function Ir(){return"undefined"!==typeof s.WorkerGlobalScope&&"function"===typeof s.importScripts}function Cr(){return ue.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ue.Z.INTERNAL.hasOwnProperty("node")?"Node":Ir()?"Worker":"Browser"}function kr(){var e=Cr();return"ReactNative"===e||"Node"===e}var xr="Firefox",Nr="Chrome";function Ar(e){var t=e.toLowerCase();return ce(t,"opera/")||ce(t,"opr/")||ce(t,"opios/")?"Opera":ce(t,"iemobile")?"IEMobile":ce(t,"msie")||ce(t,"trident/")?"IE":ce(t,"edge/")?"Edge":ce(t,"firefox/")?xr:ce(t,"silk/")?"Silk":ce(t,"blackberry")?"Blackberry":ce(t,"webos")?"Webos":!ce(t,"safari/")||ce(t,"chrome/")||ce(t,"crios/")||ce(t,"android")?!ce(t,"chrome/")&&!ce(t,"crios/")||ce(t,"edge/")?ce(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Nr:"Safari"}var Pr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Dr(e,t){t=t||[];var n,r=[],i={};for(n in Pr)i[Pr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Cr())?r=Ar(i=Or()):"Worker"===r&&(r=Ar(i=Or())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Or(){return s.navigator&&s.navigator.userAgent||""}function Rr(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Lr(){try{var e=s.localStorage,t=zr();if(e)return e.setItem(t,"1"),e.removeItem(t),!dr()||!!s.indexedDB}catch(n){return Ir()&&!!s.indexedDB}return!1}function Mr(){return(Fr()||"chrome-extension:"===jr()||Tr())&&!kr()&&Lr()&&!Ir()}function Fr(){return"http:"===jr()||"https:"===jr()}function jr(){return s.location&&s.location.protocol||null}function Ur(e){return!gr(e=e||Or())&&Ar(e)!=xr}function qr(e){return"undefined"===typeof e?null:sr(e)}function Vr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Br(e){if(null!==e)return JSON.parse(e)}function zr(e){return e||Math.floor(1e9*Math.random()).toString()}function Gr(e){return"Safari"!=Ar(e=e||Or())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Wr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Or(),t=Cr(),this.b=gr(e)||"ReactNative"===t}function Hr(){var e=s.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Qr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Jr(){return!(!Rr("fireauth.oauthhelper",s)&&!Rr("fireauth.iframe",s))}Wr.prototype.get=function(){var e=s.navigator;return!e||"boolean"!==typeof e.onLine||!Fr()&&"chrome-extension:"!==jr()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var $r,Yr={};function Xr(e){Yr[e]||(Yr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Zr={};Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:2}),$r=2==Zr.abcd}catch(pa){$r=!1}function ei(e,t,n){$r?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function ti(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&ei(e,n,t[n])}function ni(e){var t={};return ti(t,e),t}function ri(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)ei(t,n,ri(e[n]));return t}function ii(e){var t=e&&(e[ci]?"phone":null);if(!(t&&e&&e[ui]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");ei(this,"uid",e[ui]),ei(this,"displayName",e[ai]||null);var n=null;e[si]&&(n=new Date(e[si]).toUTCString()),ei(this,"enrollmentTime",n),ei(this,"factorId",t)}function oi(e){try{var t=new li(e)}catch(n){t=null}return t}ii.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",si="enrolledAt",ui="mfaEnrollmentId",ci="phoneInfo";function li(e){ii.call(this,e),ei(this,"phoneNumber",e[ci])}function hi(e){var t={},n=e[vi],r=e[gi],i=e[yi];if(e=oi(e[mi]),!i||i!=di&&i!=pi&&!n||i==pi&&!r||i==fi&&!e)throw Error("Invalid checkActionCode response!");i==pi?(t[wi]=n||null,t[Ei]=n||null,t[bi]=r):(t[wi]=r||null,t[Ei]=r||null,t[bi]=n||null),t[_i]=e||null,ei(this,Si,i),ei(this,Ti,ri(t))}S(li,ii),li.prototype.w=function(){var e=li.ab.w.call(this);return e.phoneNumber=this.phoneNumber,e};var fi="REVERT_SECOND_FACTOR_ADDITION",di="EMAIL_SIGNIN",pi="VERIFY_AND_CHANGE_EMAIL",vi="email",mi="mfaInfo",gi="newEmail",yi="requestType",bi="email",wi="fromEmail",_i="multiFactorInfo",Ei="previousEmail",Ti="data",Si="operation";function Ii(e){var t=Bn(e=zn(e),Ci)||null,n=Bn(e,ki)||null,r=Bn(e,Ai)||null;if(r=r&&Di[r]||null,!t||!n||!r)throw new C("argument-error",Ci+", "+ki+"and "+Ai+" are required in a valid action code URL.");ti(this,{apiKey:t,operation:r,code:n,continueUrl:Bn(e,xi)||null,languageCode:Bn(e,Ni)||null,tenantId:Bn(e,Pi)||null})}var Ci="apiKey",ki="oobCode",xi="continueUrl",Ni="languageCode",Ai="mode",Pi="tenantId",Di={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:di,verifyAndChangeEmail:pi,verifyEmail:"VERIFY_EMAIL"};function Oi(e){try{return new Ii(e)}catch(t){return null}}function Ri(e){var t=e[Ui];if("undefined"===typeof t)throw new C("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new C("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Li];if(n&&"object"===typeof n){t=n[Bi];var r=n[qi];if(n=n[Vi],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new C("argument-error",qi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new C("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new C("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new C("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new C("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(t=e[ji])&&"object"===typeof t){if("string"===typeof(t=t[zi])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new C("argument-error",zi+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new C("argument-error",ji+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Fi])&&"boolean"!==typeof t)throw new C("argument-error",Fi+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Mi])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new C("argument-error",Mi+" property must be a non empty string when specified.");this.i=e||null}var Li="android",Mi="dynamicLinkDomain",Fi="handleCodeInApp",ji="iOS",Ui="url",qi="installApp",Vi="minimumVersion",Bi="packageName",zi="bundleId";function Gi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Ki=null;function Wi(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Ki){Ki={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Hi(e){var t=Ji(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Qi(e){try{return new Hi(e)}catch(t){return null}}function Ji(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=Wi(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(Se){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var $i="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Yi=["client_id","response_type","scope","redirect_uri","state"],Xi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Yi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Yi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Yi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:$i},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Zi(e){for(var t in Xi)if(Xi[t].fa==e)return Xi[t];return null}function eo(e){var t={};t["facebook.com"]=oo,t["google.com"]=so,t["github.com"]=ao,t["twitter.com"]=uo;var n=e&&e[no];try{if(n)return t[n]?new t[n](e):new io(e);if("undefined"!==typeof e[to])return new ro(e)}catch(r){}return null}var to="idToken",no="providerId";function ro(e){var t=e[no];if(!t&&e[to]){var n=Qi(e[to]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),ei(this,"providerId",t),ei(this,"isNewUser",n)}function io(e){ro.call(this,e),ei(this,"profile",ri((e=Br(e.rawUserInfo||"{}"))||{}))}function oo(e){if(io.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(e){if(io.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",this.profile&&this.profile.login||null)}function so(e){if(io.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(e){if(io.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",e.screenName||null)}function co(e){var t=zn(e),n=Bn(t,"link"),r=Bn(zn(n),"link");return t=Bn(t,"deep_link_id"),Bn(zn(t),"link")||t||r||n||e}function lo(e,t){if(!e&&!t)throw new C("internal-error","Internal assert: no raw session string available");if(e&&t)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ho:fo}S(io,ro),S(oo,io),S(ao,io),S(so,io),S(uo,io);var ho="enroll",fo="signin";function po(){}function vo(e,t){return e.then((function(e){if(e[is]){var n=Qi(e[is]);if(!n||t!=n.i)throw new C("user-mismatch");return e}throw new C("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==N+"user-not-found"?new C("user-mismatch"):e}))}function mo(e,t){if(!t)throw new C("internal-error","failed to construct a credential");this.a=t,ei(this,"providerId",e),ei(this,"signInMethod",e)}function go(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function yo(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new mo(e.providerId,e.pendingToken)}catch(t){}return null}function bo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&ei(this,"idToken",t.idToken),t.accessToken&&ei(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&ei(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");ei(this,"accessToken",t.oauthToken),ei(this,"secret",t.oauthTokenSecret)}ei(this,"providerId",e),ei(this,"signInMethod",n)}function wo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:tr(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function _o(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new bo(e.providerId,t,e.signInMethod)}catch(n){}}return null}function Eo(e,t){this.Qc=t||[],ti(this,{providerId:e,isOAuthProvider:!0}),this.Ib={},this.pb=(Zi(e)||{}).Ja||null,this.ob=null}function To(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');Eo.call(this,e,[])}function So(e){Eo.call(this,e,Yi),this.a=[]}function Io(){So.call(this,"facebook.com")}function Co(e){if(!e)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new Io).credential({accessToken:t})}function ko(){So.call(this,"github.com")}function xo(e){if(!e)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new ko).credential({accessToken:t})}function No(){So.call(this,"google.com"),this.Ca("profile")}function Ao(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new No).credential({idToken:n,accessToken:t})}function Po(){Eo.call(this,"twitter.com",$i)}function Do(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function Oo(e,t,n){this.a=e,this.f=t,ei(this,"providerId","password"),ei(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ro(e){return e&&e.email&&e.password?new Oo(e.email,e.password,e.signInMethod):null}function Lo(){ti(this,{providerId:"password",isOAuthProvider:!1})}function Mo(e,t){if(!(t=Fo(t)))throw new C("argument-error","Invalid email link!");return new Oo(e,t.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Fo(e){return(e=Oi(e=co(e)))&&e.operation===di?e:null}function jo(e){if(!(e.eb&&e.cb||e.La&&e.ea))throw new C("internal-error");this.a=e,ei(this,"providerId","phone"),this.fa="phone",ei(this,"signInMethod","phone")}function Uo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new jo(t)}return null}function qo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.eb,code:e.a.cb}}function Vo(e){try{this.a=e||ue.Z.auth()}catch(t){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ti(this,{providerId:"phone",isOAuthProvider:!1})}function Bo(e,t){if(!e)throw new C("missing-verification-id");if(!t)throw new C("missing-verification-code");return new jo({eb:e,cb:t})}function zo(e){if(e.temporaryProof&&e.phoneNumber)return new jo({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Ao(o,n);case"facebook.com":return Co(n);case"github.com":return xo(n);case"twitter.com":return Do(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new mo(t,a):new bo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new So(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(de){return null}}function Go(e){if(!e.isOAuthProvider)throw new C("invalid-oauth-provider")}function Ko(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Wo(e){return(e=e||{}).type?new Ko(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&k(e.error),e.postBody,e.tenantId):null}function Ho(){this.b=null,this.a=[]}lo.prototype.Ha=function(){return this.a?Pt(this.a):Pt(this.b)},lo.prototype.w=function(){return this.type==ho?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},mo.prototype.ka=function(e){return Cs(e,go(this))},mo.prototype.b=function(e,t){var n=go(this);return n.idToken=t,ks(e,n)},mo.prototype.c=function(e,t){return vo(xs(e,go(this)),t)},mo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(e){return Cs(e,wo(this))},bo.prototype.b=function(e,t){var n=wo(this);return n.idToken=t,ks(e,n)},bo.prototype.c=function(e,t){return vo(xs(e,wo(this)),t)},bo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Eo.prototype.Ka=function(e){return this.Ib=ge(e),this},S(To,Eo),S(So,Eo),So.prototype.Ca=function(e){return Q(this.a,e)||this.a.push(e),this},So.prototype.Qb=function(){return X(this.a)},So.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},S(Io,So),ei(Io,"PROVIDER_ID","facebook.com"),ei(Io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(ko,So),ei(ko,"PROVIDER_ID","github.com"),ei(ko,"GITHUB_SIGN_IN_METHOD","github.com"),S(No,So),ei(No,"PROVIDER_ID","google.com"),ei(No,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Po,Eo),ei(Po,"PROVIDER_ID","twitter.com"),ei(Po,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(e,Ms,{email:this.a,oobCode:this.f}):cu(e,iu,{email:this.a,password:this.f})},Oo.prototype.b=function(e,t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(e,Fs,{idToken:t,email:this.a,oobCode:this.f}):cu(e,$s,{idToken:t,email:this.a,password:this.f})},Oo.prototype.c=function(e,t){return vo(this.ka(e),t)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ti(Lo,{PROVIDER_ID:"password"}),ti(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ti(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),jo.prototype.ka=function(e){return e.fb(qo(this))},jo.prototype.b=function(e,t){var n=qo(this);return n.idToken=t,cu(e,au,n)},jo.prototype.c=function(e,t){var n=qo(this);return n.operation="REAUTH",vo(e=cu(e,su,n),t)},jo.prototype.w=function(){var e={providerId:"phone"};return this.a.eb&&(e.verificationId=this.a.eb),this.a.cb&&(e.verificationCode=this.a.cb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Vo.prototype.fb=function(e,t){var n=this.a.a;return Pt(t.verify()).then((function(r){if("string"!==typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===t.type){var i,o=v(e)?e.session:null,a=v(e)?e.phoneNumber:e;return i=o&&o.type==ho?o.Ha().then((function(e){return function(e,t){return cu(e,Xs,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==fo?o.Ha().then((function(t){return function(e,t){return cu(e,Zs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return cu(e,Qs,t)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}))}throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ti(Vo,{PROVIDER_ID:"phone"}),ti(Vo,{PHONE_SIGN_IN_METHOD:"phone"}),Ko.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Ko.prototype.T=function(){return this.h},Ko.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Qo,Jo=null;function $o(e){var t="unauthorized-domain",n=void 0,r=zn(e);e=r.a,"chrome-extension"==(r=r.c)?n=We("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=We("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",C.call(this,t,n)}function Yo(e,t,n){C.call(this,e,n),(e=t||{}).Jb&&ei(this,"email",e.Jb),e.ea&&ei(this,"phoneNumber",e.ea),e.credential&&ei(this,"credential",e.credential),e.Zb&&ei(this,"tenantId",e.Zb)}function Xo(e){if(e.code){var t=e.code||"";0==t.indexOf(N)&&(t=t.substring(N.length));var n={credential:zo(e),Zb:e.tenantId};if(e.email)n.Jb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new C(t,e.message||void 0);return new Yo(t,n,e.message)}return null}function Zo(){}function ea(e){return e.c||(e.c=e.b())}function ta(){}function na(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(Bp){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function oa(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function aa(e,t,n){this.reset(e,t,n,void 0,void 0)}S($o,C),S(Yo,C),Yo.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&be(e,t),e},Yo.prototype.toJSON=function(){return this.w()},Zo.prototype.c=null,S(ta,Zo),ta.prototype.a=function(){var e=na(this);return e?new ActiveXObject(e):new XMLHttpRequest},ta.prototype.b=function(){var e={};return na(this)&&(e[0]=!0,e[1]=!0),e},Qo=new ta,S(ra,Zo),ra.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(e=ia.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},e.Sb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},e.vc=function(){this.Sb()},e.rc=function(){this.status=200,oa(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(e){this.f=e,this.b=this.c=this.a=null}function ua(e,t){this.name=e,this.value=t}aa.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||T(),delete this.a},ua.prototype.toString=function(){return this.name};var ca=new ua("SEVERE",1e3),la=new ua("WARNING",900),ha=new ua("CONFIG",700),fa=new ua("FINE",500);function da(e){return e.c?e.c:e.a?da(e.a):(M("Root logger has no level set."),null)}sa.prototype.log=function(e,t,n){if(e.value>=da(this).value)for(p(t)&&(t=t()),e=new aa(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var pa,va={},ma=null;function ga(e){var t;if(ma||(ma=new sa(""),va[""]=ma,ma.c=ha),!(t=va[e])){t=new sa(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=ga(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,va[e]=t}return t}function ya(e,t){e&&e.log(fa,t,void 0)}function ba(e){this.f=e}function wa(e){In.call(this),this.u=e,this.h=void 0,this.readyState=_a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ga("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(ba,Zo),ba.prototype.a=function(){return new wa(this.f)},ba.prototype.b=(pa={},function(){return pa}),S(wa,In);var _a=0;function Ea(e){e.c.read().then(e.pc.bind(e)).catch(e.Ua.bind(e))}function Ta(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Sa(e)}function Sa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ia(e){In.call(this),this.headers=new On,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ca,this.u=this.S=!1}(e=wa.prototype).open=function(e,t){if(this.readyState!=_a)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Sa(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Ua.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ta(this)),this.readyState=_a},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Sa(this)),this.a&&(this.readyState=3,Sa(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,Ea(this)):e.text().then(this.tc.bind(this),this.Ua.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Ta(this):Sa(this),3==this.readyState&&Ea(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,Ta(this))},e.sc=function(e){this.a&&(this.response=e,Ta(this))},e.Ua=function(e){var t=this.i;t&&t.log(la,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&Ta(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(la,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(la,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),S(Ia,In);var Ca="";Ia.prototype.b=ga("goog.net.XhrIo");var ka=/^https?$/i,xa=["POST","PUT"];function Na(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Qo.a(),e.C=e.D?ea(e.D):ea(Qo),e.a.onreadystatechange=_(e.Vb,e);try{ya(e.b,ja(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(a){return ya(e.b,ja(e,"Error opening Xhr: "+a.message)),void Pa(e,a)}t=r||"";var o=new On(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||"string"===typeof e)G(e,t,void 0);else for(var n=Dn(e),r=Pn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=Aa,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(o.Y()),r=s.FormData&&t instanceof s.FormData,!Q(xa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{La(e),0<e.g&&(e.u=function(e){return Ye&&ut(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),ya(e.b,ja(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=_(e.Ma,e)):e.s=Nn(e.Ma,e.g,e)),ya(e.b,ja(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){ya(e.b,ja(e,"Send error: "+a.message)),Pa(e,a)}}function Aa(e){return"content-type"==e.toLowerCase()}function Pa(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Da(e),Ra(e)}function Da(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Oa(e){if(e.c&&"undefined"!=typeof a)if(e.C[1]&&4==Ma(e)&&2==Fa(e))ya(e.b,ja(e,"Local request error detected and ignored"));else if(e.i&&4==Ma(e))Nn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==Ma(e)){ya(e.b,ja(e,"Request complete")),e.c=!1;try{var t,n=Fa(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Mn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ka.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Ma(e)?e.a.statusText:""}catch(l){ya(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+Fa(e)+"]",Da(e)}}finally{Ra(e)}}}function Ra(e,t){if(e.a){La(e);var n=e.a,r=e.C[0]?h:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(Bp){(e=e.b)&&e.log(ca,"Problem encountered resetting onreadystatechange: "+Bp.message,void 0)}}}function La(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(s.clearTimeout(e.s),e.s=null)}function Ma(e){return e.a?e.a.readyState:0}function Fa(e){try{return 2<Ma(e)?e.a.status:-1}catch(t){return-1}}function ja(e,t){return t+" ["+e.R+" "+e.l+" "+Fa(e)+"]"}function Ua(e){var t=$a;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function qa(e,t,n){e.a=!0,e.c=n,e.f=!t,Ga(e)}function Va(e){if(e.a){if(!e.v)throw new Ka(e);e.v=!1}}function Ba(e,t,n,r){e.g.push([t,n,r]),e.a&&Ga(e)}function za(e){return H(e.g,(function(e){return p(e[1])}))}function Ga(e){if(e.h&&e.a&&za(e)){var t=e.h,n=Qa[t];n&&(s.clearTimeout(n.a),delete Qa[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(O(t)||"function"===typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,za(e)||(n=!0)}}e.c=t,r&&(u=_(e.m,e,!0),r=_(e.m,e,!1),t instanceof Ua?(Ba(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new Ha(t),Qa[t.a]=t,e.h=t.a)}function Ka(){R.call(this)}function Wa(){R.call(this)}function Ha(e){this.a=s.setTimeout(_(this.c,this),0),this.b=e}(e=Ia.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ya(this.b,ja(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ya(this.b,ja(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ra(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ra(this,!0)),Ia.ab.Da.call(this)},e.Vb=function(){this.xa||(this.O||this.i||this.f?Oa(this):this.Jc())},e.Jc=function(){Oa(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ca:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(ca,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ya(this.b,"Can not get response: "+t.message),null}},Ua.prototype.cancel=function(e){if(this.a)this.c instanceof Ua&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Wa(this),Va(this),qa(this,!1,e))}},Ua.prototype.m=function(e,t){this.i=!1,qa(this,e,t)},Ua.prototype.then=function(e,t,n){var r,i,o=new St((function(e,t){r=e,i=t}));return Ba(this,r,(function(e){e instanceof Wa?o.cancel():i(e)})),o.then(e,t,n)},Ua.prototype.$goog_Thenable=!0,S(Ka,R),Ka.prototype.message="Deferred has already fired",Ka.prototype.name="AlreadyCalledError",S(Wa,R),Wa.prototype.message="Deferred was canceled",Wa.prototype.name="CanceledError",Ha.prototype.c=function(){throw delete Qa[this.a],this.b};var Qa={};function Ja(e){var t={},n=t.document||document,r=Ne(e).toString(),i=yt(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Ua(o),u=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Ya(i,!0);var e=new es(Za,"Timeout reached for loading script "+r);Va(a),qa(a,!1,e)}),h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ya(i,t.xd||!1,u),Va(a),qa(a,!0,null))},i.onerror=function(){Ya(i,!0,u);var e=new es(Xa,"Error while loading script "+r);Va(a),qa(a,!1,e)},be(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),dt(i,o),function(e,t){we(e,"HTMLScriptElement"),e.src=Ne(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=s?t=l(t.document):(null===c&&(c=l(s.document)),t=c),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function $a(){if(this&&this.Wb){var e=this.Wb;e&&"SCRIPT"==e.tagName&&Ya(e,!0,this.Ma)}}function Ya(e,t,n){null!=n&&s.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Xa=0,Za=1;function es(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),R.call(this,n),this.code=e}function ts(e){this.f=e}function ns(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||os,this.g=ge(e.secureTokenHeaders||as),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||ss,this.a=ge(e.firebaseHeaders||us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Cr(),!(n=s.XMLHttpRequest||n&&ue.Z.INTERNAL.node&&ue.Z.INTERNAL.node.XMLHttpRequest)&&!Ir())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ir()?this.f=new ba(self):kr()?this.f=new ts(n):this.f=new ra,this.b=null}S(es,R),S(ts,Zo),ts.prototype.a=function(){return new this.f},ts.prototype.b=function(){return{}};var rs,is="idToken",os=new Wr(3e4,6e4),as={"Content-Type":"application/x-www-form-urlencoded"},ss=new Wr(3e4,6e4),us={"Content-Type":"application/json"};function cs(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ls(e,t){t&&(e.l=hs("https://securetoken.googleapis.com/v1/token",t),e.h=hs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=hs("https://identitytoolkit.googleapis.com/v2/",t))}function hs(e,t){return e=zn(e),t=zn(t.url),e.f=e.a+e.f,jn(e,t.c),e.a=t.a,Un(e,t.g),e.toString()}function fs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function ds(e,t,n,r,i,o,a){(function(){var e=Or();return!((e=Ar(e)!=Nr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Ye||!lt||9<lt)})()||Ir()?e=_(e.u,e):(rs||(rs=new St((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{s[vs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Ba(e,null,t,void 0)}(Ja(Ae(ps,{onload:vs})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=_(e.s,e)),e(t,n,r,i,o,a)}ns.prototype.T=function(){return this.b},ns.prototype.u=function(e,t,n,r,i,o){if(Ir()&&("undefined"===typeof s.fetch||"undefined"===typeof s.Headers||"undefined"===typeof s.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Ia(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Cn(a,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ya(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(Se){e=null}t&&t(e)})),kn(a,"ready",(function(){u&&clearTimeout(u),Jt(this)})),kn(a,"timeout",(function(){u&&clearTimeout(u),Jt(this),t&&t(null)})),Na(a,e,n,r,i)};var ps=new _e(Ce,"https://apis.google.com/js/client.js?onload=%{onload}"),vs="__fcb"+Math.floor(1e6*Math.random()).toString();function ms(e,t,n,r,i,o,a){var s=zn(t+n);Vn(s,"key",e.c),a&&Vn(s,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new St((function(t,n){ds(e,s.toString(),(function(e){e?e.error?n(hu(e,o||{})):t(e):n(new C("network-request-failed"))}),r,u?void 0:sr(Vr(i)),e.a,e.v.get())}))}function gs(e){if("string"!==typeof(e=e.email)||!_r.test(e))throw new C("invalid-email")}function ys(e){"email"in e&&gs(e)}function bs(e){if(!e[is]){if(e.mfaPendingCredential)throw new C("multi-factor-auth-required",null,ge(e));throw new C("internal-error")}}function ws(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new C("internal-error")}else{if(!e.sessionInfo)throw new C("missing-verification-id");if(!e.code)throw new C("missing-verification-code")}}ns.prototype.s=function(e,t,n,r,i){var o=this;rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},ns.prototype.zb=function(){return cu(this,Ys,{})},ns.prototype.Bb=function(e,t){return cu(this,Js,{idToken:e,email:t})},ns.prototype.Cb=function(e,t){return cu(this,$s,{idToken:e,password:t})};var _s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Es(e){if(!e.phoneVerificationInfo)throw new C("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new C("missing-verification-code")}function Ts(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new C("internal-error")}function Ss(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(rr(e=new Zn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function Is(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Xo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Xo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Xo(e)):e.errorMessage&&(t=lu(e.errorMessage)),t)throw t;bs(e)}function Cs(e,t){return t.returnIdpCredential=!0,cu(e,eu,t)}function ks(e,t){return t.returnIdpCredential=!0,cu(e,nu,t)}function xs(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,cu(e,tu,t)}function Ns(e){if(!e.oobCode)throw new C("invalid-action-code")}(e=ns.prototype).Db=function(e,t){var n={idToken:e},r=[];return ve(_s,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),cu(this,Js,n)},e.vb=function(e,t){return be(e={requestType:"PASSWORD_RESET",email:e},t),cu(this,Gs,e)},e.wb=function(e,t){return be(e={requestType:"EMAIL_SIGNIN",email:e},t),cu(this,Vs,e)},e.ub=function(e,t){return be(e={requestType:"VERIFY_EMAIL",idToken:e},t),cu(this,Bs,e)},e.Eb=function(e,t,n){return be(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),cu(this,zs,e)},e.fb=function(e){return cu(this,ou,e)},e.nb=function(e,t){return cu(this,Hs,{oobCode:e,newPassword:t})},e.Ra=function(e){return cu(this,Ps,{oobCode:e})},e.jb=function(e){return cu(this,As,{oobCode:e})};var As={endpoint:"setAccountInfo",A:Ns,Z:"email",B:!0},Ps={endpoint:"resetPassword",A:Ns,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new C("internal-error")},B:!0},Ds={endpoint:"signupNewUser",A:function(e){if(gs(e),!e.password)throw new C("weak-password")},G:bs,V:!0,B:!0},Os={endpoint:"createAuthUri",B:!0},Rs={endpoint:"deleteAccount",N:["idToken"]},Ls={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new C("internal-error")}},Ms={endpoint:"emailLinkSignin",N:["email","oobCode"],A:gs,G:bs,V:!0,B:!0},Fs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:gs,G:bs,V:!0},js={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:Es,G:bs,B:!0,Na:!0},Us={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:Es,G:bs,B:!0,Na:!0},qs={endpoint:"getAccountInfo"},Vs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new C("internal-error");gs(e)},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new C("internal-error")},Z:"email",B:!0},zs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new C("internal-error")},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new C("internal-error");gs(e)},Z:"email",B:!0},Ks={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ws={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new C("internal-error")}},Hs={endpoint:"resetPassword",A:Ns,Z:"email",B:!0},Qs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Js={endpoint:"setAccountInfo",N:["idToken"],A:ys,V:!0},$s={endpoint:"setAccountInfo",N:["idToken"],A:function(e){if(ys(e),!e.password)throw new C("weak-password")},G:bs,V:!0},Ys={endpoint:"signupNewUser",G:bs,V:!0,B:!0},Xs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new C("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Zs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},eu={endpoint:"verifyAssertion",A:Ts,Ya:Ss,G:Is,V:!0,B:!0},tu={endpoint:"verifyAssertion",A:Ts,Ya:Ss,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new C("user-not-found");if(e.errorMessage)throw lu(e.errorMessage);bs(e)},V:!0,B:!0},nu={endpoint:"verifyAssertion",A:function(e){if(Ts(e),!e.idToken)throw new C("internal-error")},Ya:Ss,G:Is,V:!0},ru={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new C("invalid-custom-token")},G:bs,V:!0,B:!0},iu={endpoint:"verifyPassword",A:function(e){if(gs(e),!e.password)throw new C("wrong-password")},G:bs,V:!0,B:!0},ou={endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},au={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new C("internal-error");ws(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Xo(e);bs(e)}},su={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},uu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[is]^!!e.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function cu(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.N))return Dt(new C("internal-error"));var r,i=!!t.Na,o=t.Ub||"POST";return Pt(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),ms(e,i?e.i:e.h,t.endpoint,o,n,t.Hb,t.lb||!1)})).then((function(e){return r=e,t.Ya?t.Ya(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new C("internal-error");return r[t.Z]}))}function lu(e){return hu({error:{errors:[{message:e}],code:400,message:e}})}function hu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",be(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],t);return!t&&e&&(t=qr(e)),new C("internal-error",t)}function fu(e){this.b=e,this.a=null,this.rb=function(e){return(mu||(mu=new St((function(e,t){function n(){Kr(),Rr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Kr(),t(Error("Network Error"))},timeout:pu.get()})}if(Rr("gapi.iframes.Iframe"))e();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Rr("gapi.load")?n():t(Error("Network Error"))},Pt(Ja(r=Ae(du,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw mu=null,e})))).then((function(){return new St((function(t,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),vu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var du=new _e(Ce,"https://apis.google.com/js/api.js?onload=%{onload}"),pu=new Wr(3e4,6e4),vu=new Wr(5e3,15e3),mu=null;function gu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=Gn((e=zn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Gn("https",this.l,null,"/__/auth/iframe"),this.a=e,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function yu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function bu(e){try{return ue.Z.app(e).auth().Ga()}catch(t){return[]}}function wu(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function _u(e){var t=pr();return function(e){return cu(e,Ks,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=zn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=zn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:wr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new $o(pr())}))}function Eu(e){return e.m||(e.m=Er().then((function(){if(!e.u){var t=e.c,n=e.i,r=bu(e.b),i=new gu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=X(r||[]),e.u=i.toString()}e.v=new fu(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.rb.then((function(){e.a.register("authEvent",t,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Wo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Pt(n)}return n.status="ERROR",Pt(n)}))}(e)}))),e.m}function Tu(e){return e.l||(e.C=e.c?Dr(e.c,bu(e.b)):null,e.l=new ns(e.g,D(e.i),e.C),e.f&&ls(e.l,e.f)),e.l}function Su(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new yu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=ge(u||null),e.f=c,e.yb(l).toString()}function Iu(e){if(this.a=e||ue.Z.INTERNAL.reactNative&&ue.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Cu(e){this.b=e,this.a={},this.f=_(this.c,this)}gu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):nr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):nr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):nr(this.a.b,"fw"),this.a.toString()},yu.prototype.yb=function(e){return this.h=e,this},yu.prototype.toString=function(){if(this.v){var e=zn(this.v.url);e=Gn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Gn("https",this.u,null,"/__/auth/handler");if(Vn(e,"apiKey",this.s),Vn(e,"appName",this.c),Vn(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=ue.Z.app(this.c).auth().la()}catch(de){n=null}for(var r in t.ob=n,Vn(e,"providerId",this.a.providerId),t=Vr((n=this.a).Ib))t[r]=t[r].toString();r=n.Qc,t=ge(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.pb&&n.ob&&!t[n.pb]&&(t[n.pb]=n.ob),me(t)||Vn(e,"customParameters",qr(t))}if("function"===typeof this.a.Qb&&((n=this.a.Qb()).length&&Vn(e,"scopes",n.join(","))),this.l?Vn(e,"redirectUrl",this.l):nr(e.b,"redirectUrl"),this.g?Vn(e,"eventId",this.g):nr(e.b,"eventId"),this.i?Vn(e,"v",this.i):nr(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Bn(e,a)&&Vn(e,a,this.b[a]);return this.h?Vn(e,"tid",this.h):nr(e.b,"tid"),this.f?Vn(e,"eid",this.f):nr(e.b,"eid"),(a=bu(this.c)).length&&Vn(e,"fw",a.join(",")),e.toString()},(e=wu.prototype).Ob=function(e,t,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return Eu(e).then((function(){return function(e,t){return e.rb.then((function(){return new St((function(n){e.a.send(t.type,t,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&yr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new St((function(t){return function n(){An(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return An(n).then((function(){t(r)}))}))},e.Xb=function(){var e=Or();return!Ur(e)&&!Gr(e)},e.Tb=function(){return!1},e.Mb=function(e,t,n,r,i,o,a,s){if(!e)return Dt(new C("popup-blocked"));if(a&&!Ur())return this.ma().o((function(t){yr(e),i(t)})),r(),Pt();this.a||(this.a=_u(Tu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw yr(e),i(t),t}));return r(),t})).then((function(){(Go(n),a)||vr(Su(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Nb=function(e,t,n,r){this.a||(this.a=_u(Tu(this)));var i=this;return this.a.then((function(){Go(t),vr(Su(i.s,i.g,i.b,e,t,pr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return Eu(this).then((function(){return e.v.rb})).o((function(){throw e.a=null,new C("network-request-failed")}))},e.$b=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Sa=function(e){$(this.h,(function(t){return t==e}))},(e=Iu.prototype).get=function(e){return Pt(this.a.getItem(e)).then((function(e){return e&&Br(e)}))},e.set=function(e,t){return Pt(this.a.setItem(e,qr(t)))},e.U=function(e){return Pt(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var ku,xu=[];function Nu(e,t,n){me(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Au(e){this.a=e}function Pu(e){this.c=e,this.b=!1,this.a=[]}function Du(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Dt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new St((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Ou(e,c),t})).o((function(t){throw Ou(e,c),t}))}function Ou(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(e.a,(function(e){return e==t}))}}function Ru(){if(!ju())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Ir()&&self?(this.v=function(){var e=Ir()?self:null;if(G(xu,(function(n){n.b==e&&(t=n)})),!t){var t=new Cu(e);xu.push(t)}return t}(),Nu(this.v,"keyChanged",(function(t,n){return zu(e).then((function(t){return 0<t.length&&G(e.a,(function(e){e(t)})),{keyProcessed:Q(t,n.key)}}))})),Nu(this.v,"ping",(function(){return Pt(["keyChanged"])}))):function(){var e=s.navigator;return e&&e.serviceWorker?Pt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Pt(null)}().then((function(t){(e.h=t)&&(e.g=new Pu(new Au(t)),Du(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Q(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Lu(e){return new St((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new St((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Lu(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Mu(e){return e.i||(e.i=Lu(e)),e.i}function Fu(e,t){var n=0;return new St((function r(i,o){Mu(e).then(t).then(i).o((function(t){if(!(3<++n))return Mu(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function ju(){try{return!!s.indexedDB}catch(pa){return!1}}function Uu(e){return e.objectStore("firebaseLocalStorage")}function qu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Vu(e){return new St((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Bu(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Du(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Pt()}function zu(e){return Mu(e).then((function(e){var t=Uu(qu(e,!1));return t.getAll?Vu(t.getAll()):new St((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=mr(e.c,n),e.c=n}return r}))}function Gu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Ku(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Pt().then((function(){if(ju()){var e=zr(),r="__sak"+e;return ku||(ku=new Ru),(n=ku).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){G(t.a,(function(t){t(e)}))})),e}))}function Wu(){this.a={},this.type="inMemory"}function Hu(){if(!function(){var e="Node"==Cr();if(!(e=Qu()||e&&ue.Z.INTERNAL.node&&ue.Z.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Cr())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Qu()||ue.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Qu(){try{var e=s.localStorage,t=zr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Ju(){this.type="nullStorage"}function $u(){if(!function(){var e="Node"==Cr();if(!(e=Yu()||e&&ue.Z.INTERNAL.node&&ue.Z.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Cr())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Yu()||ue.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Yu(){try{var e=s.sessionStorage,t=zr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Xu(){var e={};e.Browser=tc,e.Node=nc,e.ReactNative=rc,e.Worker=ic,this.a=e[Cr()]}Cu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];G(r,(function(t){i.push(Pt().then((function(){return t(e.origin,e.data.data)})))})),Rt(i).then((function(r){var i=[];G(r,(function(e){i.push({fulfilled:e.Pb,value:e.value,reason:e.reason?e.reason.message:void 0})})),G(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Au.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Pu.prototype.close=function(){for(;0<this.a.length;)Ou(this,this.a[0]);this.b=!0},(e=Ru.prototype).set=function(e,t){var n=this,r=!1;return Fu(this,(function(t){return Vu((t=Uu(qu(t,!0))).get(e))})).then((function(i){return Fu(n,(function(o){if(o=Uu(qu(o,!0)),i)return i.value=t,Vu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Vu(o.add(a))}))})).then((function(){return n.c[e]=t,Bu(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return Fu(this,(function(t){return Vu(Uu(qu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return Fu(this,(function(r){return n=!0,t.b++,Vu(Uu(qu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Bu(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=zu(e).then((function(t){0<t.length&&G(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Gu(e),t()}(this),this.a.push(e)},e.ia=function(e){$(this.a,(function(t){return t==e})),0==this.a.length&&Gu(this)},(e=Ku.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){$(this.a,(function(t){return t==e}))},(e=Wu.prototype).get=function(e){return Pt(this.a[e])},e.set=function(e,t){return this.a[e]=t,Pt()},e.U=function(e){return delete this.a[e],Pt()},e.ca=function(){},e.ia=function(){},(e=Hu.prototype).get=function(e){var t=this;return Pt().then((function(){return Br(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Pt().then((function(){var r=qr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Pt().then((function(){t.a.removeItem(e)}))},e.ca=function(e){s.window&&dn(s.window,"storage",e)},e.ia=function(e){s.window&&mn(s.window,"storage",e)},(e=Ju.prototype).get=function(){return Pt(null)},e.set=function(){return Pt()},e.U=function(){return Pt()},e.ca=function(){},e.ia=function(){},(e=$u.prototype).get=function(e){var t=this;return Pt().then((function(){return Br(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Pt().then((function(){var r=qr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Pt().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var Zu,ec,tc={F:Hu,bb:$u},nc={F:Hu,bb:$u},rc={F:Iu,bb:Ju},ic={F:Hu,bb:Ju},oc={rd:"local",NONE:"none",td:"session"};function ac(){var e=!(Gr(Or())||!Sr()),t=Ur(),n=Lr();this.m=e,this.h=t,this.l=n,this.a={},Zu||(Zu=new Xu),e=Zu;try{this.g=!dr()&&Jr()||!s.indexedDB?new e.a.F:new Ku(Ir()?new Wu:new e.a.F)}catch(r){this.g=new Wu,this.h=!0}try{this.i=new e.a.bb}catch(r){this.i=new Wu}this.v=new Wu,this.f=_(this.Yb,this),this.b={}}function sc(){return ec||(ec=new ac),ec}function uc(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function cc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function lc(e,t,n){return n=cc(t,n),"local"==t.F&&(e.b[n]=null),uc(e,t.F).U(n)}function hc(e){e.c&&(clearInterval(e.c),e.c=null)}function fc(e){this.a=e,this.b=sc()}(e=ac.prototype).get=function(e,t){return uc(this,e.F).get(cc(e,t))},e.set=function(e,t,n){var r=cc(e,n),i=this,o=uc(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=cc(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),me(this.a)&&(uc(this,"local").ca(this.f),this.h||(dr()||!Jr())&&s.indexedDB||!this.l||function(e){hc(e),e.c=setInterval((function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new tn({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Yb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=cc(e,t),this.a[e]&&($(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),me(this.a)&&(uc(this,"local").ia(this.f),hc(this))},e.Yb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?uc(this,"local").ia(this.f):hc(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.mb(t))},Ye&&lt&&10==lt&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else G(e,_(this.mb,this))},e.mb=function(e){this.a[e]&&G(this.a[e],(function(e){e()}))};var dc,pc={name:"authEvent",F:"local"};function vc(){this.a=sc()}function mc(e,t){this.b=gc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===dc&&(dc=s.Int32Array?new Int32Array(Sc):Sc),this.reset()}S(mc,(function(){this.b=-1}));for(var gc=64,yc=gc-1,bc=[],wc=0;wc<yc;wc++)bc[wc]=0;var _c=Y(128,bc);function Ec(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|dc[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Tc(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Ec(e),i=0);else{if(!d(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Ec(e),i=0)}}e.c=i,e.g+=n}mc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var Sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ic(){mc.call(this,8,Cc)}S(Ic,mc);var Cc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function kc(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new vc,this.g=new fc(this.h),this.f=null,this.b=[],this.a=this.c=null}function xc(e){return new C("invalid-cordova-configuration",e)}function Nc(e){var t=new Ic;Tc(t,e),e=[];var n=8*t.g;56>t.c?Tc(t,_c,56-t.c):Tc(t,_c,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Ec(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return W(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Ac(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Pc(e){return e.f||(e.f=e.ma().then((function(){return new St((function(t){e.Ea((function n(r){return t(r),e.Sa(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Dc(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=co(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Br(Bn(o=zn(i),"firebaseError")||null))?k(o):null)?new Ko(r.c,r.b,null,null,o,null,r.T()):new Ko(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ac(e,i)}))}var n=new Ko("unknown",null,null,null,new C("no-auth-event")),r=!1,i=An(500).then((function(){return Dc(e).then((function(){r||Ac(e,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Rr("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(de){console.error(de)}},Jo||(Jo=new Ho),function(e){var t=Jo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=Rr("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Dc(e){var t=null;return function(e){return e.b.get(pc,e.a).then((function(e){return Wo(e)}))}(e.g).then((function(n){return t=n,lc((n=e.g).b,pc,n.a)})).then((function(){return t}))}function Oc(e){this.a=e,this.b=sc()}(e=kc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Tr(void 0)?Er().then((function(){return new St((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Dt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Rr("universalLinks.subscribe",s))throw xc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Rr("BuildInfo.packageName",s))throw xc("cordova-plugin-buildinfo is not installed");if("function"!==typeof Rr("cordova.plugins.browsertab.openUrl",s))throw xc("cordova-plugin-browsertab is not installed");if("function"!==typeof Rr("cordova.InAppBrowser.open",s))throw xc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new C("cordova-not-ready")}))},e.Ob=function(e,t){return t(new C("operation-not-supported-in-this-environment")),Pt()},e.Mb=function(){return Dt(new C("operation-not-supported-in-this-environment"))},e.$b=function(){return!1},e.Xb=function(){return!0},e.Tb=function(){return!0},e.Nb=function(e,t,n,r){if(this.c)return Dt(new C("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Pt().then((function(){return Go(t),Pc(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Ko(t,r,null,o,new C("no-auth-event"),null,i),u=Rr("BuildInfo.packageName",s);if("string"!==typeof u)throw new C("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",s),l={};if(Or().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Or().toLowerCase().match(/android/))return Dt(new C("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Nc(o),l.sessionId=o;var h=Su(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(pc,a.w(),t)})).then((function(){var t=Rr("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof t)throw new C("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=Rr("cordova.plugins.browsertab.openUrl",s)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=Rr("cordova.InAppBrowser.open",s)))throw new C("invalid-cordova-configuration");t=Or(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new St((function(e,t){u=function(){var t=Rr("cordova.plugins.browsertab.close",s);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=An(2e3).then((function(){t(new C("redirect-cancelled-by-user"))})))},l=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(e){return Dc(i).then((function(){throw e}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},e.Ea=function(e){this.b.push(e),Pc(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ko("unknown",null,null,null,new C("no-auth-event")),e(t))}))},e.Sa=function(e){$(this.b,(function(t){return t==e}))};var Rc={name:"pendingRedirect",F:"session"};function Lc(e){return lc(e.b,Rc,e.a)}function Mc(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Yc,this.C=new nl,this.g=new Oc(Jc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Fc(this.D,this.v,this.m,x,this.J)}function Fc(e,t,n,r,i){var o=ue.Z.SDK_VERSION||null;return Tr()?new kc(e,t,n,o,r,i):new wu(e,t,n,o,r,i)}function jc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Uc(e){e.a.Xb()&&jc(e).o((function(t){var n=new Ko("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Kc(t)&&e.s(n)})),e.a.Tb()||Xc(e.b)}function qc(e,t){Q(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Rc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Lc(e.g).then((function(){jc(e).o((function(t){var n=new Ko("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Kc(t)&&e.s(n)}))})):Uc(e)})).o((function(){Uc(e)}))}function Vc(e,t){$(e.h,(function(e){return e==t}))}Mc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Fc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(e){if(!e)throw new C("invalid-auth-event");if(6e5<=T()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=T())),t=!0;break}}return Xc(this.b),t};var Bc=new Wr(2e3,1e4),zc=new Wr(3e4,6e4);function Gc(e,t,n,r,i,o,a){return e.a.Mb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Kc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Wc(e,t,n,r,i){var o;return function(e){return e.b.set(Rc,"pending",e.a)}(e.g).then((function(){return e.a.Nb(t,n,r,i).o((function(t){if(Kc(t))throw new C("operation-not-supported-in-this-environment");return o=t,Lc(e.g).then((function(){throw o}))})).then((function(){return e.a.$b()?new St((function(){})):Lc(e.g).then((function(){return e.qa()})).then((function(){})).o((function(){}))}))}))}function Hc(e,t,n,r,i){return e.a.Ob(r,(function(e){t.na(n,null,e,i)}),Bc.get())}Mc.prototype.qa=function(){return this.b.qa()};var Qc={};function Jc(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function $c(e,t,n,r){var i=Jc(t,n,r);return Qc[i]||(Qc[i]=new Mc(e,t,n,r)),Qc[i]}function Yc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Xc(e){e.g||(e.g=!0,tl(e,!1,null,null))}function Zc(e){e.g&&!e.i&&tl(e,!1,null,null)}function el(e,t){if(e.b=function(){return Pt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function tl(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Dt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):el(e,n):el(e,{user:null}),e.f=[],e.c=[]}function nl(){}function rl(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(e){this.ib=e},enumerable:!1})}function il(e,t){this.a=t,ei(this,"verificationId",e)}function ol(e,t,n,r){return new Vo(e).fb(t,n).then((function(e){return new il(e,r)}))}function al(e){var t=Ji(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ti(this,{token:e,expirationTime:Qr(1e3*t.exp),authTime:Qr(1e3*t.auth_time),issuedAtTime:Qr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function sl(e,t,n){var r=t&&t[cl];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=ge(t),this.g=n,this.c=new lo(null,r),this.b=[];var i=this;G(t[ul]||[],(function(e){(e=oi(e))&&i.b.push(e)})),ei(this,"auth",this.a),ei(this,"session",this.c),ei(this,"hints",this.b)}Yc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Yc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(tl(this,!0,null,e.a),Pt()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){tl(e,s,t,null)})).o((function(t){tl(e,s,null,t)}))}(this,e,t):Dt(new C("invalid-auth-event")):(tl(this,!1,null,null),Pt())}else Dt(new C("invalid-auth-event"))},Yc.prototype.qa=function(){var e=this;return new St((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new C("timeout");e.a&&e.a.cancel(),e.a=An(zc.get()).then((function(){e.b||(e.g=!0,tl(e,!0,null,t))}))}(e))}))},nl.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Pt()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):Dt(new C("invalid-auth-event"))}else Dt(new C("invalid-auth-event"))},il.prototype.confirm=function(e){return e=Bo(this.verificationId,e),this.a(e)};var ul="mfaInfo",cl="mfaPendingCredential";function ll(e,t,n,r){C.call(this,"multi-factor-auth-required",r,t),this.b=new sl(e,t,n),ei(this,"resolver",this.b)}function hl(e,t,n){if(e&&v(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new ll(t,e.serverResponse,n,e.message)}catch(r){}return null}function fl(){}function dl(e){ei(this,"factorId",e.fa),this.a=e}function pl(e){if(dl.call(this,e),this.a.fa!=Vo.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function vl(e,t){for(var n in en.call(this,e),t)this[n]=t[n]}function ml(e,t){this.a=e,this.b=[],this.c=_(this.yc,this),dn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&G(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[ui]=e.uid),e.displayName&&(r[ai]=e.displayName),e.enrollmentTime&&(r[si]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[ci]=e.phoneNumber);try{t=new li(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),gl(this,n)}function gl(e,t){e.b=t,ei(e,"enrolledFactors",t)}function yl(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bl(e,t){e.stop(),e.b=An(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=s.document,t=null;return Hr()||!e?Pt():new St((function(n){t=function(){Hr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){bl(e,!0)})).o((function(t){e.i(t)&&bl(e,!1)}))}function wl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function _l(e,t){"undefined"===typeof t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function El(e,t){e.b=Qi(t[is]||""),e.a=t.refreshToken,_l(e,"undefined"!==typeof(t=t.expiresIn)?Number(t):void 0)}function Tl(e,t){return function(e,t){return new St((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?ds(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(hu(e)):e.access_token&&e.refresh_token?n(e):r(new C("internal-error")):r(new C("network-request-failed"))}),"POST",tr(t).toString(),e.g,e.m.get()):r(new C("internal-error"))}))}(e.f,t).then((function(t){return e.b=Qi(t.access_token),e.a=t.refresh_token,_l(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Sl(e,t){this.a=e||null,this.b=t||null,ti(this,{lastSignInTime:Qr(t||null),creationTime:Qr(e||null)})}function Il(e,t,n,r,i,o){ti(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Cl(e,t,n){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=ue.Z.SDK_VERSION?Dr(ue.Z.SDK_VERSION):null;this.a=new ns(this.l,D(x),r),e.emulatorConfig&&ls(this.a,e.emulatorConfig),this.b=new wl(this.a),Rl(this,t[is]),El(this.b,t),ei(this,"refreshToken",this.b.a),Fl(this,n||{}),In.call(this),this.R=!1,this.s&&Mr()&&(this.i=$c(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(e){return new yl((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(e){i.wa(e.h)},this.ja=null,this.Aa=function(e){ls(i.a,e.c)},this.X=null,this.$=[],this.Ba=function(e){Nl(i,e.f)},this.ba=null,this.O=new ml(this,n),ei(this,"multiFactor",this.O)}function kl(e,t){e.ja&&mn(e.ja,"languageCodeChanged",e.Oa),(e.ja=t)&&dn(t,"languageCodeChanged",e.Oa)}function xl(e,t){e.X&&mn(e.X,"emulatorConfigChanged",e.Aa),(e.X=t)&&dn(t,"emulatorConfigChanged",e.Aa)}function Nl(e,t){e.$=t,fs(e.a,ue.Z.SDK_VERSION?Dr(ue.Z.SDK_VERSION,e.$):null)}function Al(e,t){e.ba&&mn(e.ba,"frameworkChanged",e.Ba),(e.ba=t)&&dn(t,"frameworkChanged",e.Ba)}function Pl(e){try{return ue.Z.app(e.m).auth()}catch(t){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Dl(e){e.D||e.u.b||(e.u.start(),mn(e,"tokenChanged",e.aa),dn(e,"tokenChanged",e.aa))}function Ol(e){mn(e,"tokenChanged",e.aa),e.u.stop()}function Rl(e,t){e.za=t,ei(e,"_lat",t)}function Ll(e){for(var t=[],n=0;n<e.S.length;n++)t.push(e.S[n](e));return Rt(t).then((function(){return e}))}function Ml(e){e.i&&!e.R&&(e.R=!0,qc(e.i,e))}function Fl(e,t){ti(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Sl(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function jl(){}function Ul(e){return Pt().then((function(){if(e.D)throw new C("app-deleted")}))}function ql(e){return W(e.providerData,(function(e){return e.providerId}))}function Vl(e,t){t&&(Bl(e,t.providerId),e.providerData.push(t))}function Bl(e,t){$(e.providerData,(function(e){return e.providerId==t}))}function zl(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&ei(e,t,n)}function Gl(e,t){e!=t&&(ti(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?ei(e,"metadata",function(e){return new Sl(e.a,e.b)}(t.metadata)):ei(e,"metadata",new Sl),G(t.providerData,(function(t){Vl(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),ei(e,"refreshToken",e.b.a),gl(e.O,t.O.b))}function Kl(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return cu(e.a,qs,{idToken:t}).then(_(e.Kc,e))}(e,t).then((function(){return n||zl(e,"isAnonymous",!1),t}))}))}function Wl(e,t){t[is]&&e.za!=t[is]&&(El(e.b,t),e.dispatchEvent(new vl("tokenChanged")),Rl(e,t[is]),zl(e,"refreshToken",e.b.a))}function Hl(e,t){return Kl(e).then((function(){if(Q(ql(e),t))return Ll(e).then((function(){throw new C("provider-already-linked")}))}))}function Ql(e,t,n){return ni({user:e,credential:zo(t),additionalUserInfo:t=eo(t),operationType:n})}function Jl(e,t){return Wl(e,t),e.reload().then((function(){return e}))}function $l(e,t,n,r,i){if(!Mr())return Dt(new C("operation-not-supported-in-this-environment"));if(e.h&&!i)return Dt(e.h);var o=Zi(n.providerId),a=zr(e.uid+":::"),s=null;(!Ur()||Sr())&&e.s&&n.isOAuthProvider&&(s=Su(e.s,e.l,e.m,t,n,null,a,ue.Z.SDK_VERSION||null,null,null,e.tenantId));var u=br(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Xl(e),!i)return e.I().then((function(){}))})).then((function(){return Gc(e.i,u,t,n,a,!!s,e.tenantId)})).then((function(){return new St((function(n,r){e.na(t,null,new C("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=Hc(e.i,e,t,u,a)}))})).then((function(e){return u&&yr(u),e?ni(e):null})).o((function(e){throw u&&yr(u),e})),Zl(e,r,i)}function Yl(e,t,n,r,i){if(!Mr())return Dt(new C("operation-not-supported-in-this-environment"));if(e.h&&!i)return Dt(e.h);var o=null,a=zr(e.uid+":::");return r=r().then((function(){if(Xl(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Ll(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(nh,e.w(),t.a)),t})).then((function(){return Wc(e.i,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return rh(e.ha);throw o})).then((function(){if(o)throw o})),Zl(e,r,i)}function Xl(e){if(!e.i||!e.R){if(e.i&&!e.R)throw new C("internal-error");throw new C("auth-domain-config-required")}}function Zl(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Dt(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new vl("userInvalidated")),e.h=t),t}))}(e,t,n);return e.J.push(r),r.oa((function(){J(e.J,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=hl(t.w(),Pl(e),_(e.jc,e))),n||t}))}function eh(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[is]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Cl(t,n,e);return e.providerData&&G(e.providerData,(function(e){e&&Vl(i,ni(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function th(e){this.a=e,this.b=sc()}sl.prototype.Rc=function(e){var t=this;return e.sb(this.a.a,this.c).then((function(e){var n=ge(t.f);return delete n[ul],delete n[cl],be(n,e),t.g(n)}))},S(ll,C),fl.prototype.sb=function(e,t,n){return t.type==ho?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),be(n,{phoneVerificationInfo:qo(e.a)}),cu(t,js,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return be(n={mfaPendingCredential:n},{phoneVerificationInfo:qo(e.a)}),cu(t,Us,n)}))}(this,e,t)},S(dl,fl),S(pl,dl),S(vl,en),(e=ml.prototype).yc=function(e){gl(this,function(e){var t=[];return G(e.mfaInfo||[],(function(e){(e=oi(e))&&t.push(e)})),t}(e.hd))},e.Rb=function(){return this.a.I().then((function(e){return new lo(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Rb().then((function(n){return e.sb(r,n,t)})).then((function(e){return Wl(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return cu(r,uu,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=K(t.b,(function(e){return e.uid!=n}));return gl(t,r),Wl(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(e){return e.w()}))}}},yl.prototype.start=function(){this.a=this.c,bl(this,!0)},yl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Dt(new C("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?Tl(this,{grant_type:"refresh_token",refresh_token:this.a}):Pt(null):Pt({accessToken:this.b.toString(),refreshToken:this.a})},Sl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(Cl,In),Cl.prototype.wa=function(e){this.ya=e,cs(this.a,e)},Cl.prototype.la=function(){return this.ya},Cl.prototype.Ga=function(){return X(this.$)},Cl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},ei(Cl.prototype,"providerId","firebase"),(e=Cl.prototype).reload=function(){var e=this;return Zl(this,Ul(this).then((function(){return Kl(e).then((function(){return Ll(e)})).then(jl)})))},e.oc=function(e){return this.I(e).then((function(e){return new al(e)}))},e.I=function(e){var t=this;return Zl(this,Ul(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new C("internal-error");return e.accessToken!=t.za&&(Rl(t,e.accessToken),t.dispatchEvent(new vl("tokenChanged"))),zl(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new C("internal-error");Fl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?W(e,(function(e){return new Il(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Vl(this,t[n]);zl(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new vl("userReloaded",{hd:e}))},e.Lc=function(e){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(e)},e.tb=function(e){var t=this,n=null;return Zl(this,e.c(this.a,this.uid).then((function(e){return Wl(t,e),n=Ql(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(e)},e.qb=function(e){var t=this,n=null;return Zl(this,Hl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Ql(t,e,"link"),Jl(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return Zl(this,Hl(this,"phone").then((function(){return ol(Pl(n),e,t,_(n.qb,n))})))},e.Mc=function(e,t){var n=this;return Zl(this,Pt().then((function(){return ol(Pl(n),e,t,_(n.tb,n))})),!0)},e.Bb=function(e){var t=this;return Zl(this,this.I().then((function(n){return t.a.Bb(n,e)})).then((function(e){return Wl(t,e),t.reload()})))},e.ed=function(e){var t=this;return Zl(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Wl(t,e),t.reload()})))},e.Cb=function(e){var t=this;return Zl(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Wl(t,e),t.reload()})))},e.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Ul(this);var t=this;return Zl(this,this.I().then((function(n){return t.a.Db(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Wl(t,e),zl(t,"displayName",e.displayName||null),zl(t,"photoURL",e.photoUrl||null),G(t.providerData,(function(e){"password"===e.providerId&&(ei(e,"displayName",t.displayName),ei(e,"photoURL",t.photoURL))})),Ll(t)})).then(jl))},e.cd=function(e){var t=this;return Zl(this,Kl(this).then((function(n){return Q(ql(t),e)?function(e,t,n){return cu(e,Ls,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return G(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),G(ql(t),(function(e){n[e]||Bl(t,e)})),n[Vo.PROVIDER_ID]||ei(t,"phoneNumber",null),Ll(t)})):Ll(t).then((function(){throw new C("no-such-provider")}))})))},e.delete=function(){var e=this;return Zl(this,this.I().then((function(t){return cu(e.a,Rs,{idToken:t})})).then((function(){e.dispatchEvent(new vl("userDeleted"))}))).then((function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");kl(e,null),xl(e,null),Al(e,null),e.J=[],e.D=!0,Ol(e),ei(e,"refreshToken",null),e.i&&Vc(e.i,e)}))},e.Fb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==e&&t==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==e&&(this.ga||null)==t?_(this.Kb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?_(this.Lb,this):null},e.Ec=function(e){var t=this;return $l(this,"linkViaPopup",e,(function(){return Hl(t,e.providerId).then((function(){return Ll(t)}))}),!1)},e.Nc=function(e){return $l(this,"reauthViaPopup",e,(function(){return Pt()}),!0)},e.Fc=function(e){var t=this;return Yl(this,"linkViaRedirect",e,(function(){return Hl(t,e.providerId)}),!1)},e.Oc=function(e){return Yl(this,"reauthViaRedirect",e,(function(){return Pt()}),!0)},e.Kb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Zl(this,this.I().then((function(n){return ks(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Ql(i,e,"link"),Jl(i,e)})).then((function(){return o})))},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,a=Pt().then((function(){return vo(xs(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Ql(i,e,"reauthenticate"),Wl(i,e),i.h=null,i.reload()})).then((function(){return o}));return Zl(this,a,!0)},e.ub=function(e){var t=this,n=null;return Zl(this,this.I().then((function(t){return n=t,"undefined"===typeof e||me(e)?{}:Gi(new Ri(e))})).then((function(e){return t.a.ub(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Eb=function(e,t){var n=this,r=null;return Zl(this,this.I().then((function(e){return r=e,"undefined"===typeof t||me(t)?{}:Gi(new Ri(t))})).then((function(t){return n.a.Eb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return Zl(this,e=vo(Pt(e),n.uid).then((function(e){return t=Ql(n,e,"reauthenticate"),Wl(n,e),n.h=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&be(e,this.metadata.w()),G(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),be(e,this.O.w()),e};var nh={name:"redirectUser",F:"session"};function rh(e){return lc(e.b,nh,e.a)}function ih(e){this.a=e,this.b=sc(),this.c=null,this.f=function(e){var t=sh("local"),n=sh("session"),r=sh("none");return function(e,t,n){var r=cc(t,n),i=uc(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=Br(s.localStorage.getItem(r))}catch(de){}if(a&&!o)return s.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(ah,e.a).then((function(e){return e?sh(e):t}))}))}))})).then((function(t){return e.c=t,oh(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(sh("local"),this.a,_(this.g,this))}function oh(e,t){var n,r=[];for(n in oc)oc[n]!==t&&r.push(lc(e.b,sh(oc[n]),e.a));return r.push(lc(e.b,ah,e.a)),function(e){return new St((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)Ot(e[s],E(o,s),a);else t(i)}))}(r)}ih.prototype.g=function(){var e=this,t=sh("local");hh(this,(function(){return Pt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return oh(e,"local").then((function(){e.c=t}))}))}))};var ah={name:"persistence",F:"session"};function sh(e){return{name:"authUser",F:e}}function uh(e,t){return hh(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function ch(e){return hh(e,(function(){return lc(e.b,e.c,e.a)}))}function lh(e,t,n){return hh(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),eh(e||{})}))}))}function hh(e,t){return e.f=e.f.then(t,t),e.f}function fh(e){if(this.l=!1,ei(this,"settings",new rl),ei(this,"app",e),!_h(this).options||!_h(this).options.apiKey)throw new C("invalid-api-key");e=ue.Z.SDK_VERSION?Dr(ue.Z.SDK_VERSION):null,this.a=new ns(_h(this).options&&_h(this).options.apiKey,D(x),e),this.R=[],this.s=[],this.O=[],this.hb=ue.Z.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=ue.Z.INTERNAL.createSubscribe(_(this.Ac,this)),bh(this,null),this.i=new ih(_h(this).options.apiKey+":"+_h(this).name),this.D=new th(_h(this).options.apiKey+":"+_h(this).name),this.$=Ih(this,function(e){var t=_h(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(nh,e.a).then((function(e){return e&&t&&(e.authDomain=t),eh(e||{})}))}(e.D,_h(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),rh(e.D)}));return Ih(e,t)}(e).then((function(){return lh(e.i,t,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return uh(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:ch(e.i)}))):null})).then((function(t){bh(e,t||null)}));return Ih(e,n)}(this)),this.h=Ih(this,function(e){return e.$.then((function(){return gh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(sh("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(e){var t=_h(e).options.authDomain,n=_h(e).options.apiKey;t&&Mr()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=$c(t,n,_h(e).name,e.P),qc(e.b,e),Eh(e)&&Ml(Eh(e)),e.m){Ml(e.m);var r=e.m;r.wa(e.la()),kl(r,e),Nl(r=e.m,e.J),Al(r,e),ls((r=e.m).a,e.P),xl(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,In.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.wa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.yb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.P){var e=zn(this.P.url);e=ni({protocol:e.c,host:e.a,port:e.g,options:ni({disableWarnings:this.P.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.P=null}function dh(e){en.call(this,"languageCodeChanged"),this.h=e}function ph(e){en.call(this,"emulatorConfigChanged"),this.c=e}function vh(e){en.call(this,"frameworkChanged"),this.f=e}function mh(e){return e.Oa||Dt(new C("auth-domain-config-required"))}function gh(e){if(!Mr())return Dt(new C("operation-not-supported-in-this-environment"));var t=mh(e).then((function(){return e.b.qa()})).then((function(e){return e?ni(e):null}));return Ih(e,t)}function yh(e,t){var n={};return n.apiKey=_h(e).options.apiKey,n.authDomain=_h(e).options.authDomain,n.appName=_h(e).name,e.P&&(n.emulatorConfig=e.P),e.$.then((function(){return function(e,t,n,r){var i=new Cl(e,t);return n&&(i.ha=n),r&&Nl(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return Eh(e)&&t.uid==Eh(e).uid?(Gl(Eh(e),t),e.da(t)):(bh(e,t),Ml(t),e.da(t))})).then((function(){Sh(e)}))}function bh(e,t){Eh(e)&&(function(e,t){$(e.S,(function(e){return e==t}))}(Eh(e),e.Ba),mn(Eh(e),"tokenChanged",e.ya),mn(Eh(e),"userDeleted",e.za),mn(Eh(e),"userInvalidated",e.Aa),Ol(Eh(e))),t&&(t.S.push(e.Ba),dn(t,"tokenChanged",e.ya),dn(t,"userDeleted",e.za),dn(t,"userInvalidated",e.Aa),0<e.u&&Dl(t)),ei(e,"currentUser",t),t&&(t.wa(e.la()),kl(t,e),Nl(t,e.J),Al(t,e),ls(t.a,e.P),xl(t,e))}function wh(e,t){var n=null,r=null;return Ih(e,t.then((function(t){return n=zo(t),r=eo(t),yh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=hl(t.w(),e,_(e.kc,e))),n||t})).then((function(){return ni({user:Eh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function _h(e){return e.app}function Eh(e){return e.currentUser}function Th(e){return Eh(e)&&Eh(e)._lat||null}function Sh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](Th(e));if(e.X!==e.getUid()&&e.O.length)for(e.X=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](Th(e))}}function Ih(e,t){return e.R.push(t),t.oa((function(){J(e.R,t)})),t}function Ch(){}function kh(){this.a={},this.b=1e12}ih.prototype.xb=function(e){var t=null,n=this;return function(e){var t=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");e:{for(r in oc)if(oc[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Cr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!ju()&&"none"!==e)throw n;break;default:if(!Lr()&&"none"!==e)throw n}}(e),hh(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,oh(n,e)})).then((function(){if(n.c=sh(e),t)return n.b.set(n.c,t,n.a)})):Pt()}))},S(fh,In),S(dh,en),S(ph,en),S(vh,en),(e=fh.prototype).xb=function(e){return Ih(this,e=this.i.xb(e))},e.wa=function(e){this.aa===e||this.l||(this.aa=e,cs(this.a,this.aa),this.dispatchEvent(new dh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=s.navigator;this.wa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.P){if(!/^https?:\/\//.test(e))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!e&&Er().then((function(){var e=s.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#ff0000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),s.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.P={url:e,ec:t},this.settings.ib=!0,ls(this.a,this.P),this.dispatchEvent(new ph(this.P))}},e.Gc=function(e){this.J.push(e),fs(this.a,ue.Z.SDK_VERSION?Dr(ue.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new vh(this.J))},e.Ga=function(){return X(this.J)},e.yb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:_h(this).options.apiKey,authDomain:_h(this).options.authDomain,appName:_h(this).name,currentUser:Eh(this)&&Eh(this).w()}},e.Fb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?_(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return wh(i,Cs(i.a,o))}))},e.Xc=function(e){if(!Mr())return Dt(new C("operation-not-supported-in-this-environment"));var t=this,n=Zi(e.providerId),r=zr(),i=null;(!Ur()||Sr())&&_h(this).options.authDomain&&e.isOAuthProvider&&(i=Su(_h(this).options.authDomain,_h(this).options.apiKey,_h(this).name,"signInViaPopup",e,null,r,ue.Z.SDK_VERSION||null,null,null,this.T(),this.P));var o=br(i,n&&n.ua,n&&n.ta);return n=mh(this).then((function(n){return Gc(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new St((function(e,n){t.na("signInViaPopup",null,new C("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=Hc(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&yr(o),e?ni(e):null})).o((function(e){throw o&&yr(o),e})),Ih(this,n)},e.Yc=function(e){if(!Mr())return Dt(new C("operation-not-supported-in-this-environment"));var t=this,n=mh(this).then((function(){return function(e){return hh(e,(function(){return e.b.set(ah,e.c.F,e.a)}))}(t.i)})).then((function(){return Wc(t.b,"signInViaRedirect",e,void 0,t.T())}));return Ih(this,n)},e.qa=function(){var e=this;return gh(this).then((function(t){return e.b&&Zc(e.b.b),t})).o((function(t){throw e.b&&Zc(e.b.b),t}))},e.dd=function(e){if(!e)return Dt(new C("null-user"));if(this.S!=e.tenantId)return Dt(new C("tenant-id-mismatch"));var t=this,n={};n.apiKey=_h(this).options.apiKey,n.authDomain=_h(this).options.authDomain,n.appName=_h(this).name;var r=function(e,t,n,r){var i=e.b,o={};return o[is]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Cl(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&Nl(t,r),Gl(t,e),t}(e,n,t.D,t.Ga());return Ih(this,this.h.then((function(){if(_h(t).options.apiKey!=e.l)return r.reload()})).then((function(){return Eh(t)&&e.uid==Eh(t).uid?(Gl(Eh(t),e),t.da(e)):(bh(t,r),Ml(r),t.da(r))})).then((function(){Sh(t)})))},e.Ab=function(){var e=this;return Ih(this,this.h.then((function(){return e.b&&Zc(e.b.b),Eh(e)?(bh(e,null),ch(e.i).then((function(){Sh(e)}))):Pt()})))},e.Zc=function(){var e=this;return lh(this.i,_h(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=Eh(e)&&t){n=Eh(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Gl(Eh(e),t),Eh(e).I();(Eh(e)||t)&&(bh(e,t),t&&(Ml(t),t.ha=e.D),e.b&&qc(e.b,e),Sh(e))}}))},e.da=function(e){return uh(this.i,e)},e.mc=function(){Sh(this),this.da(Eh(this))},e.wc=function(){this.Ab()},e.xc=function(){this.Ab()},e.kc=function(e){var t=this;return this.h.then((function(){return wh(t,Pt(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(Eh(t))}))},e.Ac=function(e){var t=this;!function(e,t){e.O.push(t),Ih(e,e.h.then((function(){!e.l&&Q(e.O,t)&&e.X!==e.getUid()&&(e.X=e.getUid(),t(Th(e)))})))}(this,(function(){e.next(Eh(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(Eh(r)):"function"===typeof e.next&&e.next(Eh(r))})),this.hb(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof e?e(Eh(r)):"function"===typeof e.next&&e.next(Eh(r))})),this.bc(e,t,n)},e.nc=function(e){var t=this;return Ih(this,this.h.then((function(){return Eh(t)?Eh(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Tc=function(e){var t=this;return this.h.then((function(){return wh(t,cu(t.a,ru,{token:e}))})).then((function(e){var n=e.user;return zl(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return wh(n,cu(n.a,iu,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return wh(n,cu(n.a,Ds,{email:e,password:t}))}))},e.$a=function(e){var t=this;return this.h.then((function(){return wh(t,e.ka(t.a))}))},e.Sc=function(e){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(e)},e.zb=function(){var e=this;return this.h.then((function(){var t=Eh(e);if(t&&t.isAnonymous){var n=ni({providerId:null,isNewUser:!1});return ni({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return wh(e,e.a.zb()).then((function(t){var n=t.user;return zl(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return Eh(this)&&Eh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&Eh(this)&&Dl(Eh(this))},e.Pc=function(e){var t=this;G(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&Eh(this)&&Ol(Eh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),Ih(this,this.h.then((function(){t.l||Q(t.s,e)&&e(Th(t))})))},e.removeAuthTokenListener=function(e){$(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");return this.R=[],this.i&&(e=this.i).b.removeListener(sh("local"),e.a,this.ja),this.b&&(Vc(this.b,this),Zc(this.b.b)),Promise.resolve()},e.hc=function(e){return Ih(this,function(e,t){return cu(e,Os,{identifier:t,continueUri:Fr()?pr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},e.Bc=function(e){return!!Fo(e)},e.wb=function(e,t){var n=this;return Ih(this,Pt().then((function(){var e=new Ri(t);if(!e.c)throw new C("argument-error",Fi+" must be true when sending sign in link to email");return Gi(e)})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.jd=function(e){return this.Ra(e).then((function(e){return e.data.email}))},e.nb=function(e,t){return Ih(this,this.a.nb(e,t).then((function(){})))},e.Ra=function(e){return Ih(this,this.a.Ra(e).then((function(e){return new hi(e)})))},e.jb=function(e){return Ih(this,this.a.jb(e).then((function(){})))},e.vb=function(e,t){var n=this;return Ih(this,Pt().then((function(){return"undefined"===typeof t||me(t)?{}:Gi(new Ri(t))})).then((function(t){return n.a.vb(e,t)})).then((function(){})))},e.Wc=function(e,t){return Ih(this,ol(this,e,t,_(this.$a,this)))},e.Vc=function(e,t){var n=this;return Ih(this,Pt().then((function(){var r=t||pr(),i=Mo(e,r);if(!(r=Fo(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.$a(i)})))},Ch.prototype.render=function(){},Ch.prototype.reset=function(){},Ch.prototype.getResponse=function(){},Ch.prototype.execute=function(){};var xh=null;function Nh(e,t){return(t=Ah(t))&&e.a[t]||null}function Ah(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Ph(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ft(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():dn(this.f,"click",this.i)}function Dh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Oh(){}function Rh(){}kh.prototype.render=function(e,t){return this.a[this.b.toString()]=new Ph(e,t),this.b++},kh.prototype.reset=function(e){var t=Nh(this,e);e=Ah(e),t&&e&&(t.delete(),delete this.a[e])},kh.prototype.getResponse=function(e){return(e=Nh(this,e))?e.getResponse():null},kh.prototype.execute=function(e){(e=Nh(this,e))&&e.execute()},Ph.prototype.getResponse=function(){return Dh(this),this.b},Ph.prototype.execute=function(){Dh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Ph.prototype.delete=function(){Dh(this),this.g=!0,clearTimeout(this.a),this.a=null,mn(this.f,"click",this.i)},ei(Oh,"FACTOR_ID","phone"),Rh.prototype.g=function(){return xh||(xh=new kh),Pt(xh)},Rh.prototype.c=function(){};var Lh=null;function Mh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Fh=new _e(Ce,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),jh=new Wr(3e4,6e4);Mh.prototype.g=function(e){var t=this;return new St((function(n,r){var i=setTimeout((function(){r(new C("network-request-failed"))}),jh.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete s[t.a]},Pt(Ja(Ae(Fh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Mh.prototype.c=function(){this.b--};var Uh=null;function qh(e,t,n,r,i,o,a){if(ei(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=t,this.g=null,a?(Lh||(Lh=new Rh),a=Lh):(Uh||(Uh=new Mh),a=Uh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[zh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Gh],!s.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ft(t)||!this.i&&ft(t).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ns(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Vh];this.a[Vh]=function(e){if(Kh(u,e),"function"===typeof c)c(e);else if("string"===typeof c){var t=Rr(c,s);"function"===typeof t&&t(e)}};var l=this.a[Bh];this.a[Bh]=function(){if(Kh(u,null),"function"===typeof l)l();else if("string"===typeof l){var e=Rr(l,s);"function"===typeof e&&e()}}}var Vh="callback",Bh="expired-callback",zh="sitekey",Gh="size";function Kh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Wh(e,t){return e.h.push(t),t.oa((function(){J(e.h,t)})),t}function Hh(e){if(e.D)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Qh(e,t,n){var r=!1;try{this.b=n||ue.Z.app()}catch(a){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=ue.Z.SDK_VERSION?Dr(ue.Z.SDK_VERSION,o):null,qh.call(this,n,e,t,(function(){try{var e=i.b.auth().la()}catch(de){e=null}return e}),o,D(x),r)}function Jh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=$h.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=$h[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new C("argument-error",e+" failed: "+r)}(e=qh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Wh(this,Pt().then((function(){if(Fr()&&!Ir())return Er();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,cu(e.s,Ws,{})})).then((function(t){e.a[zh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){Hh(this);var e=this;return Wh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=ft(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ht&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',He(a.name),'"'),a.type){o.push(' type="',He(a.type),'"');var s={};be(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=yt(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):dt(o,a)),2<r.length&&gt(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Hh(this);var e=this;return Wh(this,this.render().then((function(t){return new St((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){$(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Hh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Hh(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ft(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},S(Qh,qh);var $h="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Yh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Xh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Zh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:v}}function ef(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function tf(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function nf(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function rf(e,t){return v(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function of(e){return v(e)&&"string"===typeof e.uid}function af(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function sf(e,t){for(var n in t){var r=t[n].name;e[r]=lf(r,e[n],t[n].j)}}function uf(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:E((function(e){return this[e]}),n),set:E((function(e,t,n,r){Jh(e,[n],[r],!0),this[t]=r}),r,n,t[n].kb),enumerable:!0})}}function cf(e,t,n,r){e[t]=lf(t,n,r)}function lf(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Jh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}sf(fh.prototype,{jb:{name:"applyActionCode",j:[Yh("code")]},Ra:{name:"checkActionCode",j:[Yh("code")]},nb:{name:"confirmPasswordReset",j:[Yh("code"),Yh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Yh("email"),Yh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Yh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Yh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[af(Zh(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[af(Zh(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Yh("email"),af(Zh("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Yh("email"),Zh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Yh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[nf()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[nf()]},Tc:{name:"signInWithCustomToken",j:[Yh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Yh("email"),Yh("password")]},Vc:{name:"signInWithEmailLink",j:[Yh("email"),Yh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Yh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[af({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Cl)}},tf(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Yh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Yh("url"),Zh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Yh("code")]}}),uf(fh.prototype,{lc:{name:"languageCode",kb:af(Yh(),tf(),"languageCode")},ti:{name:"tenantId",kb:af(Yh(),tf(),"tenantId")}}),fh.Persistence=oc,fh.Persistence.LOCAL="local",fh.Persistence.SESSION="session",fh.Persistence.NONE="none",sf(Cl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Xh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Xh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[nf()]},qb:{name:"linkWithCredential",j:[nf()]},Dc:{name:"linkWithPhoneNumber",j:[Yh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[nf()]},tb:{name:"reauthenticateWithCredential",j:[nf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Yh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[af(Zh("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Yh(null,!0)]},cd:{name:"unlink",j:[Yh("provider")]},Bb:{name:"updateEmail",j:[Yh("email")]},Cb:{name:"updatePassword",j:[Yh("password")]},ed:{name:"updatePhoneNumber",j:[nf("phone")]},Db:{name:"updateProfile",j:[Zh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Yh("email"),af(Zh("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]}}),sf(kh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sf(Ch.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sf(St.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),uf(rl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Xh("appVerificationDisabledForTesting")}}),sf(il.prototype,{confirm:{name:"confirm",j:[Yh("verificationCode")]}}),cf(po,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[_o,Ro,Uo,yo],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[af(Yh(),Zh(),"json")]),cf(Lo,"credential",(function(e,t){return new Oo(e,t)}),[Yh("email"),Yh("password")]),sf(Oo.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),sf(Io.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),cf(Io,"credential",Co,[af(Yh(),Zh(),"token")]),cf(Lo,"credentialWithLink",Mo,[Yh("email"),Yh("emailLink")]),sf(ko.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),cf(ko,"credential",xo,[af(Yh(),Zh(),"token")]),sf(No.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),cf(No,"credential",Ao,[af(Yh(),af(Zh(),tf()),"idToken"),af(Yh(),tf(),"accessToken",!0)]),sf(Po.prototype,{Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),cf(Po,"credential",Do,[af(Yh(),Zh(),"token"),Yh("secret",!0)]),sf(So.prototype,{Ca:{name:"addScope",j:[Yh("scope")]},credential:{name:"credential",j:[af(Yh(),af(Zh(),tf()),"optionsOrIdToken"),af(Yh(),tf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),sf(bo.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),sf(mo.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),cf(Vo,"credential",Bo,[Yh("verificationId"),Yh("verificationCode")]),sf(Vo.prototype,{fb:{name:"verifyPhoneNumber",j:[af(Yh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?rf(e.session,ho)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?rf(e.session,fo)&&of(e.multiFactorHint):e.session&&e.multiFactorUid?rf(e.session,fo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),sf(jo.prototype,{w:{name:"toJSON",j:[Yh(null,!0)]}}),sf(C.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf(Yo.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf($o.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf(ll.prototype,{toJSON:{name:"toJSON",j:[Yh(null,!0)]}}),sf(sl.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}}]}}),sf(ml.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}},Yh("displayName",!0)]},bd:{name:"unenroll",j:[af({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:of},Yh(),"multiFactorInfoIdentifier")]}}),sf(Qh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),cf(Ii,"parseLink",Oi,[Yh("link")]),cf(Oh,"assertion",(function(e){return new pl(e)}),[nf("phone")]),function(){if("undefined"===typeof ue.Z||!ue.Z.INTERNAL||!ue.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:di,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:pi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:fh,AuthCredential:po,Error:C};cf(e,"EmailAuthProvider",Lo,[]),cf(e,"FacebookAuthProvider",Io,[]),cf(e,"GithubAuthProvider",ko,[]),cf(e,"GoogleAuthProvider",No,[]),cf(e,"TwitterAuthProvider",Po,[]),cf(e,"OAuthProvider",So,[Yh("providerId")]),cf(e,"SAMLAuthProvider",To,[Yh("providerId")]),cf(e,"PhoneAuthProvider",Vo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof fh)}}]),cf(e,"RecaptchaVerifier",Qh,[af(Yh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Zh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof ue.Z.app.App)}}]),cf(e,"ActionCodeURL",Ii,[]),cf(e,"PhoneMultiFactorGenerator",Oh,[]),ue.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new fh(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),ue.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:_((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:_(e.nc,e),addAuthTokenListener:_(e.cc,e),removeAuthTokenListener:_(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ue.Z.registerVersion("@firebase/auth","0.16.4"),ue.Z.INTERNAL.extendNamespace({User:Cl})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});n(895);var ce=n(386),le=n(971),he=function(e,t){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},he(e,t)};function fe(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var de,pe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ve=ve||{},me=pe||self;function ge(){}function ye(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function be(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var we="closure_uid_"+(1e9*Math.random()>>>0),_e=0;function Ee(e,t,n){return e.call.apply(e.bind,arguments)}function Te(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Se(e,t,n){return(Se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ee:Te).apply(null,arguments)}function Ie(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ce(){return Date.now()}function ke(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function xe(){this.j=this.j,this.i=this.i}xe.prototype.j=!1,xe.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(e){Object.prototype.hasOwnProperty.call(e,we)&&e[we]||(e[we]=++_e)})(this)},xe.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ne=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ae=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function Pe(e){return Array.prototype.concat.apply([],arguments)}function De(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Oe(e){return/^[\s\xa0]*$/.test(e)}var Re,Le=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Me(e,t){return-1!=e.indexOf(t)}function Fe(e,t){return e<t?-1:e>t?1:0}e:{var je=me.navigator;if(je){var Ue=je.userAgent;if(Ue){Re=Ue;break e}}Re=""}function qe(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ve(e){var t={};for(var n in e)t[n]=e[n];return t}var Be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Be.length;o++)n=Be[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ge(e){return Ge[" "](e),e}Ge[" "]=ge;var Ke,We=Me(Re,"Opera"),He=Me(Re,"Trident")||Me(Re,"MSIE"),Qe=Me(Re,"Edge"),Je=Qe||He,$e=Me(Re,"Gecko")&&!(Me(Re.toLowerCase(),"webkit")&&!Me(Re,"Edge"))&&!(Me(Re,"Trident")||Me(Re,"MSIE"))&&!Me(Re,"Edge"),Ye=Me(Re.toLowerCase(),"webkit")&&!Me(Re,"Edge");function Xe(){var e=me.document;return e?e.documentMode:void 0}e:{var Ze="",et=function(){var e=Re;return $e?/rv:([^\);]+)(\)|;)/.exec(e):Qe?/Edge\/([\d\.]+)/.exec(e):He?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ye?/WebKit\/(\S+)/.exec(e):We?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(et&&(Ze=et?et[1]:""),He){var tt=Xe();if(null!=tt&&tt>parseFloat(Ze)){Ke=String(tt);break e}}Ke=Ze}var nt,rt={};function it(e){return function(e,t){var n=rt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=Le(String(Ke)).split("."),r=Le(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=Fe(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Fe(0==a[2].length,0==s[2].length)||Fe(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(me.document&&He){var ot=Xe();nt=ot||(parseInt(Ke,10)||void 0)}else nt=void 0;var at=nt,st=!He||9<=Number(at),ut=He&&!it("9"),ct=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{me.addEventListener("test",ge,t),me.removeEventListener("test",ge,t)}catch(n){}return e}();function lt(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function ht(e,t){if(lt.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if($e){e:{try{Ge(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ft[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}lt.prototype.b=function(){this.defaultPrevented=!0},ke(ht,lt);var ft={2:"touch",3:"pen",4:"mouse"};ht.prototype.b=function(){ht.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ut)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var dt="closure_listenable_"+(1e6*Math.random()|0),pt=0;function vt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++pt,this.Y=this.Z=!1}function mt(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function gt(e){this.src=e,this.a={},this.b=0}function yt(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=Ne(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(mt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function bt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ca==r)return i}return-1}gt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=bt(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new vt(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var wt="closure_lm_"+(1e6*Math.random()|0),_t={};function Et(e,t,n,r,i){if(r&&r.once)return St(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Et(e,t[o],n,r,i);return null}return n=Dt(n),e&&e[dt]?e.va(t,n,be(r)?!!r.capture:!!r,i):Tt(e,t,n,!1,r,i)}function Tt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=be(i)?!!i.capture:!!i;if(a&&!st)return null;var s=At(e);if(s||(e[wt]=s=new gt(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Nt,t=st?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ct||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(kt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function St(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)St(e,t[o],n,r,i);return null}return n=Dt(n),e&&e[dt]?e.wa(t,n,be(r)?!!r.capture:!!r,i):Tt(e,t,n,!0,r,i)}function It(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)It(e,t[o],n,r,i);else r=be(r)?!!r.capture:!!r,n=Dt(n),e&&e[dt]?(e=e.c,(t=String(t).toString())in e.a&&(-1<(n=bt(o=e.a[t],n,r,i))&&(mt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=At(e))&&(t=e.a[t.toString()],e=-1,t&&(e=bt(t,n,r,i)),(n=-1<e?t[e]:null)&&Ct(n))}function Ct(e){if("number"!==typeof e&&e&&!e.Y){var t=e.src;if(t&&t[dt])yt(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(kt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=At(t))?(yt(n,e),0==n.b&&(n.src=null,t[wt]=null)):mt(e)}}}function kt(e){return e in _t?_t[e]:_t[e]="on"+e}function xt(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&Ct(e),n.call(r,t)}function Nt(e,t){if(e.Y)return!0;if(!st){if(!t)e:{t=["window","event"];for(var n=me,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return xt(e,t=new ht(t,this))}return xt(e,new ht(t,this))}function At(e){return(e=e[wt])instanceof gt?e:null}var Pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(e){return"function"===typeof e?e:(e[Pt]||(e[Pt]=function(t){return e.handleEvent(t)}),e[Pt])}function Ot(){xe.call(this),this.c=new gt(this),this.J=this,this.C=null}function Rt(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,"string"===typeof t)t=new lt(t,e);else if(t instanceof lt)t.target=t.target||e;else{var i=t;ze(t=new lt(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.a=n[o];i=Lt(a,r,!0,t)&&i}if(i=Lt(a=t.a=e,r,!0,t)&&i,i=Lt(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Lt(a=t.a=n[o],r,!1,t)&&i}function Lt(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&yt(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}ke(Ot,xe),Ot.prototype[dt]=!0,(de=Ot.prototype).addEventListener=function(e,t,n,r){Et(this,e,t,n,r)},de.removeEventListener=function(e,t,n,r){It(this,e,t,n,r)},de.G=function(){if(Ot.X.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)mt(n[r]);delete t.a[e],t.b--}}this.C=null},de.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},de.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Mt=me.JSON.stringify;function Ft(){this.b=this.a=null}var jt,Ut=new(function(){function e(e,t){this.c=e,this.f=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new Vt}),(function(e){e.reset()}));function qt(){var e=Kt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Vt(){this.next=this.b=this.a=null}function Bt(e){me.setTimeout((function(){throw e}),0)}function zt(e,t){jt||function(){var e=me.Promise.resolve(void 0);jt=function(){e.then(Wt)}}(),Gt||(jt(),Gt=!0),Kt.add(e,t)}Ft.prototype.add=function(e,t){var n=Ut.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Vt.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Vt.prototype.reset=function(){this.next=this.b=this.a=null};var Gt=!1,Kt=new Ft;function Wt(){for(var e;e=qt();){try{e.a.call(e.b)}catch(n){Bt(n)}var t=Ut;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Gt=!1}function Ht(e,t){Ot.call(this),this.b=e||1,this.a=t||me,this.f=Se(this.Za,this),this.g=Ce()}function Qt(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function Jt(e,t,n){if("function"===typeof e)n&&(e=Se(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Se(e.handleEvent,e)}return 2147483647<Number(t)?-1:me.setTimeout(e,t||0)}function $t(e){e.a=Jt((function(){e.a=null,e.c&&(e.c=!1,$t(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}ke(Ht,Ot),(de=Ht.prototype).aa=!1,de.M=null,de.Za=function(){if(this.aa){var e=Ce()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Rt(this,"tick"),this.aa&&(Qt(this),this.start()))}},de.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ce())},de.G=function(){Ht.X.G.call(this),Qt(this),delete this.a};var Yt=function(e){function t(t,n){var r=e.call(this)||this;return r.g=t,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(e,t){function n(){this.constructor=e}he(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:$t(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(me.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(xe);function Xt(e){xe.call(this),this.b=e,this.a={}}ke(Xt,xe);var Zt=[];function en(e,t,n,r){Array.isArray(n)||(n&&(Zt[0]=n.toString()),n=Zt);for(var i=0;i<n.length;i++){var o=Et(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function tn(e){qe(e.a,(function(e,t){this.a.hasOwnProperty(t)&&Ct(e)}),e),e.a={}}function nn(){this.a=!0}function rn(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Mt(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Xt.prototype.G=function(){Xt.X.G.call(this),tn(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nn.prototype.info=function(){};var on={},an=null;function sn(){return an=an||new Ot}function un(e){lt.call(this,on.Fa,e)}function cn(e){var t=sn();Rt(t,new un(t,e))}function ln(e,t){lt.call(this,on.STAT_EVENT,e),this.stat=t}function hn(e){var t=sn();Rt(t,new ln(t,e))}function fn(e){lt.call(this,on.Ga,e)}function dn(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return me.setTimeout((function(){e()}),t)}on.Fa="serverreachability",ke(un,lt),on.STAT_EVENT="statevent",ke(ln,lt),on.Ga="timingevent",ke(fn,lt);var pn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},vn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function mn(){}function gn(e){var t;return(t=e.a)||(t=e.a={}),t}function yn(){}mn.prototype.a=null;var bn,wn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function _n(){lt.call(this,"d")}function En(){lt.call(this,"c")}function Tn(){}function Sn(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new Xt(this),this.P=In,e=Je?125:void 0,this.R=new Ht(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ke(_n,lt),ke(En,lt),ke(Tn,mn),bn=new Tn;var In=45e3,Cn={},kn={};function xn(e,t,n){e.H=1,e.i=$n(Gn(t)),e.j=n,e.I=!0,Nn(e,null)}function Nn(e,t){e.u=Ce(),Dn(e),e.l=Gn(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),cr(n.b,"t",r),e.D=0,e.a=ri(e.g,e.g.C?t:null),0<e.O&&(e.F=new Yt(Se(e.Ca,e,e.a),e.O)),en(e.J,e.a,"readystatechange",e.Xa),t=e.B?Ve(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),cn(1),function(e,t,n,r,i,o){e.info((function(){if(e.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.c,e.m,e.l,e.f,e.S,e.j)}function An(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=Pn(e,n);if(i==kn){4==t&&(e.h=4,hn(14),r=!1),rn(e.c,e.f,null,"[Incomplete Response]");break}if(i==Cn){e.h=4,hn(15),rn(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}rn(e.c,e.f,i,null),Fn(e,i)}4==t&&0==n.length&&(e.h=1,hn(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,(t=e.g).a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jr(t),t.F=!0,hn(11))):(rn(e.c,e.f,n,"[Invalid Chunked Response]"),Mn(e),Ln(e))}function Pn(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?kn:(n=Number(t.substring(n,r)),isNaN(n)?Cn:(r+=1)+n>t.length?kn:(t=t.substr(r,n),e.D=r+n,t))}function Dn(e){e.T=Ce()+e.P,On(e,e.P)}function On(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=dn(Se(e.Va,e),t)}function Rn(e){e.o&&(me.clearTimeout(e.o),e.o=null)}function Ln(e){0==e.g.v||e.A||Xr(e.g,e)}function Mn(e){Rn(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,Qt(e.R),tn(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Fn(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||mr(n.b,e)))if(n.I=e.N,!e.C&&mr(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(Yd){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;Yr(n),qr(n)}Qr(n),hn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=dn(Se(n.Sa,n),6e3));if(1>=vr(n.b)&&n.ea){try{n.ea()}catch(Yd){}n.ea=void 0}}else ei(n,11)}else if((e.C||n.a==e)&&Yr(n),!Oe(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=e.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Me(l,"spdy")||Me(l,"quic")||Me(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(gr(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Jn(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ce()-e.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=e;if((u=n).la=ni(u,u.C?u.ga:null,u.fa),d.C){yr(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Rn(p),Dn(p)),u.a=d}else Hr(u);0<n.g.length&&zr(n)}else"stop"!=i[0]&&"close"!=i[0]||ei(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ei(n,7):Ur(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);cn(4)}catch(Yd){}}function jn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ye(e)||"string"===typeof e)Ae(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(ye(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"===typeof e)return e.split("");if(ye(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Un(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Un)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function qn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Vn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Vn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Vn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(de=Sn.prototype).setTimeout=function(e){this.P=e},de.Xa=function(e){e=e.target;var t=this.F;t&&3==Lr(e)?t.f():this.Ca(e)},de.Ca=function(e){try{if(e==this.a)e:{var t=Lr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||3==t&&!Je&&!this.a.$())){this.A||4!=t||7==n||cn(8==n||0>=r?3:2),Rn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oe(a)){var u=a;break t}}u=null}if(!u){this.b=!1,this.h=3,hn(12),Mn(this),Ln(this);break e}rn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Fn(this,u)}this.I?(An(this,t,o),Je&&this.b&&3==t&&(en(this.J,this.R,"tick",this.Wa),this.R.start())):(rn(this.c,this.f,o,null),Fn(this,o)),4==t&&Mn(this),this.b&&!this.A&&(4==t?Xr(this.g,this):(this.b=!1,Dn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,hn(12)):(this.h=0,hn(13)),Mn(this),Ln(this)}}}catch(c){}},de.Wa=function(){if(this.a){var e=Lr(this.a),t=this.a.$();this.D<t.length&&(Rn(this),An(this,e,t),this.b&&4!=e&&Dn(this))}},de.cancel=function(){this.A=!0,Mn(this)},de.Va=function(){this.o=null;var e=Ce();0<=e-this.T?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.c,this.l),2!=this.H&&(cn(3),hn(17)),Mn(this),this.h=2,Ln(this)):On(this,this.T-e)},(de=Un.prototype).K=function(){qn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},de.L=function(){return qn(this),this.a.concat()},de.get=function(e,t){return Vn(this.b,e)?this.b[e]:t},de.set=function(e,t){Vn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},de.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zn(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof zn){this.a=void 0!==t?t:e.a,Kn(this,e.f),this.j=e.j,Wn(this,e.c),Hn(this,e.h),this.g=e.g,t=e.b;var n=new or;n.c=t.c,t.a&&(n.a=new Un(t.a),n.b=t.b),Qn(this,n),this.i=e.i}else e&&(n=String(e).match(Bn))?(this.a=!!t,Kn(this,n[1]||"",!0),this.j=Yn(n[2]||""),Wn(this,n[3]||"",!0),Hn(this,n[4]),this.g=Yn(n[5]||"",!0),Qn(this,n[6]||"",!0),this.i=Yn(n[7]||"")):(this.a=!!t,this.b=new or(null,this.a))}function Gn(e){return new zn(e)}function Kn(e,t,n){e.f=n?Yn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Wn(e,t,n){e.c=n?Yn(t,!0):t}function Hn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function Qn(e,t,n){t instanceof or?(e.b=t,function(e,t){t&&!e.f&&(ar(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(sr(this,t),cr(this,n,e))}),e)),e.f=t}(e.b,e.a)):(n||(t=Xn(t,rr)),e.b=new or(t,e.a))}function Jn(e,t,n){e.b.set(t,n)}function $n(e){return Jn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ce()).toString(36)),e}function Yn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Xn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Zn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Zn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}zn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Xn(t,er,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Xn(t,er,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(Xn(n,"/"==n.charAt(0)?nr:tr,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Xn(n,ir)),e.join("")};var er=/[#\/\?@]/g,tr=/[#\?:]/g,nr=/[#\?]/g,rr=/[#\?@]/g,ir=/#/g;function or(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function ar(e){e.a||(e.a=new Un,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function sr(e,t){ar(e),t=lr(e,t),Vn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Vn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&qn(e)))}function ur(e,t){return ar(e),t=lr(e,t),Vn(e.a.b,t)}function cr(e,t,n){sr(e,t),0<n.length&&(e.c=null,e.a.set(lr(e,t),De(n)),e.b+=n.length)}function lr(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(de=or.prototype).add=function(e,t){ar(this),this.c=null,e=lr(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},de.forEach=function(e,t){ar(this),this.a.forEach((function(n,r){Ae(n,(function(n){e.call(t,n,r,this)}),this)}),this)},de.L=function(){ar(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},de.K=function(e){ar(this);var t=[];if("string"===typeof e)ur(this,e)&&(t=Pe(t,this.a.get(lr(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=Pe(t,e[n])}return t},de.set=function(e,t){return ar(this),this.c=null,ur(this,e=lr(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},de.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},de.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var hr=function(e,t){this.b=e,this.a=t};function fr(e){this.g=e||dr,me.PerformanceNavigationTiming?e=0<(e=me.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(me.ia&&me.ia.ya&&me.ia.ya()&&me.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var dr=10;function pr(e){return!!e.b||!!e.a&&e.a.size>=e.f}function vr(e){return e.b?1:e.a?e.a.size:0}function mr(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function gr(e,t){e.a?e.a.add(t):e.b=t}function yr(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function br(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var i=fe(e.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return De(e.c)}function wr(){}function _r(){this.a=new wr}function Er(e,t,n){var r=n||"";try{jn(e,(function(e,n){var i=e;be(e)&&(i=Mt(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Bp){throw t.push(r+"type="+encodeURIComponent("_badmap")),Bp}}function Tr(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}fr.prototype.cancel=function(){var e,t;if(this.c=br(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=fe(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},wr.prototype.stringify=function(e){return me.JSON.stringify(e,void 0)},wr.prototype.parse=function(e){return me.JSON.parse(e,void 0)};var Sr=me.JSON.parse;function Ir(e){Ot.call(this),this.headers=new Un,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Cr,this.D=this.F=!1}ke(Ir,Ot);var Cr="",kr=/^https?$/i,xr=["POST","PUT"];function Nr(e){return"content-type"==e.toLowerCase()}function Ar(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Pr(e),Or(e)}function Pr(e){e.u||(e.u=!0,Rt(e,"complete"),Rt(e,"error"))}function Dr(e){if(e.b&&"undefined"!=typeof ve&&(!e.s[1]||4!=Lr(e)||2!=e.W()))if(e.l&&4==Lr(e))Jt(e.za,0,e);else if(Rt(e,"readystatechange"),4==Lr(e)){e.b=!1;try{var t,n=e.W();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.B).match(Bn)[1]||null;if(!o&&me.self&&me.self.location){var a=me.self.location.protocol;o=a.substr(0,a.length-1)}i=!kr.test(o?o.toLowerCase():"")}t=i}if(t)Rt(e,"complete"),Rt(e,"success");else{e.h=6;try{var s=2<Lr(e)?e.a.statusText:""}catch(n){s=""}e.f=s+" ["+e.W()+"]",Pr(e)}}finally{Or(e)}}}function Or(e,t){if(e.a){Rr(e);var n=e.a,r=e.s[0]?ge:null;e.a=null,e.s=null,t||Rt(e,"ready");try{n.onreadystatechange=r}catch(Bp){}}}function Rr(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(me.clearTimeout(e.m),e.m=null)}function Lr(e){return e.a?e.a.readyState:0}function Mr(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return qe(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Jn(e,t,n))}function Fr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function jr(e){this.pa=0,this.g=[],this.c=new nn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Fr("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Fr("baseRetryDelayMs",5e3,e),this.Ra=Fr("retryDelaySeedMs",1e4,e),this.Ma=Fr("forwardChannelMaxRetries",2,e),this.ma=Fr("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new fr(e&&e.concurrentRequestLimit),this.ka=new _r,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ur(e){if(Vr(e),3==e.v){var t=e.R++,n=Gn(e.B);Jn(n,"SID",e.J),Jn(n,"RID",t),Jn(n,"TYPE","terminate"),Kr(e,n),(t=new Sn(e,e.c,t,void 0)).H=2,t.i=$n(Gn(n)),n=!1,me.navigator&&me.navigator.sendBeacon&&(n=me.navigator.sendBeacon(t.i.toString(),"")),!n&&me.Image&&((new Image).src=t.i,n=!0),n||(t.a=ri(t.g,null),t.a.ba(t.i)),t.u=Ce(),Dn(t)}ti(e)}function qr(e){e.a&&(Jr(e),e.a.cancel(),e.a=null)}function Vr(e){qr(e),e.j&&(me.clearTimeout(e.j),e.j=null),Yr(e),e.b.cancel(),e.h&&("number"===typeof e.h&&me.clearTimeout(e.h),e.h=null)}function Br(e,t){e.g.push(new hr(e.Oa++,t)),3==e.v&&zr(e)}function zr(e){pr(e.b)||e.h||(e.h=!0,zt(e.Ba,e),e.u=0)}function Gr(e,t){var n;n=t?t.f:e.R++;var r=Gn(e.B);Jn(r,"SID",e.J),Jn(r,"RID",n),Jn(r,"AID",e.P),Kr(e,r),e.i&&e.l&&Mr(r,e.i,e.l),n=new Sn(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=Wr(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),gr(e.b,n),xn(n,r,t)}function Kr(e,t){e.f&&jn({},(function(e,n){Jn(t,n,e)}))}function Wr(e,t,n){n=Math.min(e.g.length,n);var r=e.f?Se(e.f.Ja,e.f,e):null;e:for(var i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Er(l,a,"req"+c+"_")}catch(Ui){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function Hr(e){e.a||e.j||(e.T=1,zt(e.Aa,e),e.o=0)}function Qr(e){return!(e.a||e.j||3<=e.o)&&(e.T++,e.j=dn(Se(e.Aa,e),Zr(e,e.o)),e.o++,!0)}function Jr(e){null!=e.s&&(me.clearTimeout(e.s),e.s=null)}function $r(e){e.a=new Sn(e,e.c,"rpc",e.T),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=Gn(e.la);Jn(t,"RID","rpc"),Jn(t,"SID",e.J),Jn(t,"CI",e.H?"0":"1"),Jn(t,"AID",e.P),Kr(e,t),Jn(t,"TYPE","xmlhttp"),e.i&&e.l&&Mr(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=$n(Gn(t)),n.j=null,n.I=!0,Nn(n,e)}function Yr(e){null!=e.m&&(me.clearTimeout(e.m),e.m=null)}function Xr(e,t){var n=null;if(e.a==t){Yr(e),Jr(e),e.a=null;var r=2}else{if(!mr(e.b,t))return;n=t.s,yr(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=Ce()-t.u;var i=e.u;Rt(r=sn(),new fn(r,n,t,i)),zr(e)}else Hr(e);else if(3==(i=t.h)||0==i&&0<e.I||!(1==r&&function(e,t){return!(vr(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.g=t.s.concat(e.g),!0):!(1==e.v||2==e.v||e.u>=(e.La?0:e.Ma))&&(e.h=dn(Se(e.Ba,e,t),Zr(e,e.u)),e.u++,!0))}(e,t)||2==r&&Qr(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:ei(e,5);break;case 4:ei(e,10);break;case 3:ei(e,6);break;default:ei(e,2)}}function Zr(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function ei(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=Se(e.Ya,e);n||(n=new zn("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||Kn(n,"https"),$n(n)),function(e,t){var n=new nn;if(me.Image){var r=new Image;r.onload=Ie(Tr,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ie(Tr,n,r,"TestLoadImage: error",!1,t),r.onabort=Ie(Tr,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ie(Tr,n,r,"TestLoadImage: timeout",!1,t),me.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else hn(2);e.v=0,e.f&&e.f.ra(t),ti(e),Vr(e)}function ti(e){e.v=0,e.I=-1,e.f&&(0==br(e.b).length&&0==e.g.length||(e.b.c.length=0,De(e.g),e.g.length=0),e.f.qa())}function ni(e,t,n){var r=function(e){return e instanceof zn?Gn(e):new zn(e,void 0)}(n);if(""!=r.c)t&&Wn(r,t+"."+r.c),Hn(r,r.h);else{var i=me.location;r=function(e,t,n,r){var i=new zn(null,void 0);return e&&Kn(i,e),t&&Wn(i,t),n&&Hn(i,n),r&&(i.g=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&qe(e.V,(function(e,t){Jn(r,t,e)})),t=e.A,n=e.na,t&&n&&Jn(r,t,n),Jn(r,"VER",e.ha),Kr(e,r),r}function ri(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ir(e.Na)).F=e.C,t}function ii(){}function oi(){if(He&&!(10<=Number(at)))throw Error("Environmental error: no available transport.")}function ai(e,t){Ot.call(this),this.a=new jr(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!Oe(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Oe(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new ci(this)}function si(e){_n.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function ui(){En.call(this),this.status=1}function ci(e){this.a=e}(de=Ir.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?gn(this.H):gn(bn),this.a.onreadystatechange=Se(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(o){return void Ar(this,o)}e=n||"";var i=new Un(this.headers);r&&jn(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nr,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.L()),n=me.FormData&&e instanceof me.FormData,!(0<=Ne(xr,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Rr(this),0<this.o&&((this.D=function(e){return He&&it(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Se(this.xa,this)):this.m=Jt(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){Ar(this,o)}},de.xa=function(){"undefined"!=typeof ve&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Rt(this,"timeout"),this.abort(8))},de.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,Rt(this,"complete"),Rt(this,"abort"),Or(this))},de.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Or(this,!0)),Ir.X.G.call(this)},de.za=function(){this.j||(this.A||this.l||this.g?Dr(this):this.Ua())},de.Ua=function(){Dr(this)},de.W=function(){try{return 2<Lr(this)?this.a.status:-1}catch(e){return-1}},de.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},de.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Sr(t)}},de.ua=function(){return this.h},de.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(de=jr.prototype).ha=8,de.v=1,de.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new Sn(this,this.c,e,void 0),r=this.l;if(this.O&&(r?ze(r=Ve(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Wr(this,n,t),Jn(i=Gn(this.B),"RID",e),Jn(i,"CVER",22),this.A&&Jn(i,"X-HTTP-Session-Id",this.A),Kr(this,i),this.i&&r&&Mr(i,this.i,r),gr(this.b,n),this.Ia&&Jn(i,"TYPE","init"),this.da?(Jn(i,"$req",t),Jn(i,"SID","null"),n.U=!0,xn(n,i,null)):xn(n,i,t),this.v=2}}else 3==this.v&&(e?Gr(this,e):0==this.g.length||pr(this.b)||Gr(this))},de.Aa=function(){if(this.j=null,$r(this),this.U&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=dn(Se(this.Ta,this),e)}},de.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,hn(10),qr(this),$r(this))},de.Sa=function(){null!=this.m&&(this.m=null,qr(this),Qr(this),hn(19))},de.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),hn(2)):(this.c.info("Failed to ping google.com"),hn(1))},(de=ii.prototype).ta=function(){},de.sa=function(){},de.ra=function(){},de.qa=function(){},de.Ja=function(){},oi.prototype.a=function(e,t){return new ai(e,t)},ke(ai,Ot),ai.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;hn(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=ni(e,null,e.fa),zr(e)},ai.prototype.close=function(){Ur(this.a)},ai.prototype.h=function(e){if("string"===typeof e){var t={};t.__data__=e,Br(this.a,t)}else this.l?((t={}).__data__=Mt(e),Br(this.a,t)):Br(this.a,e)},ai.prototype.G=function(){this.a.f=null,delete this.f,Ur(this.a),delete this.a,ai.X.G.call(this)},ke(si,_n),ke(ui,En),ke(ci,ii),ci.prototype.ta=function(){Rt(this.a,"a")},ci.prototype.sa=function(e){Rt(this.a,new si(e))},ci.prototype.ra=function(e){Rt(this.a,new ui(e))},ci.prototype.qa=function(){Rt(this.a,"b")},oi.prototype.createWebChannel=oi.prototype.a,ai.prototype.send=ai.prototype.h,ai.prototype.open=ai.prototype.g,ai.prototype.close=ai.prototype.close,pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,vn.COMPLETE="complete",yn.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.va,Ir.prototype.listenOnce=Ir.prototype.wa,Ir.prototype.getLastError=Ir.prototype.Qa,Ir.prototype.getLastErrorCode=Ir.prototype.ua,Ir.prototype.getStatus=Ir.prototype.W,Ir.prototype.getResponseJson=Ir.prototype.Pa,Ir.prototype.getResponseText=Ir.prototype.$,Ir.prototype.send=Ir.prototype.ba;var li=function(){return new oi},hi=function(){return sn()},fi=pn,di=vn,pi=on,vi={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},mi=yn,gi=Ir,yi=n(388),bi=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();bi.o=-1;var wi=new ce.Yd("@firebase/firestore");function _i(){return wi.logLevel}function Ei(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(wi.logLevel<=ce.in.DEBUG){var r=t.map(Ii);wi.debug.apply(wi,(0,yi.ev)(["Firestore (8.3.1): "+e],r))}}function Ti(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(wi.logLevel<=ce.in.ERROR){var r=t.map(Ii);wi.error.apply(wi,(0,yi.ev)(["Firestore (8.3.1): "+e],r))}}function Si(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(wi.logLevel<=ce.in.WARN){var r=t.map(Ii);wi.warn.apply(wi,(0,yi.ev)(["Firestore (8.3.1): "+e],r))}}function Ii(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ci(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+e;throw Ti(t),new Error(t)}function ki(e,t){e||Ci()}function xi(e,t){return e}function Ni(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ai=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ni(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function Pi(e,t){return e<t?-1:e>t?1:0}function Di(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Oi(e){return e+"\0"}function Ri(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Li(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Mi(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Fi(e){return null==e}function ji(e){return 0===e&&1/e==-1/0}function Ui(e){return"number"==typeof e&&Number.isInteger(e)&&!ji(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var qi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vi=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,yi.ZT)(t,e),t}(Error),Bi=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&Ci(),void 0===n?n=e.length-t:n>e.length-t&&Ci(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Vi(qi.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(Bi),Gi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return Gi.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vi(qi.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Vi(qi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vi(qi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Vi(qi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(Bi),Wi=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(zi.fromString(t))},e.fromName=function(t){return new e(zi.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===zi.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return zi.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new zi(t.slice()))},e}(),Hi=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return Pi(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();Hi.EMPTY_BYTE_STRING=new Hi("");var Qi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(e){if(ki(!!e),"string"==typeof e){var t=0,n=Qi.exec(e);if(ki(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$i(e.seconds),nanos:$i(e.nanos)}}function $i(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yi(e){return"string"==typeof e?Hi.fromBase64String(e):Hi.fromUint8Array(e)}var Xi=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vi(qi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vi(qi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Vi(qi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vi(qi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Pi(this.nanoseconds,e.nanoseconds):Pi(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}();function Zi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function eo(e){var t=e.mapValue.fields.__previous_value__;return Zi(t)?eo(t):t}function to(e){var t=Ji(e.mapValue.fields.__local_write_time__.timestampValue);return new Xi(t.seconds,t.nanos)}function no(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zi(e)?4:10:Ci()}function ro(e,t){var n=no(e);if(n!==no(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return to(e).isEqual(to(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ji(e.timestampValue),r=Ji(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Yi(e.bytesValue).isEqual(Yi(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $i(e.geoPointValue.latitude)===$i(t.geoPointValue.latitude)&&$i(e.geoPointValue.longitude)===$i(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $i(e.integerValue)===$i(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=$i(e.doubleValue),r=$i(t.doubleValue);return n===r?ji(n)===ji(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Di(e.arrayValue.values||[],t.arrayValue.values||[],ro);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ri(n)!==Ri(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ro(n[i],r[i])))return!1;return!0}(e,t);default:return Ci()}}function io(e,t){return void 0!==(e.values||[]).find((function(e){return ro(e,t)}))}function oo(e,t){var n=no(e),r=no(t);if(n!==r)return Pi(n,r);switch(n){case 0:return 0;case 1:return Pi(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=$i(e.integerValue||e.doubleValue),r=$i(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ao(e.timestampValue,t.timestampValue);case 4:return ao(to(e),to(t));case 5:return Pi(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Yi(e),r=Yi(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Pi(n[i],r[i]);if(0!==o)return o}return Pi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Pi($i(e.latitude),$i(t.latitude));return 0!==n?n:Pi($i(e.longitude),$i(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=oo(n[i],r[i]);if(o)return o}return Pi(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Pi(r[a],o[a]);if(0!==s)return s;var u=oo(n[r[a]],i[o[a]]);if(0!==u)return u}return Pi(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ci()}}function ao(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pi(e,t);var n=Ji(e),r=Ji(t),i=Pi(n.seconds,r.seconds);return 0!==i?i:Pi(n.nanos,r.nanos)}function so(e){return uo(e)}function uo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ji(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Yi(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wi.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=uo(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+uo(e.fields[o])}return t+"}"}(e.mapValue):Ci();var t,n}function co(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function lo(e){return!!e&&"integerValue"in e}function ho(e){return!!e&&"arrayValue"in e}function fo(e){return!!e&&"nullValue"in e}function po(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vo(e){return!!e&&"mapValue"in e}var mo=function(e,t){this.key=e,this.version=t},go=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this,t,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return(0,yi.ZT)(t,e),t.prototype.field=function(e){return this.objectValue.field(e)},t.prototype.data=function(){return this.objectValue},t.prototype.toProto=function(){return this.objectValue.proto},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.objectValue.isEqual(e.objectValue)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(mo),yo=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return(0,yi.ZT)(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(mo),bo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(mo),wo=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function _o(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new wo(e,t,n,r,i,o,a)}function Eo(e){var t=xi(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+so(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Fi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Lo(t.startAt)),t.endAt&&(n+="|ub:",n+=Lo(t.endAt)),t.h=n}return t.h}function To(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Fo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ro(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uo(e.startAt,t.startAt)&&Uo(e.endAt,t.endAt)}function So(e){return Wi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Io=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return(0,yi.ZT)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new Co(e,n,r):"array-contains"===n?new Ao(e,r):"in"===n?new Po(e,r):"not-in"===n?new Do(e,r):"array-contains-any"===n?new Oo(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new ko(e,n):new xo(e,n)},t.prototype.matches=function(e){var t=e.field(this.field);return"!="===this.op?null!==t&&this.m(oo(t,this.value)):null!==t&&no(this.value)===no(t)&&this.m(oo(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ci()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),Co=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=Wi.fromName(r.referenceValue),i}return(0,yi.ZT)(t,e),t.prototype.matches=function(e){var t=Wi.comparator(e.key,this.key);return this.m(t)},t}(Io),ko=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=No("in",n),r}return(0,yi.ZT)(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Io),xo=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=No("not-in",n),r}return(0,yi.ZT)(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Io);function No(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Wi.fromName(e.referenceValue)}))}var Ao=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return(0,yi.ZT)(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return ho(t)&&io(t.arrayValue,this.value)},t}(Io),Po=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return(0,yi.ZT)(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&io(this.value.arrayValue,t)},t}(Io),Do=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return(0,yi.ZT)(t,e),t.prototype.matches=function(e){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.field(this.field);return null!==t&&!io(this.value.arrayValue,t)},t}(Io),Oo=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return(0,yi.ZT)(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return!(!ho(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return io(t.value.arrayValue,e)}))},t}(Io),Ro=function(e,t){this.position=e,this.before=t};function Lo(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return so(e)})).join(",")}var Mo=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Fo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function jo(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Wi.comparator(Wi.fromName(a.referenceValue),n.key):oo(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Uo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ro(e.position[n],t.position[n]))return!1;return!0}var qo=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Vo(e,t,n,r,i,o,a,s){return new qo(e,t,n,r,i,o,a,s)}function Bo(e){return new qo(e)}function zo(e){return!Fi(e.limit)&&"F"===e.limitType}function Go(e){return!Fi(e.limit)&&"L"===e.limitType}function Ko(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Wo(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Ho(e){return null!==e.collectionGroup}function Qo(e){var t=xi(e);if(null===t.p){t.p=[];var n=Wo(t),r=Ko(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Mo(n)),t.p.push(new Mo(Ki.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Mo(Ki.keyField(),u))}}}return t.p}function Jo(e){var t=xi(e);if(!t.T)if("F"===t.limitType)t.T=_o(t.path,t.collectionGroup,Qo(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Qo(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Mo(o.field,a))}var s=t.endAt?new Ro(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Ro(t.startAt.position,!t.startAt.before):null;t.T=_o(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function $o(e,t,n){return new qo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yo(e,t){return To(Jo(e),Jo(t))&&e.limitType===t.limitType}function Xo(e){return Eo(Jo(e))+"|lt:"+e.limitType}function Zo(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+so(t.value);var t})).join(", ")+"]"),Fi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Lo(e.startAt)),e.endAt&&(t+=", endAt: "+Lo(e.endAt)),"Target("+t+")"}(Jo(e))+"; limitType="+e.limitType+")"}function ea(e,t){return function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!jo(e.startAt,Qo(e),t))&&(!e.endAt||!jo(e.endAt,Qo(e),t))}(e,t)}function ta(e){return function(t,n){for(var r=!1,i=0,o=Qo(e);i<o.length;i++){var a=o[i],s=na(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function na(e,t,n){var r=e.field.isKeyField()?Wi.comparator(t.key,n.key):function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?oo(r,i):Ci()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ci()}}var ra=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Xi(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}(),ia=function(){function e(e){this.fields=e,e.sort(Ki.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return Di(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),oa=function(){function e(e){this.proto=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.proto;for(var t=this.proto,n=0;n<e.length-1;++n){if(!t.mapValue.fields)return null;if(!vo(t=t.mapValue.fields[e.get(n)]))return null}return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.isEqual=function(e){return ro(this.proto,e.proto)},e}(),aa=function(){function e(e){void 0===e&&(e=oa.empty()),this.I=e,this.A=new Map}return e.prototype.set=function(e,t){return this.R(e,t),this},e.prototype.delete=function(e){return this.R(e,null),this},e.prototype.R=function(e,t){for(var n=this.A,r=0;r<e.length-1;++r){var i=e.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===no(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(e.lastSegment(),t)},e.prototype.v=function(){var e=this.P(Ki.emptyPath(),this.A);return null!=e?new oa(e):this.I},e.prototype.P=function(e,t){var n=this,r=!1,i=this.I.field(e),o=vo(i)?Object.assign({},i.mapValue.fields):{};return t.forEach((function(t,i){if(t instanceof Map){var a=n.P(e.child(i),t);null!=a&&(o[i]=a,r=!0)}else null!==t?(o[i]=t,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},e}();function sa(e){var t=[];return Li(e.fields||{},(function(e,n){var r=new Ki([e]);if(vo(n)){var i=sa(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new ia(t)}function ua(e,t){if(e.V){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ji(t)?"-0":t}}function ca(e){return{integerValue:""+e}}function la(e,t){return Ui(t)?ca(t):ua(e,t)}var ha=function(){this._=void 0};function fa(e,t,n){return e instanceof va?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ma?ga(e,t):e instanceof ya?ba(e,t):function(e,t){var n=pa(e,t),r=_a(n)+_a(e.S);return lo(n)&&lo(e.S)?ca(r):ua(e.D,r)}(e,t)}function da(e,t,n){return e instanceof ma?ga(e,t):e instanceof ya?ba(e,t):n}function pa(e,t){return e instanceof wa?lo(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var va=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t}(ha),ma=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,yi.ZT)(t,e),t}(ha);function ga(e,t){for(var n=Ea(t),r=function(e){n.some((function(t){return ro(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ya=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,yi.ZT)(t,e),t}(ha);function ba(e,t){for(var n=Ea(t),r=function(e){n=n.filter((function(t){return!ro(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var wa=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).D=t,r.S=n,r}return(0,yi.ZT)(t,e),t}(ha);function _a(e){return $i(e.integerValue||e.doubleValue)}function Ea(e){return ho(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ta=function(e,t){this.field=e,this.transform=t},Sa=function(e,t){this.version=e,this.transformResults=t},Ia=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function Ca(e,t){return void 0!==e.updateTime?t instanceof go&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t instanceof go}var ka=function(){};function xa(e,t,n){return e instanceof Oa?function(e,t,n){var r=e.value,i=Ma(e.fieldTransforms,t,n.transformResults);return r=ja(e.fieldTransforms,r,i),new go(e.key,n.version,r,{hasCommittedMutations:!0})}(e,t,n):e instanceof Ra?function(e,t,n){if(!Ca(e.precondition,t))return new bo(e.key,n.version);var r=La(e,t,Ma(e.fieldTransforms,t,n.transformResults));return new go(e.key,n.version,r,{hasCommittedMutations:!0})}(e,t,n):function(e,t,n){return new yo(e.key,n.version,{hasCommittedMutations:!0})}(e,0,n)}function Na(e,t,n){return e instanceof Oa?function(e,t,n){if(!Ca(e.precondition,t))return t;var r=e.value,i=Fa(e.fieldTransforms,n,t);r=ja(e.fieldTransforms,r,i);var o=Da(t);return new go(e.key,o,r,{hasLocalMutations:!0})}(e,t,n):e instanceof Ra?function(e,t,n){if(!Ca(e.precondition,t))return t;var r=Da(t),i=La(e,t,Fa(e.fieldTransforms,n,t));return new go(e.key,r,i,{hasLocalMutations:!0})}(e,t,n):function(e,t){return Ca(e.precondition,t)?new yo(e.key,ra.min()):t}(e,t)}function Aa(e,t){return function(e,t){for(var n=null,r=0,i=e;r<i.length;r++){var o=i[r],a=t instanceof go?t.field(o.field):void 0,s=pa(o.transform,a||null);null!=s&&(n=null==n?(new aa).set(o.field,s):n.set(o.field,s))}return n?n.v():null}(e.fieldTransforms,t)}function Pa(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Di(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ma&&t instanceof ma||e instanceof ya&&t instanceof ya?Di(e.elements,t.elements,ro):e instanceof wa&&t instanceof wa?ro(e.S,t.S):e instanceof va&&t instanceof va}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Da(e){return e instanceof go?e.version:ra.min()}var Oa=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,yi.ZT)(t,e),t}(ka),Ra=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,yi.ZT)(t,e),t}(ka);function La(e,t,n){var r;return r=function(e,t){var n=new aa(t);return e.fieldMask.fields.forEach((function(t){if(!t.isEmpty()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.v()}(e,r=t instanceof go?t.data():oa.empty()),ja(e.fieldTransforms,r,n)}function Ma(e,t,n){var r=[];ki(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=null;t instanceof go&&(s=t.field(o.field)),r.push(da(a,s,n[i]))}return r}function Fa(e,t,n){for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=null;n instanceof go&&(u=n.field(a.field)),r.push(fa(s,u,t))}return r}function ja(e,t,n){for(var r=new aa(t),i=0;i<e.length;i++){var o=e[i];r.set(o.field,n[i])}return r.v()}var Ua,qa,Va=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,yi.ZT)(t,e),t}(ka),Ba=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,yi.ZT)(t,e),t}(ka),za=function(e){this.count=e};function Ga(e){switch(e){case qi.OK:return Ci();case qi.CANCELLED:case qi.UNKNOWN:case qi.DEADLINE_EXCEEDED:case qi.RESOURCE_EXHAUSTED:case qi.INTERNAL:case qi.UNAVAILABLE:case qi.UNAUTHENTICATED:return!1;case qi.INVALID_ARGUMENT:case qi.NOT_FOUND:case qi.ALREADY_EXISTS:case qi.PERMISSION_DENIED:case qi.FAILED_PRECONDITION:case qi.ABORTED:case qi.OUT_OF_RANGE:case qi.UNIMPLEMENTED:case qi.DATA_LOSS:return!0;default:return Ci()}}function Ka(e){if(void 0===e)return Ti("GRPC error has no .code"),qi.UNKNOWN;switch(e){case Ua.OK:return qi.OK;case Ua.CANCELLED:return qi.CANCELLED;case Ua.UNKNOWN:return qi.UNKNOWN;case Ua.DEADLINE_EXCEEDED:return qi.DEADLINE_EXCEEDED;case Ua.RESOURCE_EXHAUSTED:return qi.RESOURCE_EXHAUSTED;case Ua.INTERNAL:return qi.INTERNAL;case Ua.UNAVAILABLE:return qi.UNAVAILABLE;case Ua.UNAUTHENTICATED:return qi.UNAUTHENTICATED;case Ua.INVALID_ARGUMENT:return qi.INVALID_ARGUMENT;case Ua.NOT_FOUND:return qi.NOT_FOUND;case Ua.ALREADY_EXISTS:return qi.ALREADY_EXISTS;case Ua.PERMISSION_DENIED:return qi.PERMISSION_DENIED;case Ua.FAILED_PRECONDITION:return qi.FAILED_PRECONDITION;case Ua.ABORTED:return qi.ABORTED;case Ua.OUT_OF_RANGE:return qi.OUT_OF_RANGE;case Ua.UNIMPLEMENTED:return qi.UNIMPLEMENTED;case Ua.DATA_LOSS:return qi.DATA_LOSS;default:return Ci()}}(qa=Ua||(Ua={}))[qa.OK=0]="OK",qa[qa.CANCELLED=1]="CANCELLED",qa[qa.UNKNOWN=2]="UNKNOWN",qa[qa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qa[qa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qa[qa.NOT_FOUND=5]="NOT_FOUND",qa[qa.ALREADY_EXISTS=6]="ALREADY_EXISTS",qa[qa.PERMISSION_DENIED=7]="PERMISSION_DENIED",qa[qa.UNAUTHENTICATED=16]="UNAUTHENTICATED",qa[qa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qa[qa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qa[qa.ABORTED=10]="ABORTED",qa[qa.OUT_OF_RANGE=11]="OUT_OF_RANGE",qa[qa.UNIMPLEMENTED=12]="UNIMPLEMENTED",qa[qa.INTERNAL=13]="INTERNAL",qa[qa.UNAVAILABLE=14]="UNAVAILABLE",qa[qa.DATA_LOSS=15]="DATA_LOSS";var Wa=function(){function e(e,t){this.comparator=e,this.root=t||Qa.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Qa.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qa.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ha(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ha(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ha(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ha(this.root,e,this.comparator,!0)},e}(),Ha=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Qa=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ci();if(this.right.isRed())throw Ci();var e=this.left.check();if(e!==this.right.check())throw Ci();return e+(this.isRed()?0:1)},e}();Qa.EMPTY=null,Qa.RED=!0,Qa.BLACK=!1,Qa.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Qa(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var Ja=function(){function e(e){this.comparator=e,this.data=new Wa(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new $a(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new $a(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),$a=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Ya=new Wa(Wi.comparator);function Xa(){return Ya}function Za(){return Xa()}var es=new Wa(Wi.comparator);function ts(){return es}var ns=new Wa(Wi.comparator);function rs(){return ns}var is=new Ja(Wi.comparator);function os(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=is,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var as=new Ja(Pi);function ss(){return as}var us=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,cs.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ra.min(),r,ss(),Xa(),os())},e}(),cs=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Hi.EMPTY_BYTE_STRING,n,os(),os(),os())},e}(),ls=function(e,t,n,r){this.C=e,this.removedTargetIds=t,this.key=n,this.N=r},hs=function(e,t){this.targetId=e,this.$=t},fs=function(e,t,n,r){void 0===n&&(n=Hi.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ds=function(){function e(){this.F=0,this.O=ms(),this.k=Hi.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),e.prototype.U=function(e){e.approximateByteSize()>0&&(this.L=!0,this.k=e)},e.prototype.K=function(){var e=os(),t=os(),n=os();return this.O.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ci()}})),new cs(this.k,this.M,e,t,n)},e.prototype.W=function(){this.L=!1,this.O=ms()},e.prototype.j=function(e,t){this.L=!0,this.O=this.O.insert(e,t)},e.prototype.G=function(e){this.L=!0,this.O=this.O.remove(e)},e.prototype.H=function(){this.F+=1},e.prototype.J=function(){this.F-=1},e.prototype.Y=function(){this.L=!0,this.M=!0},e}(),ps=function(){function e(e){this.X=e,this.Z=new Map,this.tt=Xa(),this.et=vs(),this.nt=new Ja(Pi)}return e.prototype.st=function(e){for(var t=0,n=e.C;t<n.length;t++){var r=n[t];e.N instanceof go?this.it(r,e.N):e.N instanceof yo&&this.rt(r,e.key,e.N)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.rt(r,e.key,e.N)},e.prototype.ot=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ct(n);switch(e.state){case 0:t.at(n)&&r.U(e.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(e.resumeToken);break;case 2:r.J(),r.B||t.removeTarget(n);break;case 3:t.at(n)&&(r.Y(),r.U(e.resumeToken));break;case 4:t.at(n)&&(t.ut(n),r.U(e.resumeToken));break;default:Ci()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Z.forEach((function(e,r){n.at(r)&&t(r)}))},e.prototype.ht=function(e){var t=e.targetId,n=e.$.count,r=this.lt(t);if(r){var i=r.target;if(So(i))if(0===n){var o=new Wi(i.path);this.rt(t,o,new yo(o,ra.min()))}else ki(1===n);else this.ft(t)!==n&&(this.ut(t),this.nt=this.nt.add(t))}},e.prototype.dt=function(e){var t=this,n=new Map;this.Z.forEach((function(r,i){var o=t.lt(i);if(o){if(r.current&&So(o.target)){var a=new Wi(o.target.path);null!==t.tt.get(a)||t.wt(i,a)||t.rt(i,a,new yo(a,e))}r.q&&(n.set(i,r.K()),r.W())}}));var r=os();this.et.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.lt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new us(e,n,this.nt,this.tt,r);return this.tt=Xa(),this.et=vs(),this.nt=new Ja(Pi),i},e.prototype.it=function(e,t){if(this.at(e)){var n=this.wt(e,t.key)?2:0;this.ct(e).j(t.key,n),this.tt=this.tt.insert(t.key,t),this.et=this.et.insert(t.key,this._t(t.key).add(e))}},e.prototype.rt=function(e,t,n){if(this.at(e)){var r=this.ct(e);this.wt(e,t)?r.j(t,1):r.G(t),this.et=this.et.insert(t,this._t(t).delete(e)),n&&(this.tt=this.tt.insert(t,n))}},e.prototype.removeTarget=function(e){this.Z.delete(e)},e.prototype.ft=function(e){var t=this.ct(e).K();return this.X.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.H=function(e){this.ct(e).H()},e.prototype.ct=function(e){var t=this.Z.get(e);return t||(t=new ds,this.Z.set(e,t)),t},e.prototype._t=function(e){var t=this.et.get(e);return t||(t=new Ja(Pi),this.et=this.et.insert(e,t)),t},e.prototype.at=function(e){var t=null!==this.lt(e);return t||Ei("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.lt=function(e){var t=this.Z.get(e);return t&&t.B?null:this.X.yt(e)},e.prototype.ut=function(e){var t=this;this.Z.set(e,new ds),this.X.getRemoteKeysForTarget(e).forEach((function(n){t.rt(e,n,null)}))},e.prototype.wt=function(e,t){return this.X.getRemoteKeysForTarget(e).has(t)},e}();function vs(){return new Wa(Wi.comparator)}function ms(){return new Wa(Wi.comparator)}var gs={asc:"ASCENDING",desc:"DESCENDING"},ys={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bs=function(e,t){this.databaseId=e,this.V=t};function ws(e,t){return e.V?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function _s(e,t){return e.V?t.toBase64():t.toUint8Array()}function Es(e,t){return ws(e,t.toTimestamp())}function Ts(e){return ki(!!e),ra.fromTimestamp(function(e){var t=Ji(e);return new Xi(t.seconds,t.nanos)}(e))}function Ss(e,t){return function(e){return new zi(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Is(e){var t=zi.fromString(e);return ki(Js(t)),t}function Cs(e,t){return Ss(e.databaseId,t.path)}function ks(e,t){var n=Is(t);if(n.get(1)!==e.databaseId.projectId)throw new Vi(qi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vi(qi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wi(Ps(n))}function xs(e,t){return Ss(e.databaseId,t)}function Ns(e){var t=Is(e);return 4===t.length?zi.emptyPath():Ps(t)}function As(e){return new zi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ps(e){return ki(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ds(e,t,n){return{name:Cs(e,t),fields:n.proto.mapValue.fields}}function Os(e,t,n){var r=ks(e,t.name),i=Ts(t.updateTime),o=new oa({mapValue:{fields:t.fields}});return new go(r,i,o,{hasCommittedMutations:!!n})}function Rs(e,t){var n;if(t instanceof Oa)n={update:Ds(e,t.key,t.value)};else if(t instanceof Va)n={delete:Cs(e,t.key)};else if(t instanceof Ra)n={update:Ds(e,t.key,t.data),updateMask:Qs(t.fieldMask)};else{if(!(t instanceof Ba))return Ci();n={verify:Cs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof va)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ma)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ya)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wa)return{fieldPath:t.field.canonicalString(),increment:n.S};throw Ci()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Es(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ci()}(e,t.precondition)),n}function Ls(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ia.updateTime(Ts(e.updateTime)):void 0!==e.exists?Ia.exists(e.exists):Ia.none()}(t.currentDocument):Ia.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ki("REQUEST_TIME"===t.setToServerValue),n=new va;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ma(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ya(i)}else"increment"in t?n=new wa(e,t.increment):Ci();var o=Ki.fromServerFormat(t.fieldPath);return new Ta(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=ks(e,t.update.name),o=new oa({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new ia(t.map((function(e){return Ki.fromServerFormat(e)})))}(t.updateMask);return new Ra(i,o,a,n,r)}return new Oa(i,o,n,r)}if(t.delete){var s=ks(e,t.delete);return new Va(s,n)}if(t.verify){var u=ks(e,t.verify);return new Ba(u,n)}return Ci()}function Ms(e,t){return{documents:[xs(e,t.path)]}}function Fs(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=xs(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=xs(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(po(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NAN"}};if(fo(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(po(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NAN"}};if(fo(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(e.field),op:zs(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Gs(e.field),direction:Bs(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.V||Fi(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=qs(t.startAt)),t.endAt&&(n.structuredQuery.endAt=qs(t.endAt)),n}function js(e){var t=Ns(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ki(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Us(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Mo(Ks(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Fi(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Vs(n.startAt));var l=null;return n.endAt&&(l=Vs(n.endAt)),Vo(t,i,s,a,u,"F",c,l)}function Us(e){return e?void 0!==e.unaryFilter?[Hs(e)]:void 0!==e.fieldFilter?[Ws(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Us(e)})).reduce((function(e,t){return e.concat(t)})):Ci():[]}function qs(e){return{before:e.before,values:e.position}}function Vs(e){var t=!!e.before,n=e.values||[];return new Ro(n,t)}function Bs(e){return gs[e]}function zs(e){return ys[e]}function Gs(e){return{fieldPath:e.canonicalString()}}function Ks(e){return Ki.fromServerFormat(e.fieldPath)}function Ws(e){return Io.create(Ks(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ci()}}(e.fieldFilter.op),e.fieldFilter.value)}function Hs(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ks(e.unaryFilter.field);return Io.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ks(e.unaryFilter.field);return Io.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ks(e.unaryFilter.field);return Io.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ks(e.unaryFilter.field);return Io.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ci()}}function Qs(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Js(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function $s(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Xs(t)),t=Ys(e.get(n),t);return Xs(t)}function Ys(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Xs(e){return e+"\x01\x01"}function Zs(e){var t=e.length;if(ki(t>=2),2===t)return ki("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),zi.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&Ci(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:Ci()}o=a+2}return new zi(r)}var eu=function(e,t){this.seconds=e,this.nanoseconds=t},tu=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};tu.store="owner",tu.key="owner";var nu=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};nu.store="mutationQueues",nu.keyPath="userId";var ru=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ru.store="mutations",ru.keyPath="batchId",ru.userMutationsIndex="userMutationsIndex",ru.userMutationsKeyPath=["userId","batchId"];var iu=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,$s(t)]},e.key=function(e,t,n){return[e,$s(t),n]},e}();iu.store="documentMutations",iu.PLACEHOLDER=new iu;var ou=function(e,t){this.path=e,this.readTime=t},au=function(e,t){this.path=e,this.version=t},su=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};su.store="remoteDocuments",su.readTimeIndex="readTimeIndex",su.readTimeIndexPath="readTime",su.collectionReadTimeIndex="collectionReadTimeIndex",su.collectionReadTimeIndexPath=["parentPath","readTime"];var uu=function(e){this.byteSize=e};uu.store="remoteDocumentGlobal",uu.key="remoteDocumentGlobalKey";var cu=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};cu.store="targets",cu.keyPath="targetId",cu.queryTargetsIndexName="queryTargetsIndex",cu.queryTargetsKeyPath=["canonicalId","targetId"];var lu=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};lu.store="targetDocuments",lu.keyPath=["targetId","path"],lu.documentTargetsIndex="documentTargetsIndex",lu.documentTargetsKeyPath=["path","targetId"];var hu=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};hu.key="targetGlobalKey",hu.store="targetGlobal";var fu=function(e,t){this.collectionId=e,this.parent=t};fu.store="collectionParents",fu.keyPath=["collectionId","parent"];var du=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};du.store="clientMetadata",du.keyPath="clientId";var pu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};pu.store="bundles",pu.keyPath="bundleId";var vu=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};vu.store="namedQueries",vu.keyPath="name";var mu=(0,yi.ev)((0,yi.ev)([],(0,yi.ev)((0,yi.ev)([],(0,yi.ev)((0,yi.ev)([],(0,yi.ev)((0,yi.ev)([],[nu.store,ru.store,iu.store,su.store,cu.store,tu.store,hu.store,lu.store]),[du.store])),[uu.store])),[fu.store])),[pu.store,vu.store]),gu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yu=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),bu=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},wu=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&Ci(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),_u=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.gt=new bu,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){t.error?n.gt.reject(new Su(e,t.error)):n.gt.resolve()},this.transaction.onerror=function(t){var r=Nu(t.target.error);n.gt.reject(new Su(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Su(n,t)}},Object.defineProperty(e.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.gt.reject(e),this.aborted||(Ei("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new Cu(t)},e}(),Eu=function(){function e(t,n,r){this.name=t,this.version=n,this.Tt=r,12.2===e.It((0,le.z$)())&&Ti("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return Ei("SimpleDb","Removing database:",e),ku(window.indexedDB.deleteDatabase(e)).toPromise()},e.At=function(){if("undefined"==typeof indexedDB)return!1;if(e.Rt())return!0;var t=(0,le.z$)(),n=e.It(t),r=0<n&&n<10,i=e.bt(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.Rt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.vt)},e.Pt=function(e,t){return e.store(t)},e.It=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.bt=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.Vt=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n=this;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ei("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new Su(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new Vi(qi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Su(e,n))},i.onupgradeneeded=function(e){Ei("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Tt.St(t,i.transaction,e.oldVersion,n.version).next((function(){Ei("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(e){return n.Dt(e)}),this.db)]}}))}))},e.prototype.Ct=function(e){this.Dt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,yi.Jh)(this,(function(c){switch(c.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,c,l;return(0,yi.Jh)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.Vt(e)];case 2:return s.db=h.sent(),t=_u.open(s.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),wu.reject(e)})).toPromise(),u={},a.catch((function(){})),[4,t.Et];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Ei("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),Tu=function(){function e(e){this.xt=e,this.Nt=!1,this.$t=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.xt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Nt=!0},e.prototype.Ot=function(e){this.$t=e},e.prototype.delete=function(){return ku(this.xt.delete())},e}(),Su=function(e){function t(t,n){var r=this;return(r=e.call(this,qi.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,yi.ZT)(t,e),t}(Vi);function Iu(e){return"IndexedDbTransactionError"===e.name}var Cu=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(Ei("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ei("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ku(n)},e.prototype.add=function(e){return Ei("SimpleDb","ADD",this.store.name,e,e),ku(this.store.add(e))},e.prototype.get=function(e){var t=this;return ku(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ei("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return Ei("SimpleDb","DELETE",this.store.name,e),ku(this.store.delete(e))},e.prototype.count=function(){return Ei("SimpleDb","COUNT",this.store.name),ku(this.store.count())},e.prototype.kt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Mt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Lt=function(e,t){Ei("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,(function(e,t,n){return n.delete()}))},e.prototype.qt=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Mt(r,t)},e.prototype.Ut=function(e){var t=this.cursor({});return new wu((function(n,r){t.onerror=function(e){var t=Nu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.Mt=function(e,t){var n=[];return new wu((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Tu(i),a=t(i.primaryKey,i.value,o);if(a instanceof wu){var s=a.catch((function(e){return o.done(),wu.reject(e)}));n.push(s)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}})).next((function(){return wu.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Bt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ku(e){return new wu((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Nu(e.target.error);n(t)}}))}var xu=!1;function Nu(e){var t=Eu.It((0,le.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Vi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xu||(xu=!0,setTimeout((function(){throw r}),0)),r}}return e}var Au=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Qt=t,r.currentSequenceNumber=n,r}return(0,yi.ZT)(t,e),t}(yu);function Pu(e,t){var n=xi(e);return Eu.Pt(n.Qt,t)}var Du=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=xa(o,t,r[i]))}return t},e.prototype.applyToLocalView=function(e,t){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(e)&&(t=Na(a,t,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var a;(a=o[i]).key.isEqual(e)&&(t=Na(a,t,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),os())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Di(this.mutations,e.mutations,(function(e,t){return Pa(e,t)}))&&Di(this.baseMutations,e.baseMutations,(function(e,t){return Pa(e,t)}))},e}(),Ou=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){ki(t.mutations.length===r.length);for(var i=rs(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Ru=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=ra.min()),void 0===o&&(o=ra.min()),void 0===a&&(a=Hi.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),Lu=function(e){this.Kt=e};function Mu(e,t){if(t.document)return Os(e.Kt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Wi.fromSegments(t.noDocument.path),r=Vu(t.noDocument.readTime);return new yo(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var i=Wi.fromSegments(t.unknownDocument.path);return r=Vu(t.unknownDocument.version),new bo(i,r)}return Ci()}function Fu(e,t,n){var r=ju(n),i=t.key.path.popLast().toArray();if(t instanceof go){var o=function(e,t){return{name:Cs(e,t.key),fields:t.toProto().mapValue.fields,updateTime:ws(e,t.version.toTimestamp())}}(e.Kt,t),a=t.hasCommittedMutations;return new su(null,null,o,a,r,i)}if(t instanceof yo){var s=t.key.path.toArray(),u=qu(t.version);return a=t.hasCommittedMutations,new su(null,new ou(s,u),null,a,r,i)}if(t instanceof bo){var c=t.key.path.toArray(),l=qu(t.version);return new su(new au(c,l),null,null,!0,r,i)}return Ci()}function ju(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Uu(e){var t=new Xi(e[0],e[1]);return ra.fromTimestamp(t)}function qu(e){var t=e.toTimestamp();return new eu(t.seconds,t.nanoseconds)}function Vu(e){var t=new Xi(e.seconds,e.nanoseconds);return ra.fromTimestamp(t)}function Bu(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ls(e.Kt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return Ls(e.Kt,t)})),s=Xi.fromMillis(t.localWriteTimeMs);return new Du(t.batchId,s,n,a)}function zu(e){var t,n,r=Vu(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Vu(e.lastLimboFreeSnapshotVersion):ra.min();return void 0!==e.query.documents?(ki(1===(n=e.query).documents.length),t=Jo(Bo(Ns(n.documents[0])))):t=function(e){return Jo(js(e))}(e.query),new Ru(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Hi.fromBase64String(e.resumeToken))}function Gu(e,t){var n,r=qu(t.snapshotVersion),i=qu(t.lastLimboFreeSnapshotVersion);n=So(t.target)?Ms(e.Kt,t.target):Fs(e.Kt,t.target);var o=t.resumeToken.toBase64();return new cu(t.targetId,Eo(t.target),r,o,t.sequenceNumber,i,n)}function Ku(e){var t=js({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$o(t,t.limit,"L"):t}var Wu=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Hu(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Vu(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Hu(e).put({bundleId:(n=t).id,createTime:qu(Ts(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return Qu(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ku(t.bundledQuery),readTime:Vu(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return Qu(e).put(function(e){return{name:e.name,readTime:qu(Ts(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Hu(e){return Pu(e,pu.store)}function Qu(e){return Pu(e,vu.store)}var Ju=function(){function e(){this.Wt=new $u}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Wt.add(t),wu.resolve()},e.prototype.getCollectionParents=function(e,t){return wu.resolve(this.Wt.getEntries(t))},e}(),$u=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ja(zi.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Ja(zi.comparator)).toArray()},e}(),Yu=function(){function e(){this.jt=new $u}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.jt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.jt.add(t)}));var o={collectionId:r,parent:$s(i)};return Xu(e).put(o)}return wu.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Oi(t),""],!1,!0);return Xu(e).kt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Zs(o.parent))}return n}))},e}();function Xu(e){return Pu(e,fu.store)}var Zu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ec=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function tc(e,t,n){var r=e.store(ru.store),i=e.store(iu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.qt({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){ki(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=iu.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return wu.waitFor(o).next((function(){return c}))}function nc(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ci();t=e.noDocument}return JSON.stringify(t).length}ec.DEFAULT_COLLECTION_PERCENTILE=10,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ec.DEFAULT=new ec(41943040,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ec.DISABLED=new ec(-1,0,0);var rc=function(){function e(e,t,n,r){this.userId=e,this.D=t,this.Gt=n,this.referenceDelegate=r,this.zt={}}return e.Ht=function(t,n,r,i){return ki(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oc(e).qt({index:ru.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=ac(e),a=oc(e);return a.add({}).next((function(s){ki("number"==typeof s);for(var u=new Du(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return Rs(e.Kt,t)})),i=n.mutations.map((function(t){return Rs(e.Kt,t)}));return new ru(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Ja((function(e,t){return Pi(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=iu.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,iu.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Gt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.zt[s]=u.keys()})),wu.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return oc(e).get(t).next((function(e){return e?(ki(e.userId===n.userId),Bu(n.D,e)):null}))},e.prototype.Jt=function(e,t){var n=this;return this.zt[t]?wu.resolve(this.zt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.zt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return oc(e).qt({index:ru.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(ki(t.batchId>=r),o=Bu(n.D,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return oc(e).qt({index:ru.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oc(e).kt(ru.userMutationsIndex,n).next((function(e){return e.map((function(e){return Bu(t.D,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=iu.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ac(e).qt({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Zs(u);if(s===n.userId&&t.path.isEqual(l))return oc(e).get(c).next((function(e){if(!e)throw Ci();ki(e.userId===n.userId),o.push(Bu(n.D,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ja(Pi),i=[];return t.forEach((function(t){var o=iu.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=ac(e).qt({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Zs(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),wu.waitFor(i).next((function(){return n.Yt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=iu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ja(Pi);return ac(e).qt({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Zs(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Yt(e,s)}))},e.prototype.Yt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(oc(e).get(t).next((function(e){if(null===e)throw Ci();ki(e.userId===n.userId),r.push(Bu(n.D,e))})))})),wu.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return tc(e.Qt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Xt(t.batchId)})),wu.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Xt=function(e){delete this.zt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wu.resolve();var r=IDBKeyRange.lowerBound(iu.prefixForUser(t.userId)),i=[];return ac(e).qt({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Zs(e[1]);i.push(o)}else r.done()})).next((function(){ki(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return ic(e,this.userId,t)},e.prototype.Zt=function(e){var t=this;return sc(e).get(this.userId).next((function(e){return e||new nu(t.userId,-1,"")}))},e}();function ic(e,t,n){var r=iu.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ac(e).qt({range:o,Bt:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function oc(e){return Pu(e,ru.store)}function ac(e){return Pu(e,iu.store)}function sc(e){return Pu(e,nu.store)}var uc=function(){function e(e){this.te=e}return e.prototype.next=function(){return this.te+=2,this.te},e.ee=function(){return new e(0)},e.ne=function(){return new e(-1)},e}(),cc=function(){function e(e,t){this.referenceDelegate=e,this.D=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.se(e).next((function(n){var r=new uc(n.highestTargetId);return n.highestTargetId=r.next(),t.ie(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.se(e).next((function(e){return ra.fromTimestamp(new Xi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.se(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.se(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ie(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.re(e,t).next((function(){return n.se(e).next((function(r){return r.targetCount+=1,n.oe(t,r),n.ie(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.re(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return lc(e).delete(t.targetId)})).next((function(){return n.se(e)})).next((function(t){return ki(t.targetCount>0),t.targetCount-=1,n.ie(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return lc(e).qt((function(a,s){var u=zu(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return wu.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return lc(e).qt((function(e,n){var r=zu(n);t(r)}))},e.prototype.se=function(e){return hc(e).get(hu.key).next((function(e){return ki(null!==e),e}))},e.prototype.ie=function(e,t){return hc(e).put(hu.key,t)},e.prototype.re=function(e,t){return lc(e).put(Gu(this.D,t))},e.prototype.oe=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.se(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=Eo(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return lc(e).qt({range:r,index:cu.queryTargetsIndexName},(function(e,n,r){var o=zu(n);To(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=fc(e);return t.forEach((function(t){var a=$s(t.path);i.push(o.put(new lu(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),wu.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=fc(e);return wu.forEach(t,(function(t){var o=$s(t.path);return wu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=fc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=fc(e),i=os();return r.qt({range:n,Bt:!0},(function(e,t,n){var r=Zs(e[1]),o=new Wi(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=$s(t.path),r=IDBKeyRange.bound([n],[Oi(n)],!1,!0),i=0;return fc(e).qt({index:lu.documentTargetsIndex,Bt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.yt=function(e,t){return lc(e).get(t).next((function(e){return e?zu(e):null}))},e}();function lc(e){return Pu(e,cu.store)}function hc(e){return Pu(e,hu.store)}function fc(e){return Pu(e,lu.store)}function dc(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){if(e.code!==qi.FAILED_PRECONDITION||e.message!==gu)throw e;return Ei("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function pc(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Pi(n,i);return 0===a?Pi(r,o):a}var vc=function(){function e(e){this.ce=e,this.buffer=new Ja(pc),this.ae=0}return e.prototype.ue=function(){return++this.ae},e.prototype.he=function(e){var t=[e,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();pc(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),mc=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.le=!1,this.fe=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(e)},e.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),e.prototype.de=function(e){var t=this,n=this.le?3e5:6e4;Ei("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,yi.mG)(t,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Iu(t=n.sent())?(Ei("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,dc(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),gc=function(){function e(e,t){this.we=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.we._e(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return wu.resolve(bi.o);var r=new vc(t);return this.we.forEachTarget(e,(function(e){return r.he(e.sequenceNumber)})).next((function(){return n.we.me(e,(function(e){return r.he(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.we.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.we.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ei("LruGarbageCollector","Garbage collection skipped; disabled"),wu.resolve(Zu)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ei("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Zu):n.ye(e,t)}))},e.prototype.getCacheSize=function(e){return this.we.getCacheSize(e)},e.prototype.ye=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ei("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),_i()<=ce.in.DEBUG&&Ei("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),wu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),yc=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new gc(e,t)}(this,t)}return e.prototype._e=function(e){var t=this.ge(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.ge=function(e){var t=0;return this.me(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.me=function(e,t){return this.pe(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return bc(e,n)},e.prototype.removeReference=function(e,t,n){return bc(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return bc(e,t)},e.prototype.Ee=function(e,t){return function(e,t){var n=!1;return sc(e).Ut((function(r){return ic(e,r,t).next((function(e){return e&&(n=!0),wu.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(e,(function(a,s){if(s<=t){var u=n.Ee(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),fc(e).delete([0,$s(a.path)])}))}));i.push(u)}})).next((function(){return wu.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return bc(e,t)},e.prototype.pe=function(e,t){var n,r=fc(e),i=bi.o;return r.qt({index:lu.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==bi.o&&t(new Wi(Zs(n)),i),i=s,n=a):i=bi.o})).next((function(){i!==bi.o&&t(new Wi(Zs(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function bc(e,t){return fc(e).put(function(e,t){return new lu(0,$s(e.path),t)}(t,e.currentSequenceNumber))}var wc=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){Li(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return Mi(this.inner)},e}(),_c=function(){function e(){this.changes=new wc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:ra.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{maybeDocument:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{maybeDocument:null,readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wu.resolve(n.maybeDocument):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),Ec=function(){function e(e,t){this.D=e,this.Gt=t}return e.prototype.addEntry=function(e,t,n){return Ic(e).put(Cc(t),n)},e.prototype.removeEntry=function(e,t){var n=Ic(e),r=Cc(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Te(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return Ic(e).get(Cc(t)).next((function(e){return n.Ie(e)}))},e.prototype.Ae=function(e,t){var n=this;return Ic(e).get(Cc(t)).next((function(e){var t=n.Ie(e);return t?{maybeDocument:t,size:nc(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Za();return this.Re(e,t,(function(e,t){var i=n.Ie(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.be=function(e,t){var n=this,r=Za(),i=new Wa(Wi.comparator);return this.Re(e,t,(function(e,t){var o=n.Ie(t);o?(r=r.insert(e,o),i=i.insert(e,nc(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{ve:r,Pe:i}}))},e.prototype.Re=function(e,t,n){if(t.isEmpty())return wu.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Ic(e).qt({range:r},(function(e,t,r){for(var a=Wi.fromSegments(e);o&&Wi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=ts(),o=t.path.length+1,a={};if(n.isEqual(ra.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=ju(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=su.collectionReadTimeIndex}return Ic(e).qt(a,(function(e,n,a){if(e.length===o){var s=Mu(r.D,n);t.path.isPrefixOf(s.key.path)?s instanceof go&&ea(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new Tc(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Sc(e).get(uu.key).next((function(e){return ki(!!e),e}))},e.prototype.Te=function(e,t){return Sc(e).put(uu.key,t)},e.prototype.Ie=function(e){if(e){var t=Mu(this.D,e);return t instanceof yo&&t.version.isEqual(ra.min())?null:t}return null},e}(),Tc=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ve=t,r.trackRemovals=n,r.Se=new wc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return(0,yi.ZT)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Ja((function(e,t){return Pi(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Se.get(o);if(a.maybeDocument){var u=Fu(t.Ve.D,a.maybeDocument,t.getReadTime(o));i=i.add(o.path.popLast());var c=nc(u);r+=c-s,n.push(t.Ve.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=Fu(t.Ve.D,new yo(o,ra.min()),t.getReadTime(o));n.push(t.Ve.addEntry(e,o,l))}else n.push(t.Ve.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ve.Gt.addToCollectionParentIndex(e,r))})),n.push(this.Ve.updateMetadata(e,r)),wu.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ve.Ae(e,t).next((function(e){return null===e?(n.Se.set(t,0),null):(n.Se.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ve.be(e,t).next((function(e){var t=e.ve;return e.Pe.forEach((function(e,t){n.Se.set(e,t)})),t}))},t}(_c);function Sc(e){return Pu(e,uu.store)}function Ic(e){return Pu(e,su.store)}function Cc(e){return e.path.toArray()}var kc=function(){function e(e){this.D=e}return e.prototype.St=function(e,t,n,r){var i=this;ki(n<r&&n>=0&&r<=11);var o=new _u("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(tu.store)}(e),function(e){e.createObjectStore(nu.store,{keyPath:nu.keyPath}),e.createObjectStore(ru.store,{keyPath:ru.keyPath,autoIncrement:!0}).createIndex(ru.userMutationsIndex,ru.userMutationsKeyPath,{unique:!0}),e.createObjectStore(iu.store)}(e),xc(e),function(e){e.createObjectStore(su.store)}(e));var a=wu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(lu.store),e.deleteObjectStore(cu.store),e.deleteObjectStore(hu.store)}(e),xc(e)),a=a.next((function(){return function(e){var t=e.store(hu.store),n=new hu(0,0,ra.min().toTimestamp(),0);return t.put(hu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(ru.store).kt().next((function(n){e.deleteObjectStore(ru.store),e.createObjectStore(ru.store,{keyPath:ru.keyPath,autoIncrement:!0}).createIndex(ru.userMutationsIndex,ru.userMutationsKeyPath,{unique:!0});var r=t.store(ru.store),i=n.map((function(e){return r.put(e)}));return wu.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(du.store,{keyPath:du.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.De(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(uu.store)}(e),i.Ce(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.xe(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Ne(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(su.store);t.createIndex(su.readTimeIndex,su.readTimeIndexPath,{unique:!1}),t.createIndex(su.collectionReadTimeIndex,su.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.$e(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(pu.store,{keyPath:pu.keyPath})}(e),function(e){e.createObjectStore(vu.store,{keyPath:vu.keyPath})}(e)}))),a},e.prototype.Ce=function(e){var t=0;return e.store(su.store).qt((function(e,n){t+=nc(n)})).next((function(){var n=new uu(t);return e.store(uu.store).put(uu.key,n)}))},e.prototype.De=function(e){var t=this,n=e.store(nu.store),r=e.store(ru.store);return n.kt().next((function(n){return wu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(ru.userMutationsIndex,i).next((function(r){return wu.forEach(r,(function(r){ki(r.userId===n.userId);var i=Bu(t.D,r);return tc(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.xe=function(e){var t=e.store(lu.store),n=e.store(su.store);return e.store(hu.store).get(hu.key).next((function(e){var r=[];return n.qt((function(n,i){var o=new zi(n),a=function(e){return[0,$s(e)]}(o);r.push(t.get(a).next((function(n){return n?wu.resolve():function(n){return t.put(new lu(0,$s(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return wu.waitFor(r)}))}))},e.prototype.Ne=function(e,t){e.createObjectStore(fu.store,{keyPath:fu.keyPath});var n=t.store(fu.store),r=new $u,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:$s(i)})}};return t.store(su.store).qt({Bt:!0},(function(e,t){var n=new zi(e);return i(n.popLast())})).next((function(){return t.store(iu.store).qt({Bt:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Zs(n));return i(r.popLast())}))}))},e.prototype.$e=function(e){var t=this,n=e.store(cu.store);return n.qt((function(e,r){var i=zu(r),o=Gu(t.D,i);return n.put(o)}))},e}();function xc(e){e.createObjectStore(lu.store,{keyPath:lu.keyPath}).createIndex(lu.documentTargetsIndex,lu.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(cu.store,{keyPath:cu.keyPath}).createIndex(cu.queryTargetsIndexName,cu.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(hu.store)}var Nc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ac=function(){function e(t,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=a,this.document=s,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(e){return Promise.resolve()},!e.At())throw new Vi(qi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yc(this,i),this.We=n+"main",this.D=new Lu(u),this.je=new Eu(this.We,11,new kc(this.D)),this.Ge=new cc(this.referenceDelegate,this.D),this.Gt=new Yu,this.ze=function(e,t){return new Ec(e,t)}(this.D,this.Gt),this.He=new Wu,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&Ti("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.Ye().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Vi(qi.FAILED_PRECONDITION,Nc);return e.Xe(),e.Ze(),e.tn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ge.getHighestSequenceNumber(t)}))})).then((function(t){e.Me=new bi(t,e.Oe)})).then((function(){e.Le=!0})).catch((function(t){return e.je&&e.je.close(),Promise.reject(t)}))},e.prototype.en=function(e){var t=this;return this.Ke=function(n){return(0,yi.mG)(t,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.je.Ct((function(n){return(0,yi.mG)(t,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Fe.enqueueAndForget((function(){return(0,yi.mG)(t,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.Ye=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Dc(t).put(new du(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.nn(t).next((function(t){t||(e.isPrimary=!1,e.Fe.enqueueRetryable((function(){return e.Ke(!1)})))}))})).next((function(){return e.sn(t)})).next((function(n){return e.isPrimary&&!n?e.rn(t).next((function(){return!1})):!!n&&e.on(t).next((function(){return!0}))}))})).catch((function(t){if(Iu(t))return Ei("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ei("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Fe.enqueueRetryable((function(){return e.Ke(t)})),e.isPrimary=t}))},e.prototype.nn=function(e){var t=this;return Pc(e).get(tu.key).next((function(e){return wu.resolve(t.cn(e))}))},e.prototype.an=function(e){return Dc(e).delete(this.clientId)},e.prototype.un=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Pu(e,du.store);return t.kt().next((function(e){var n=i.ln(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return wu.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Je)for(t=0,n=e;t<n.length;t++)r=n[t],this.Je.removeItem(this.fn(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.tn=function(){var e=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ye().then((function(){return e.un()})).then((function(){return e.tn()}))}))},e.prototype.cn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.sn=function(e){var t=this;return this.ke?wu.resolve(!0):Pc(e).get(tu.key).next((function(n){if(null!==n&&t.hn(n.leaseTimestampMs,5e3)&&!t.dn(n.ownerId)){if(t.cn(n)&&t.networkEnabled)return!0;if(!t.cn(n)){if(!n.allowTabSynchronization)throw new Vi(qi.FAILED_PRECONDITION,Nc);return!1}}return!(!t.networkEnabled||!t.inForeground)||Dc(e).kt().next((function(e){return void 0===t.ln(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ei("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e=this;return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[tu.store,du.store],(function(t){var n=new Au(t,bi.o);return e.rn(n).next((function(){return e.an(n)}))}))];case 1:return t.sent(),this.je.close(),this.yn(),[2]}}))}))},e.prototype.ln=function(e,t){var n=this;return e.filter((function(e){return n.hn(e.updateTimeMs,t)&&!n.dn(e.clientId)}))},e.prototype.gn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Dc(t).kt().next((function(t){return e.ln(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return rc.Ht(e,this.D,this.Gt,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.Ge},e.prototype.getRemoteDocumentCache=function(){return this.ze},e.prototype.getIndexManager=function(){return this.Gt},e.prototype.getBundleCache=function(){return this.He},e.prototype.runTransaction=function(e,t,n){var r=this;Ei("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.je.runTransaction(e,o,mu,(function(o){return i=new Au(o,r.Me?r.Me.next():bi.o),"readwrite-primary"===t?r.nn(i).next((function(e){return!!e||r.sn(i)})).next((function(t){if(!t)throw Ti("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Fe.enqueueRetryable((function(){return r.Ke(!1)})),new Vi(qi.FAILED_PRECONDITION,gu);return n(i)})).next((function(e){return r.on(i).next((function(){return e}))})):r.pn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.pn=function(e){var t=this;return Pc(e).get(tu.key).next((function(e){if(null!==e&&t.hn(e.leaseTimestampMs,5e3)&&!t.dn(e.ownerId)&&!t.cn(e)&&!(t.ke||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Vi(qi.FAILED_PRECONDITION,Nc)}))},e.prototype.on=function(e){var t=new tu(this.clientId,this.allowTabSynchronization,Date.now());return Pc(e).put(tu.key,t)},e.At=function(){return Eu.At()},e.prototype.rn=function(e){var t=this,n=Pc(e);return n.get(tu.key).next((function(e){return t.cn(e)?(Ei("IndexedDbPersistence","Releasing primary lease."),n.delete(tu.key)):wu.resolve()}))},e.prototype.hn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Ti("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.Xe=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Fe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ye()}))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},e.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},e.prototype.Ze=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Be=function(){t.wn(),t.Fe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Be))},e.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},e.prototype.dn=function(e){var t;try{var n=null!==(null===(t=this.Je)||void 0===t?void 0:t.getItem(this.fn(e)));return Ei("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return Ti("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(e){Ti("Failed to set zombie client id.",e)}},e.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(e){}},e.prototype.fn=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function Pc(e){return Pu(e,tu.store)}function Dc(e){return Pu(e,du.store)}function Oc(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Rc=function(e,t){this.progress=e,this.En=t},Lc=function(){function e(e,t,n){this.ze=e,this.Tn=t,this.Gt=n}return e.prototype.In=function(e,t){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.An(e,t,r)}))},e.prototype.An=function(e,t,n){return this.ze.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},e.prototype.Rn=function(e,t,n){var r=Za();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},e.prototype.bn=function(e,t){var n=this;return this.ze.getEntries(e,t).next((function(t){return n.vn(e,t)}))},e.prototype.vn=function(e,t){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.Rn(e,t,r),o=Xa();return i.forEach((function(e,t){t||(t=new yo(e,ra.min())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return Wi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Pn(e,t.path):Ho(t)?this.Vn(e,t,n):this.Sn(e,t,n)},e.prototype.Pn=function(e,t){return this.In(e,new Wi(t)).next((function(e){var t=ts();return e instanceof go&&(t=t.insert(e.key,e)),t}))},e.prototype.Vn=function(e,t,n){var r=this,i=t.collectionGroup,o=ts();return this.Gt.getCollectionParents(e,i).next((function(a){return wu.forEach(a,(function(a){var s=function(e,t){return new qo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.Sn(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.Sn=function(e,t,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Dn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=Na(u,r.get(c),o.localWriteTime);r=l instanceof go?r.insert(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){ea(t,n)||(r=r.remove(e))})),r}))},e.prototype.Dn=function(e,t,n){for(var r=os(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ra&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof go&&(c=c.insert(e,t))})),c}))},e}(),Mc=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.Cn=n,this.xn=r}return e.Nn=function(t,n){for(var r=os(),i=os(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Fc=function(){function e(){}return e.prototype.$n=function(e){this.Fn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ra.min())?this.On(e,t):this.Fn.bn(e,r).next((function(o){var a=i.kn(t,o);return(zo(t)||Go(t))&&i.Mn(t.limitType,a,r,n)?i.On(e,t):(_i()<=ce.in.DEBUG&&Ei("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Zo(t)),i.Fn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.kn=function(e,t){var n=new Ja(ta(e));return t.forEach((function(t,r){r instanceof go&&ea(e,r)&&(n=n.add(r))})),n},e.prototype.Mn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.On=function(e,t){return _i()<=ce.in.DEBUG&&Ei("QueryEngine","Using full collection scan to execute query:",Zo(t)),this.Fn.getDocumentsMatchingQuery(e,t,ra.min())},e}(),jc=function(){function e(e,t,n,r){this.persistence=e,this.Ln=t,this.D=r,this.Bn=new Wa(Pi),this.qn=new wc((function(e){return Eo(e)}),To),this.Un=ra.min(),this.Tn=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.Ge=e.getTargetCache(),this.Kn=new Lc(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=e.getBundleCache(),this.Ln.$n(this.Kn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Bn)}))},e}();function Uc(e,t,n,r){return new jc(e,t,n,r)}function qc(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return n=xi(e),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n.Tn.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new Lc(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=os(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,g=v.mutations;m<g.length;m++){var y=g[m];a=a.add(y.key)}}return i.bn(e,a).next((function(e){return{Wn:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}}))}))}function Vc(e,t){var n=xi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=wu.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=t,a=n.docVersions.get(e);ki(null!==a),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(e,o,n))&&r.addEntry(o,n.commitVersion)}))})),a.next((function(){return e.Tn.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Tn.performConsistencyCheck(e)})).next((function(){return n.Kn.bn(e,r)}))}))}function Bc(e){var t=xi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ge.getLastRemoteSnapshotVersion(e)}))}function zc(e,t){var n=xi(e),r=t.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.Ge.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.Ge.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return ki(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.Ge.updateTargetData(e,c))}}}));var s=Xa();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Gc(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(ra.min())){var u=n.Ge.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ge.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return wu.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Kn.vn(e,s)}))})).then((function(e){return n.Bn=i,e}))}function Gc(e,t,n,r,i){var o=os();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Xa();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a instanceof yo&&a.version.isEqual(ra.min())?(t.removeEntry(n,u),o=o.insert(n,a)):null==s||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):Ei("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Kc(e,t){var n=xi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Tn.getNextMutationBatchAfterBatchId(e,t)}))}function Wc(e,t){var n=xi(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ge.getTargetData(e,t).next((function(i){return i?(r=i,wu.resolve(r)):n.Ge.allocateTargetId(e).next((function(i){return r=new Ru(t,i,0,e.currentSequenceNumber),n.Ge.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Bn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(e.targetId,e),n.qn.set(t,e.targetId)),e}))}function Hc(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:r=xi(e),i=r.Bn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Iu(a=s.sent()))throw a;return Ei("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.Bn=r.Bn.remove(t),r.qn.delete(i.target),[2]}}))}))}function Qc(e,t,n){var r=xi(e),i=ra.min(),o=os();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=xi(e),i=r.qn.get(n);return void 0!==i?wu.resolve(r.Bn.get(i)):r.Ge.getTargetData(t,n)}(r,e,Jo(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Ln.getDocumentsMatchingQuery(e,t,n?i:ra.min(),n?o:os())})).next((function(e){return{documents:e,jn:o}}))}))}function Jc(e,t){var n=xi(e),r=xi(n.Ge),i=n.Bn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.yt(e,t).next((function(e){return e?e.target:null}))}))}function $c(e){var t=xi(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=xi(e),i=Xa(),o=ju(n),a=Ic(t),s=IDBKeyRange.lowerBound(o,!0);return a.qt({index:su.readTimeIndex,range:s},(function(e,t){var n=Mu(r.D,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{En:i,readTime:Uu(o)}}))}(t.Qn,e,t.Un)})).then((function(e){var n=e.En,r=e.readTime;return t.Un=r,n}))}function Yc(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){return[2,(t=xi(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Ic(e),n=ra.min();return t.qt({index:su.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Uu(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.Un=e}))]}))}))}function Xc(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return(0,yi.Jh)(this,(function(p){switch(p.label){case 0:for(i=xi(e),o=os(),a=Xa(),s=rs(),u=0,c=n;u<c.length;u++)l=c[u],h=t.Gn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,t.zn(l)),s=s.insert(h,t.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Wc(i,function(e){return Jo(Bo(zi.fromString("__bundle__/docs/"+e)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Gc(e,f,a,ra.min(),s).next((function(t){return f.apply(e),t})).next((function(t){return i.Ge.removeMatchingKeysForTargetId(e,d.targetId).next((function(){return i.Ge.addMatchingKeys(e,o,d.targetId)})).next((function(){return i.Kn.vn(e,t)}))}))}))]}}))}))}function Zc(e,t,n){return void 0===n&&(n=os()),(0,yi.mG)(this,void 0,void 0,(function(){var r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return[4,Wc(e,Jo(Ku(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=xi(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=Ts(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(e,t);var a=r.withResumeToken(Hi.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(a.targetId,a),i.Ge.updateTargetData(e,a).next((function(){return i.Ge.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.Ge.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.He.saveNamedQuery(e,t)}))}))]}}))}))}var el=function(){function e(e){this.D=e,this.Jn=new Map,this.Yn=new Map}return e.prototype.getBundleMetadata=function(e,t){return wu.resolve(this.Jn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Ts(n.createTime)}),wu.resolve()},e.prototype.getNamedQuery=function(e,t){return wu.resolve(this.Yn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Ku(e.bundledQuery),readTime:Ts(e.readTime)}}(t)),wu.resolve()},e}(),tl=function(){function e(){this.Xn=new Ja(nl.Zn),this.ts=new Ja(nl.es)}return e.prototype.isEmpty=function(){return this.Xn.isEmpty()},e.prototype.addReference=function(e,t){var n=new nl(e,t);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},e.prototype.ns=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.ss(new nl(e,t))},e.prototype.rs=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.os=function(e){var t=this,n=new Wi(new zi([])),r=new nl(n,e),i=new nl(n,e+1),o=[];return this.ts.forEachInRange([r,i],(function(e){t.ss(e),o.push(e.key)})),o},e.prototype.cs=function(){var e=this;this.Xn.forEach((function(t){return e.ss(t)}))},e.prototype.ss=function(e){this.Xn=this.Xn.delete(e),this.ts=this.ts.delete(e)},e.prototype.us=function(e){var t=new Wi(new zi([])),n=new nl(t,e),r=new nl(t,e+1),i=os();return this.ts.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new nl(e,0),n=this.Xn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),nl=function(){function e(e,t){this.key=e,this.hs=t}return e.Zn=function(e,t){return Wi.comparator(e.key,t.key)||Pi(e.hs,t.hs)},e.es=function(e,t){return Pi(e.hs,t.hs)||Wi.comparator(e.key,t.key)},e}(),rl=function(){function e(e,t){this.Gt=e,this.referenceDelegate=t,this.Tn=[],this.ls=1,this.fs=new Ja(nl.Zn)}return e.prototype.checkEmpty=function(e){return wu.resolve(0===this.Tn.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ls;this.ls++,this.Tn.length>0&&this.Tn[this.Tn.length-1];var o=new Du(i,t,n,r);this.Tn.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.fs=this.fs.add(new nl(u.key,i)),this.Gt.addToCollectionParentIndex(e,u.key.path.popLast())}return wu.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return wu.resolve(this.ds(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return wu.resolve(this.Tn.length>i?this.Tn[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return wu.resolve(0===this.Tn.length?-1:this.ls-1)},e.prototype.getAllMutationBatches=function(e){return wu.resolve(this.Tn.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new nl(t,0),i=new nl(t,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],(function(e){var t=n.ds(e.hs);o.push(t)})),wu.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ja(Pi);return t.forEach((function(e){var t=new nl(e,0),i=new nl(e,Number.POSITIVE_INFINITY);n.fs.forEachInRange([t,i],(function(e){r=r.add(e.hs)}))})),wu.resolve(this._s(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;Wi.isDocumentKey(i)||(i=i.child(""));var o=new nl(new Wi(i),0),a=new Ja(Pi);return this.fs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.hs)),!0)}),o),wu.resolve(this._s(a))},e.prototype._s=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ds(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;ki(0===this.ys(t.batchId,"removed")),this.Tn.shift();var r=this.fs;return wu.forEach(t.mutations,(function(i){var o=new nl(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.fs=r}))},e.prototype.Xt=function(e){},e.prototype.containsKey=function(e,t){var n=new nl(t,0),r=this.fs.firstAfterOrEqual(n);return wu.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this.Tn.length,wu.resolve()},e.prototype.ys=function(e,t){return this.ws(e)},e.prototype.ws=function(e){return 0===this.Tn.length?0:e-this.Tn[0].batchId},e.prototype.ds=function(e){var t=this.ws(e);return t<0||t>=this.Tn.length?null:this.Tn[t]},e}(),il=function(){function e(e,t){this.Gt=e,this.gs=t,this.docs=new Wa(Wi.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.gs(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.Gt.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return wu.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Za();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),wu.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=ts(),i=new Wi(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof go&&ea(t,c)&&(r=r.insert(c.key,c))}return wu.resolve(r)},e.prototype.ps=function(e,t){return wu.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new ol(this)},e.prototype.getSize=function(e){return wu.resolve(this.size)},e}(),ol=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ve=t,n}return(0,yi.ZT)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i&&i.maybeDocument?n.push(t.Ve.addEntry(e,i.maybeDocument,t.getReadTime(r))):t.Ve.removeEntry(r)})),wu.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ve.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ve.getEntries(e,t)},t}(_c),al=function(){function e(e){this.persistence=e,this.Es=new wc((function(e){return Eo(e)}),To),this.lastRemoteSnapshotVersion=ra.min(),this.highestTargetId=0,this.Ts=0,this.Is=new tl,this.targetCount=0,this.As=uc.ee()}return e.prototype.forEachTarget=function(e,t){return this.Es.forEach((function(e,n){return t(n)})),wu.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return wu.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return wu.resolve(this.Ts)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.As.next(),wu.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ts&&(this.Ts=t),wu.resolve()},e.prototype.re=function(e){this.Es.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.As=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.Ts&&(this.Ts=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.re(t),this.targetCount+=1,wu.resolve()},e.prototype.updateTargetData=function(e,t){return this.re(t),wu.resolve()},e.prototype.removeTargetData=function(e,t){return this.Es.delete(t.target),this.Is.os(t.targetId),this.targetCount-=1,wu.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.Es.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Es.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),wu.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return wu.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.Es.get(t)||null;return wu.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this.Is.ns(t,n),wu.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this.Is.rs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),wu.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.Is.os(t),wu.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.Is.us(t);return wu.resolve(n)},e.prototype.containsKey=function(e,t){return wu.resolve(this.Is.containsKey(t))},e}(),sl=function(){function e(e,t){var n=this;this.Rs={},this.Me=new bi(0),this.Le=!1,this.Le=!0,this.referenceDelegate=e(this),this.Ge=new al(this),this.Gt=new Ju,this.ze=function(e,t){return new il(e,(function(e){return n.referenceDelegate.bs(e)}))}(this.Gt),this.D=new Lu(t),this.He=new el(this.D)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Gt},e.prototype.getMutationQueue=function(e){var t=this.Rs[e.toKey()];return t||(t=new rl(this.Gt,this.referenceDelegate),this.Rs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.Ge},e.prototype.getRemoteDocumentCache=function(){return this.ze},e.prototype.getBundleCache=function(){return this.He},e.prototype.runTransaction=function(e,t,n){var r=this;Ei("MemoryPersistence","Starting transaction:",e);var i=new ul(this.Me.next());return this.referenceDelegate.vs(),n(i).next((function(e){return r.referenceDelegate.Ps(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Vs=function(e,t){return wu.or(Object.values(this.Rs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),ul=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return(0,yi.ZT)(t,e),t}(yu),cl=function(){function e(e){this.persistence=e,this.Ss=new tl,this.Ds=null}return e.Cs=function(t){return new e(t)},Object.defineProperty(e.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Ci()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.Ss.addReference(n,t),this.xs.delete(n.toString()),wu.resolve()},e.prototype.removeReference=function(e,t,n){return this.Ss.removeReference(n,t),this.xs.add(n.toString()),wu.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.xs.add(t.toString()),wu.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.Ss.os(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.vs=function(){this.Ds=new Set},e.prototype.Ps=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wu.forEach(this.xs,(function(r){var i=Wi.fromPath(r);return t.Ns(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ds=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ns(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))},e.prototype.bs=function(e){return 0},e.prototype.Ns=function(e,t){var n=this;return wu.or([function(){return wu.resolve(n.Ss.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Vs(e,t)}])},e}(),ll=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function hl(e,t){return"firestore_clients_"+e+"_"+t}function fl(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function dl(e,t){return"firestore_targets_"+e+"_"+t}ll.UNAUTHENTICATED=new ll(null),ll.GOOGLE_CREDENTIALS=new ll("google-credentials-uid"),ll.FIRST_PARTY=new ll("first-party-uid");var pl=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.$s=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Vi(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(Ti("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Fs=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),vl=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.$s=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vi(i.error.code,i.error.message)),o?new e(t,i.state,r):(Ti("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Fs=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),ml=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.$s=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ss(),a=0;i&&a<r.activeTargetIds.length;++a)i=Ui(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(Ti("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),gl=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.$s=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ti("SharedClientState","Failed to parse online state: "+t),null)},e}(),yl=function(){function e(){this.activeTargetIds=ss()}return e.prototype.Os=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.ks=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Fs=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),bl=function(){function e(e,t,n,r,i){this.window=e,this.Fe=t,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Wa(Pi),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=hl(this.persistenceKey,this.Ms),this.Ks=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new yl),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Hs=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return e.At=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return(0,yi.Jh)(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.gn()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ms&&(i=this.getItem(hl(this.persistenceKey,r)))&&(o=ml.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(a=this.storage.getItem(this.zs))&&(s=this.Ys(a))&&this.Xs(s),u=0,c=this.Us;u<c.length;u++)l=c[u],this.Bs(l);return this.Us=[],this.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ks,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.qs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.ti(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.ti(e,t,n),this.ei(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(dl(this.persistenceKey,e));if(n){var r=vl.$s(e,n);r&&(t=r.state)}}return this.ni.Os(e),this.Js(),t},e.prototype.removeLocalQueryTarget=function(e){this.ni.ks(e),this.Js()},e.prototype.isLocalQueryTarget=function(e){return this.ni.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(dl(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.si(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.ei(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.ii(e)},e.prototype.notifyBundleLoaded=function(){this.ri()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return Ei("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){Ei("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){Ei("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Bs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ei("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Ti("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable((function(){return(0,yi.mG)(t,void 0,void 0,(function(){var e,t,r,i,o,a;return(0,yi.Jh)(this,(function(s){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return e=this.oi(n.key),[2,this.ci(e,null)];if(t=this.ai(n.key,n.newValue))return[2,this.ci(t.clientId,t)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(a=function(e){var t=bi.o;if(null!=e)try{var n=JSON.parse(e);ki("number"==typeof n),t=n}catch(e){Ti("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==bi.o&&this.sequenceNumberHandler(a);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),e.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},e.prototype.ti=function(e,t,n){var r=new pl(this.currentUser,e,t,n),i=fl(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Fs())},e.prototype.ei=function(e){var t=fl(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.ii=function(e){var t={clientId:this.Ms,onlineState:e};this.storage.setItem(this.zs,JSON.stringify(t))},e.prototype.si=function(e,t,n){var r=dl(this.persistenceKey,e),i=new vl(e,t,n);this.setItem(r,i.Fs())},e.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},e.prototype.oi=function(e){var t=this.Ws.exec(e);return t?t[1]:null},e.prototype.ai=function(e,t){var n=this.oi(e);return ml.$s(n,t)},e.prototype.ui=function(e,t){var n=this.js.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return pl.$s(new ll(i),r,t)},e.prototype.li=function(e,t){var n=this.Gs.exec(e),r=Number(n[1]);return vl.$s(r,t)},e.prototype.Ys=function(e){return gl.$s(e)},e.prototype.hi=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(e.batchId,e.state,e.error)]:(Ei("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.fi=function(e){return this.syncEngine._i(e.targetId,e.state,e.error)},e.prototype.ci=function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.Zs(this.qs),o=this.Zs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.mi(a,s).then((function(){n.qs=r}))},e.prototype.Xs=function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Zs=function(e){var t=ss();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),wl=function(){function e(){this.yi=new yl,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.yi.Os(e),this.gi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.gi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.yi.ks(e)},e.prototype.isLocalQueryTarget=function(e){return this.yi.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.gi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.yi.activeTargetIds.has(e)},e.prototype.start=function(){return this.yi=new yl,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),_l=function(){function e(){}return e.prototype.pi=function(e){},e.prototype.shutdown=function(){},e}(),El=function(){function e(){var e=this;this.Ei=function(){return e.Ti()},this.Ii=function(){return e.Ai()},this.Ri=[],this.bi()}return e.prototype.pi=function(e){this.Ri.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},e.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},e.prototype.Ti=function(){Ei("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.Ri;e<t.length;e++)(0,t[e])(0)},e.prototype.Ai=function(){Ei("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.Ri;e<t.length;e++)(0,t[e])(1)},e.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Tl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sl=function(){function e(e){this.vi=e.vi,this.Pi=e.Pi}return e.prototype.Vi=function(e){this.Si=e},e.prototype.Di=function(e){this.Ci=e},e.prototype.onMessage=function(e){this.xi=e},e.prototype.close=function(){this.Pi()},e.prototype.send=function(e){this.vi(e)},e.prototype.Ni=function(){this.Si()},e.prototype.$i=function(e){this.Ci(e)},e.prototype.Fi=function(e){this.xi(e)},e}(),Il=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n}return(0,yi.ZT)(t,e),t.prototype.qi=function(e,t,n,r){return new Promise((function(i,o){var a=new gi;a.listenOnce(di.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case fi.NO_ERROR:var t=a.getResponseJson();Ei("Connection","XHR received:",JSON.stringify(t)),i(t);break;case fi.TIMEOUT:Ei("Connection",'RPC "'+e+'" timed out'),o(new Vi(qi.DEADLINE_EXCEEDED,"Request time out"));break;case fi.HTTP_ERROR:var n=a.getStatus();if(Ei("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(qi).indexOf(t)>=0?t:qi.UNKNOWN}(r.status);o(new Vi(s,r.message))}else o(new Vi(qi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Vi(qi.UNAVAILABLE,"Connection failed."));break;default:Ci()}}finally{Ei("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Qi=function(e,t){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=li(),i=hi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,t),(0,le.uI)()||(0,le.b$)()||(0,le.d)()||(0,le.w1)()||(0,le.Mn)()||(0,le.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Ei("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new Sl({vi:function(e){c?Ei("Connection","Not sending because WebChannel is closed:",e):(u||(Ei("Connection","Opening WebChannel transport."),s.open(),u=!0),Ei("Connection","WebChannel sending:",e),s.send(e))},Pi:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,mi.EventType.OPEN,(function(){c||Ei("Connection","WebChannel transport opened.")})),h(s,mi.EventType.CLOSE,(function(){c||(c=!0,Ei("Connection","WebChannel transport closed"),l.$i())})),h(s,mi.EventType.ERROR,(function(e){c||(c=!0,Si("Connection","WebChannel transport errored:",e),l.$i(new Vi(qi.UNAVAILABLE,"The operation could not be completed")))})),h(s,mi.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];ki(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ei("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=Ua[e];if(void 0!==t)return Ka(t)}(o),u=i.message;void 0===a&&(a=qi.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.$i(new Vi(a,u)),s.close()}else Ei("Connection","WebChannel received:",n),l.Fi(n)}})),h(i,pi.STAT_EVENT,(function(e){e.stat===vi.PROXY?Ei("Connection","Detected buffering proxy"):e.stat===vi.NOPROXY&&Ei("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Ni()}),0),l},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Oi=t+"://"+e.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Mi=function(e,t,n,r){var i=this.Li(e,t);Ei("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(e,i,o,n).then((function(e){return Ei("RestConnection","Received: ",e),e}),(function(t){throw Si("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.Ui=function(e,t,n,r){return this.Mi(e,t,n,r)},e.prototype.Bi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",e["Content-Type"]="text/plain",t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.Li=function(e,t){var n=Tl[e];return this.Oi+"/v1/"+t+":"+n},e}());function Cl(){return"undefined"!=typeof window?window:null}function kl(){return"undefined"!=typeof document?document:null}function xl(e){return new bs(e,!0)}var Nl=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=e,this.timerId=t,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return e.prototype.reset=function(){this.Gi=0},e.prototype.Ji=function(){this.Gi=this.ji},e.prototype.Yi=function(e){var t=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Ei("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,(function(){return t.Hi=Date.now(),e()})),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},e.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},e.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},e.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},e}(),Al=function(){function e(e,t,n,r,i,o){this.Fe=e,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Nl(e,t)}return e.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.ar=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.ur()},e.prototype.stop=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.hr=function(){this.state=0,this.rr.reset()},e.prototype.lr=function(){var e=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,(function(){return e.dr()})))},e.prototype.wr=function(e){this._r(),this.stream.send(e)},e.prototype.dr=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){return this.ar()?[2,this.close(0)]:[2]}))}))},e.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},e.prototype.close=function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==e?this.rr.reset():t&&t.code===qi.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):t&&t.code===qi.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Di(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.mr=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.yr(this.sr),n=this.sr;this.nr.getToken().then((function(t){e.sr===n&&e.gr(t)}),(function(n){t((function(){var t=new Vi(qi.UNKNOWN,"Fetching auth token failed: "+n.message);return e.pr(t)}))}))},e.prototype.gr=function(e){var t=this,n=this.yr(this.sr);this.stream=this.Er(e),this.stream.Vi((function(){n((function(){return t.state=2,t.listener.Vi()}))})),this.stream.Di((function(e){n((function(){return t.pr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.ur=function(){var e=this;this.state=4,this.rr.Yi((function(){return(0,yi.mG)(e,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.pr=function(e){return Ei("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.yr=function(e){var t=this;return function(n){t.Fe.enqueueAndForget((function(){return t.sr===e?n():(Ei("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Pl=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,a}return(0,yi.ZT)(t,e),t.prototype.Er=function(e){return this.er.Qi("Listen",e)},t.prototype.onMessage=function(e){this.rr.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ci()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.V?(ki(void 0===t||"string"==typeof t),Hi.fromBase64String(t||"")):(ki(void 0===t||t instanceof Uint8Array),Hi.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?qi.UNKNOWN:Ka(e.code);return new Vi(t,e.message||"")}(s);n=new fs(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=ks(e,r.document.name),o=Ts(r.document.updateTime);var s=new oa({mapValue:{fields:r.document.fields}}),u=(a=new go(i,o,s,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new ls(u,c,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=ks(e,r.document),o=r.readTime?Ts(r.readTime):ra.min(),s=new yo(i,o),a=r.removedTargetIds||[],n=new ls([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=ks(e,r.document),o=r.removedTargetIds||[],n=new ls([],o,i,null);else{if(!("filter"in t))return Ci();t.filter;var l=t.filter;l.targetId,r=l.count||0,i=new za(r),o=l.targetId,n=new hs(o,i)}return n}(this.D,e),n=function(e){if(!("targetChange"in e))return ra.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ra.min():t.readTime?Ts(t.readTime):ra.min()}(e);return this.listener.Tr(t,n)},t.prototype.Ir=function(e){var t={};t.database=As(this.D),t.addTarget=function(e,t){var n,r=t.target;return(n=So(r)?{documents:Ms(e,r)}:{query:Fs(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=_s(e,t.resumeToken):t.snapshotVersion.compareTo(ra.min())>0&&(n.readTime=ws(e,t.snapshotVersion.toTimestamp())),n}(this.D,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ci()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.D,e);n&&(t.labels=n),this.wr(t)},t.prototype.Ar=function(e){var t={};t.database=As(this.D),t.removeTarget=e,this.wr(t)},t}(Al),Dl=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,a.Rr=!1,a}return(0,yi.ZT)(t,e),Object.defineProperty(t.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.mr=function(){this.Rr&&this.vr([])},t.prototype.Er=function(e){return this.er.Qi("Write",e)},t.prototype.onMessage=function(e){if(ki(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();var t=function(e,t){return e&&e.length>0?(ki(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ts(e.updateTime):Ts(t);return n.isEqual(ra.min())&&(n=Ts(t)),new Sa(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ts(e.commitTime);return this.listener.Pr(n,t)}return ki(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()},t.prototype.Sr=function(){var e={};e.database=As(this.D),this.wr(e)},t.prototype.vr=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Rs(t.D,e)}))};this.wr(n)},t}(Al),Ol=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.er=n,i.D=r,i.Dr=!1,i}return(0,yi.ZT)(t,e),t.prototype.Cr=function(){if(this.Dr)throw new Vi(qi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Mi=function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Mi(e,t,n,i)})).catch((function(e){throw e.code===qi.UNAUTHENTICATED&&r.credentials.invalidateToken(),e}))},t.prototype.Ui=function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Ui(e,t,n,i)})).catch((function(e){throw e.code===qi.UNAUTHENTICATED&&r.credentials.invalidateToken(),e}))},t.prototype.terminate=function(){this.Dr=!1},t}((function(){})),Rl=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return e.prototype.Or=function(){var e=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.$r=null,e.Mr("Backend didn't respond within 10 seconds."),e.kr("Offline"),Promise.resolve()})))},e.prototype.Lr=function(e){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+e.toString()),this.kr("Offline")))},e.prototype.set=function(e){this.Br(),this.Nr=0,"Online"===e&&(this.Fr=!1),this.kr(e)},e.prototype.kr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Mr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Ti(t),this.Fr=!1):Ei("OnlineStateTracker",t)},e.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},e}(),Ll=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi((function(e){n.enqueueAndForget((function(){return(0,yi.mG)(o,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return Gl(this)?(Ei("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return(t=xi(e)).Qr.add(4),[4,Fl(t)];case 1:return n.sent(),t.jr.set("Unknown"),t.Qr.delete(4),[4,Ml(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.jr=new Rl(n,r)};function Ml(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:if(!Gl(e))return[3,4];t=0,n=e.Kr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Fl(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:t=0,n=e.Kr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function jl(e,t){var n=xi(e);n.Ur.has(t.targetId)||(n.Ur.set(t.targetId,t),zl(n)?Bl(n):oh(n).ar()&&ql(n,t))}function Ul(e,t){var n=xi(e),r=oh(n);n.Ur.delete(t),r.ar()&&Vl(n,t),0===n.Ur.size&&(r.ar()?r.lr():Gl(n)&&n.jr.set("Unknown"))}function ql(e,t){e.Gr.H(t.targetId),oh(e).Ir(t)}function Vl(e,t){e.Gr.H(t),oh(e).Ar(t)}function Bl(e){e.Gr=new ps({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},yt:function(t){return e.Ur.get(t)||null}}),oh(e).start(),e.jr.Or()}function zl(e){return Gl(e)&&!oh(e).cr()&&e.Ur.size>0}function Gl(e){return 0===xi(e).Qr.size}function Kl(e){e.Gr=void 0}function Wl(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){return e.Ur.forEach((function(t,n){ql(e,t)})),[2]}))}))}function Hl(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(n){return Kl(e),zl(e)?(e.jr.Lr(t),Bl(e)):e.jr.set("Unknown"),[2]}))}))}function Ql(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:if(e.jr.set("Online"),!(t instanceof fs&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.Ur.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.Ur.delete(o),e.Gr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ei("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Jl(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ls?e.Gr.st(t):t instanceof hs?e.Gr.ht(t):e.Gr.ot(t),n.isEqual(ra.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Bc(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.Gr.dt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Ur.get(r);i&&e.Ur.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Ur.get(t);if(n){e.Ur.set(t,n.withResumeToken(Hi.EMPTY_BYTE_STRING,n.snapshotVersion)),Vl(e,t);var r=new Ru(n.target,t,1,n.sequenceNumber);ql(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ei("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Jl(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Jl(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r=this;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:if(!Iu(t))throw t;return e.Qr.add(1),[4,Fl(e)];case 1:return i.sent(),e.jr.set("Offline"),n||(n=function(){return Bc(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return(0,yi.mG)(r,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return Ei("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Qr.delete(1),[4,Ml(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function $l(e,t){return t().catch((function(n){return Jl(e,n,t)}))}function Yl(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:t=xi(e),n=ah(t),r=t.qr.length>0?t.qr[t.qr.length-1].batchId:-1,a.label=1;case 1:if(!function(e){return Gl(e)&&e.qr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Kc(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(e,t){e.qr.push(t);var n=ah(e);n.ar()&&n.br&&n.vr(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,Jl(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Xl(t)&&Zl(t),[2]}}))}))}function Xl(e){return Gl(e)&&!ah(e).cr()&&e.qr.length>0}function Zl(e){ah(e).start()}function eh(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){return ah(e).Sr(),[2]}))}))}function th(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i;return(0,yi.Jh)(this,(function(o){for(t=ah(e),n=0,r=e.qr;n<r.length;n++)i=r[n],t.vr(i.mutations);return[2]}))}))}function nh(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return r=e.qr.shift(),i=Ou.from(r,t,n),[4,$l(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Yl(e)];case 2:return o.sent(),[2]}}))}))}function rh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return t&&ah(e).br?[4,function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return Ga(r=t.code)&&r!==qi.ABORTED?(n=e.qr.shift(),ah(e).hr(),[4,$l(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,Yl(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xl(e)&&Zl(e),[2]}}))}))}function ih(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return n=xi(e),t?(n.Qr.delete(2),[4,Ml(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Qr.add(2),[4,Fl(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function oh(e){var t=this;return e.zr||(e.zr=function(e,t,n){var r=xi(e);return r.Cr(),new Pl(t,r.er,r.credentials,r.D,n)}(e.datastore,e.asyncQueue,{Vi:Wl.bind(null,e),Di:Hl.bind(null,e),Tr:Ql.bind(null,e)}),e.Kr.push((function(n){return(0,yi.mG)(t,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return n?(e.zr.hr(),zl(e)?Bl(e):e.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.zr.stop()];case 2:t.sent(),Kl(e),t.label=3;case 3:return[2]}}))}))}))),e.zr}function ah(e){var t=this;return e.Hr||(e.Hr=function(e,t,n){var r=xi(e);return r.Cr(),new Dl(t,r.er,r.credentials,r.D,n)}(e.datastore,e.asyncQueue,{Vi:eh.bind(null,e),Di:rh.bind(null,e),Vr:th.bind(null,e),Pr:nh.bind(null,e)}),e.Kr.push((function(n){return(0,yi.mG)(t,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return n?(e.Hr.hr(),[4,Yl(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Hr.stop()];case 3:t.sent(),e.qr.length>0&&(Ei("RemoteStore","Stopping write stream with "+e.qr.length+" pending writes"),e.qr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Hr}var sh=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vi(qi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function uh(e,t){if(Ti("AsyncQueue",t+": "+e),Iu(e))return new Vi(qi.UNAVAILABLE,t+": "+e);throw e}var ch=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||Wi.comparator(t.key,n.key)}:function(e,t){return Wi.comparator(e.key,t.key)},this.keyedMap=ts(),this.sortedSet=new Wa(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),lh=function(){function e(){this.Jr=new Wa(Wi.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Ci():this.Jr=this.Jr.insert(t,e)},e.prototype.Yr=function(){var e=[];return this.Jr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),hh=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,ch.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),fh=function(){this.Xr=void 0,this.listeners=[]},dh=function(){this.queries=new wc((function(e){return Xo(e)}),Yo),this.onlineState="Unknown",this.Zr=new Set};function ph(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,yi.Jh)(this,(function(c){switch(c.label){case 0:if(n=xi(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new fh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Xr=c.sent(),[3,4];case 3:return s=c.sent(),u=uh(s,"Initialization of query '"+Zo(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.eo(n.onlineState),o.Xr&&t.no(o.Xr)&&yh(n),[2]}}))}))}function vh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,yi.Jh)(this,(function(s){return n=xi(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function mh(e,t){for(var n=xi(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].no(a)&&(r=!0);u.Xr=a}}r&&yh(n)}function gh(e,t,n){var r=xi(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function yh(e){e.Zr.forEach((function(e){e.next()}))}var bh=function(){function e(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.no=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new hh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.io?this.oo(e)&&(this.so.next(e),o=!0):this.co(e,this.onlineState)&&(this.ao(e),o=!0),this.ro=e,o},e.prototype.onError=function(e){this.so.error(e)},e.prototype.eo=function(e){this.onlineState=e;var t=!1;return this.ro&&!this.io&&this.co(this.ro,e)&&(this.ao(this.ro),t=!0),t},e.prototype.co=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.uo&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.oo=function(e){if(e.docChanges.length>0)return!0;var t=this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.ao=function(e){e=hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)},e}(),wh=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.ho=function(){return"metadata"in this.payload},e}(),_h=function(){function e(e){this.D=e}return e.prototype.Gn=function(e){return ks(this.D,e)},e.prototype.zn=function(e){return e.metadata.exists?Os(this.D,e.document,!1):new yo(this.Gn(e.metadata.name),this.Hn(e.metadata.readTime))},e.prototype.Hn=function(e){return Ts(e)},e}(),Eh=function(){function e(e,t,n){this.lo=e,this.localStore=t,this.D=n,this.queries=[],this.documents=[],this.progress=Th(e)}return e.prototype.fo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.wo=function(e){for(var t=new Map,n=new _h(this.D),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.Gn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||os()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t,n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return[4,Xc(this.localStore,new _h(this.D),this.documents,this.lo.id)];case 1:e=o.sent(),t=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Zc(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Rc(Object.assign({},this.progress),e))]}}))}))},e}();function Th(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Sh=function(e){this.key=e},Ih=function(e){this.key=e},Ch=function(){function e(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=os(),this.mutatedKeys=os(),this.po=ta(e),this.Eo=new ch(this.po)}return Object.defineProperty(e.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),e.prototype.Io=function(e,t){var n=this,r=t?t.Ao:new lh,i=t?t.Eo:this.Eo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=zo(this.query)&&i.size===this.query.limit?i.last():null,c=Go(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof go?t:null;h&&(h=ea(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),zo(this.query)||Go(this.query))for(;a.size>this.query.limit;){var l=zo(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:a,Ao:r,Mn:s,mutatedKeys:o}},e.prototype.Ro=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;var o=e.Ao.Yr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ci()}};return n(e)-n(t)}(e.type,t.type)||r.po(e.doc,t.doc)})),this.bo(n);var a=t?this.vo():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==o.length||u?{snapshot:new hh(this.query,e.Eo,i,o,e.mutatedKeys,0===s,u,!1),Po:a}:{Po:a}},e.prototype.eo=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new lh,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},e.prototype.Vo=function(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations},e.prototype.bo=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._o=t._o.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t._o=t._o.delete(e)})),this.current=e.current)},e.prototype.vo=function(){var e=this;if(!this.current)return[];var t=this.yo;this.yo=os(),this.Eo.forEach((function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))}));var n=[];return t.forEach((function(t){e.yo.has(t)||n.push(new Ih(t))})),this.yo.forEach((function(e){t.has(e)||n.push(new Sh(e))})),n},e.prototype.So=function(e){this._o=e.jn,this.yo=os();var t=this.Io(e.documents);return this.applyChanges(t,!0)},e.prototype.Do=function(){return hh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},e}(),kh=function(e,t,n){this.query=e,this.targetId=t,this.view=n},xh=function(e){this.key=e,this.Co=!1},Nh=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new wc((function(e){return Xo(e)}),Yo),this.$o=new Map,this.Fo=new Set,this.Oo=new Wa(Wi.comparator),this.ko=new Map,this.Mo=new tl,this.Lo={},this.Bo=new Map,this.qo=uc.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),e}();function Ah(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return n=af(e),(o=n.No.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Do(),[3,4]):[3,1];case 1:return[4,Wc(n.localStore,Jo(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Ph(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&jl(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Ph(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,yi.Jh)(this,(function(l){switch(l.label){case 0:return e.Qo=function(t,n,r){return function(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:return(i=t.view.Io(n)).Mn?[4,Qc(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view.Io(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(Gh(e,t.targetId,a.Po),a.snapshot)]}}))}))}(e,t,n,r)},[4,Qc(e.localStore,t,!0)];case 1:return i=l.sent(),o=new Ch(t,i.jn),a=o.Io(i.documents),s=cs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),Gh(e,n,u.Po),c=new kh(t,n,o),[2,(e.No.set(t,c),e.$o.has(n)?e.$o.get(n).push(t):e.$o.set(n,[t]),u.snapshot)]}}))}))}function Dh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return n=xi(e),r=n.No.get(t),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter((function(e){return!Yo(e,t)}))),void n.No.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Hc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Ul(n.remoteStore,r.targetId),Bh(n,r.targetId)})).catch(dc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Bh(n,r.targetId),[4,Hc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Oh(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:r=sf(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(e,t){var n,r=xi(e),i=Xi.now(),o=t.reduce((function(e,t){return e.add(t.key)}),os());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Kn.bn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=Aa(c,n.get(c.key));null!=l&&a.push(new Ra(c.key,l,sa(l.proto.mapValue),Ia.exists(!0)))}return r.Tn.addMutationBatch(e,i,a,t)}))})).then((function(e){var t=e.applyToLocalDocumentSet(n);return{batchId:e.batchId,changes:t}}))}(r.localStore,t)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.Lo[e.currentUser.toKey()];r||(r=new Wa(Pi)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,Hh(r,i.changes)];case 3:return s.sent(),[4,Yl(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=uh(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Rh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:n=xi(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zc(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.ko.get(t);r&&(ki(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?ki(r.Co):e.removedDocuments.size>0&&(ki(r.Co),r.Co=!1))})),[4,Hh(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,dc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Lh(e,t,n){var r=xi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach((function(e,n){var r=n.view.eo(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=xi(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(t)&&(r=!0)})),r&&yh(n)}(r.eventManager,t),i.length&&r.xo.Tr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Mh(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,yi.Jh)(this,(function(c){switch(c.label){case 0:return(r=xi(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.ko.get(t),(o=i&&i.key)?(a=(a=new Wa(Wi.comparator)).insert(o,new yo(o,ra.min())),s=os().add(o),u=new us(ra.min(),new Map,new Ja(Pi),a,s),[4,Rh(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(t),Wh(r),[3,4];case 2:return[4,Hc(r.localStore,t,!1).then((function(){return Bh(r,t,n)})).catch(dc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Fh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:n=xi(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vc(n.localStore,t)];case 2:return i=o.sent(),Vh(n,r,null),qh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Hh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,dc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function jh(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:r=xi(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=xi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Tn.lookupMutationBatch(e,t).next((function(t){return ki(null!==t),r=t.keys(),n.Tn.removeMutationBatch(e,t)})).next((function(){return n.Tn.performConsistencyCheck(e)})).next((function(){return n.Kn.bn(e,r)}))}))}(r.localStore,t)];case 2:return i=o.sent(),Vh(r,t,n),qh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Hh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,dc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Uh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:Gl((n=xi(e)).remoteStore)||Ei("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(e){var t=xi(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Tn.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.Bo.get(r)||[]).push(t),n.Bo.set(r,i),[3,4]);case 3:return o=s.sent(),a=uh(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}}))}))}function qh(e,t){(e.Bo.get(t)||[]).forEach((function(e){e.resolve()})),e.Bo.delete(t)}function Vh(e,t,n){var r=xi(e),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function Bh(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.$o.get(t);r<i.length;r++){var o=i[r];e.No.delete(o),n&&e.xo.Ko(o,n)}e.$o.delete(t),e.isPrimaryClient&&e.Mo.os(t).forEach((function(t){e.Mo.containsKey(t)||zh(e,t)}))}function zh(e,t){e.Fo.delete(t.path.canonicalString());var n=e.Oo.get(t);null!==n&&(Ul(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.ko.delete(n),Wh(e))}function Gh(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Sh?(e.Mo.addReference(o.key,t),Kh(e,o)):o instanceof Ih?(Ei("SyncEngine","Document no longer in limbo: "+o.key),e.Mo.removeReference(o.key,t),e.Mo.containsKey(o.key)||zh(e,o.key)):Ci()}}function Kh(e,t){var n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.Fo.has(r)||(Ei("SyncEngine","New document in limbo: "+n),e.Fo.add(r),Wh(e))}function Wh(e){for(;e.Fo.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){var t=e.Fo.values().next().value;e.Fo.delete(t);var n=new Wi(zi.fromString(t)),r=e.qo.next();e.ko.set(r,new xh(n)),e.Oo=e.Oo.insert(n,r),jl(e.remoteStore,new Ru(Jo(Bo(n.path)),r,2,bi.o))}}function Hh(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:return r=xi(e),i=[],o=[],a=[],r.No.isEmpty()?[3,3]:(r.No.forEach((function(e,s){a.push(r.Qo(s,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=Mc.Nn(s.targetId,e);o.push(t)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.xo.Tr(i),[4,function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return(0,yi.Jh)(this,(function(h){switch(h.label){case 0:n=xi(e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return wu.forEach(t,(function(t){return wu.forEach(t.Cn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return wu.forEach(t.xn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Iu(r=h.sent()))throw r;return Ei("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Bn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Bn=n.Bn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Qh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return(n=xi(e)).currentUser.isEqual(t)?[3,3]:(Ei("SyncEngine","User change. New user:",t.toKey()),[4,qc(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.Bo.forEach((function(e){e.forEach((function(e){e.reject(new Vi(qi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Hh(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Jh(e,t){var n=xi(e),r=n.ko.get(t);if(r&&r.Co)return os().add(r.key);var i=os(),o=n.$o.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.No.get(u);i=i.unionWith(c.view.To)}return i}function $h(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return[4,Qc((n=xi(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.So(r),[2,(n.isPrimaryClient&&Gh(n,t.targetId,i.Po),i)]}}))}))}function Yh(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){return[2,$c((t=xi(e)).localStore).then((function(e){return Hh(t,e)}))]}))}))}function Xh(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return[4,function(e,t){var n=xi(e),r=xi(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Jt(e,t).next((function(t){return t?n.Kn.bn(e,t):wu.resolve(null)}))}))}((i=xi(e)).localStore,t)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Yl(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Vh(i,t,r||null),qh(i,t),function(e,t){xi(xi(e).Tn).Xt(t)}(i.localStore,t)):Ci(),a.label=4;case 4:return[4,Hh(i,o)];case 5:return a.sent(),[3,7];case 6:Ei("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}}))}))}function Zh(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return(0,yi.Jh)(this,(function(l){switch(l.label){case 0:return af(n=xi(e)),sf(n),!0!==t||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ef(n,r.toArray())]);case 1:return i=l.sent(),n.Uo=!0,[4,ih(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],jl(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.Uo?[3,7]:(u=[],c=Promise.resolve(),n.$o.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):c=c.then((function(){return Bh(n,t),Hc(n.localStore,t,!0)})),Ul(n.remoteStore,t)})),[4,c]);case 4:return l.sent(),[4,ef(n,u)];case 5:return l.sent(),function(e){var t=xi(e);t.ko.forEach((function(e,n){Ul(t.remoteStore,n)})),t.Mo.cs(),t.ko=new Map,t.Oo=new Wa(Wi.comparator)}(n),n.Uo=!1,[4,ih(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function ef(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,v;return(0,yi.Jh)(this,(function(m){switch(m.label){case 0:n=xi(e),r=[],i=[],o=0,a=t,m.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.$o.get(s))&&0!==c.length?[4,Wc(n.localStore,Jo(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(f=h[l],d=n.No.get(f),[4,$h(n,d)]):[3,6];case 4:(p=m.sent()).snapshot&&i.push(p.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Jc(n.localStore,s)];case 8:return v=m.sent(),[4,Wc(n.localStore,v)];case 9:return u=m.sent(),[4,Ph(n,tf(v),s,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}}))}))}function tf(e){return Vo(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function nf(e){var t=xi(e);return xi(xi(t.localStore).persistence).gn()}function rf(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:return(i=xi(e)).Uo?(Ei("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$c(i.localStore)];case 3:return o=s.sent(),a=us.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Hh(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Hc(i.localStore,t,!0)];case 6:return s.sent(),Bh(i,t,r),[3,8];case 7:Ci(),s.label=8;case 8:return[2]}}))}))}function of(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return(0,yi.Jh)(this,(function(d){switch(d.label){case 0:if(!(r=af(e)).Uo)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(a=o[i],r.$o.has(a)?(Ei("SyncEngine","Adding an already active target "+a),[3,5]):[4,Jc(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,Wc(r.localStore,s)];case 3:return u=d.sent(),[4,Ph(r,tf(s),u.targetId,!1)];case 4:d.sent(),jl(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(e){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return r.$o.has(e)?[4,Hc(r.localStore,e,!1).then((function(){Ul(r.remoteStore,e),Bh(r,e)})).catch(dc)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function af(e){var t=xi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Mh.bind(null,t),t.xo.Tr=mh.bind(null,t.eventManager),t.xo.Ko=gh.bind(null,t.eventManager),t}function sf(e){var t=xi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jh.bind(null,t),t}function uf(e,t,n){var r=xi(e);(function(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,yi.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=c.sent(),[4,function(e,t){var n=xi(e),r=Ts(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.He.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(e.localStore,r)];case 2:return c.sent()?[4,t.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(Th(r)),i=new Eh(r,e.localStore,t.D),[4,t.Wo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.fo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,t.Wo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,Hh(e,s.En,void 0)];case 12:return c.sent(),[4,function(e,t){var n=xi(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.He.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return Si("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var cf=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return this.D=xl(e.databaseInfo.databaseId),this.sharedClientState=this.jo(e),this.persistence=this.Go(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.zo(e),this.localStore=this.Ho(e),[2]}}))}))},e.prototype.zo=function(e){return null},e.prototype.Ho=function(e){return Uc(this.persistence,new Fc,e.initialUser,this.D)},e.prototype.Go=function(e){return new sl(cl.Cs,this.D)},e.prototype.jo=function(e){return new wl},e.prototype.terminate=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),lf=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Jo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,yi.ZT)(t,e),t.prototype.initialize=function(t){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Yc(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,t)];case 3:return n.sent(),[4,sf(this.Jo.syncEngine)];case 4:return n.sent(),[4,Yl(this.Jo.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Ho=function(e){return Uc(this.persistence,new Fc,e.initialUser,this.D)},t.prototype.zo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new mc(t,e.asyncQueue)},t.prototype.Go=function(e){var t=Oc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ec.withCacheSize(this.cacheSizeBytes):ec.DEFAULT;return new Ac(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Cl(),kl(),this.D,this.sharedClientState,!!this.forceOwnership)},t.prototype.jo=function(e){return new wl},t}(cf),hf=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Jo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,yi.ZT)(t,e),t.prototype.initialize=function(t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof bl?(this.sharedClientState.syncEngine={wi:Xh.bind(null,n),_i:rf.bind(null,n),mi:of.bind(null,n),gn:nf.bind(null,n),di:Yh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en((function(e){return(0,yi.mG)(r,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return[4,Zh(this.Jo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.jo=function(e){var t=Cl();if(!bl.At(t))throw new Vi(qi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Oc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bl(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(lf),ff=function(){function e(){}return e.prototype.initialize=function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n=this;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Lh(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Qh.bind(null,this.syncEngine),[4,ih(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new dh},e.prototype.createDatastore=function(e){var t,n=xl(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Il(t));return function(e,t,n){return new Ol(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Lh(a.syncEngine,e,0)},o=El.At()?new El:new _l,new Ll(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new Nh(e,t,n,r,i,o);return a&&(s.Uo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return t=xi(e),Ei("RemoteStore","RemoteStore shutting down."),t.Qr.add(5),[4,Fl(t)];case 1:return n.sent(),t.Wr.shutdown(),t.jr.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();function df(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return(0,yi.mG)(this,void 0,void 0,(function(){var r;return(0,yi.Jh)(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var pf=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.Yo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Xo=function(){this.muted=!0},e.prototype.Yo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),vf=function(){function e(e,t){var n=this;this.Zo=e,this.D=t,this.metadata=new bu,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then((function(e){e&&e.ho()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Zo.cancel()},e.prototype.getMetadata=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Wo=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.ec())]}}))}))},e.prototype.ec=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t,n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(e=i.sent())?[2,null]:(t=this.tc.decode(e),n=Number(t),isNaN(n)&&this.sc("length string ("+t+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new wh(JSON.parse(r),e.length+n)]}}))}))},e.prototype.rc=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.nc=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.ic=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.tc.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.sc=function(e){throw this.Zo.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.oc=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),mf=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n=this;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Vi(qi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return n=xi(e),r=As(n.D)+"/documents",i={documents:t.map((function(e){return Cs(n.D,e)}))},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){ki(!!t.found),t.found.name,t.found.updateTime;var n=ks(e,t.found.name),r=Ts(t.found.updateTime),i=new oa({mapValue:{fields:t.found.fields}});return new go(n,r,i,{})}(e,t):"missing"in t?function(e,t){ki(!!t.missing),ki(!!t.readTime);var n=ks(e,t.missing),r=Ts(t.readTime);return new yo(n,r)}(e,t):Ci()}(n.D,e);a.set(t.key.toString(),t)})),s=[],[2,(t.forEach((function(e){var t=a.get(e.toString());ki(!!t),s.push(t)})),s)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){e instanceof yo||e instanceof go?n.recordVersion(e):Ci()})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new Va(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t=this;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=Wi.fromPath(n);t.mutations.push(new Ba(r,t.precondition(r)))})),[4,function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return n=xi(e),r=As(n.D)+"/documents",i={writes:t.map((function(e){return Rs(n.D,e)}))},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof go)t=e.version;else{if(!(e instanceof yo))throw Ci();t=ra.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Vi(qi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ia.updateTime(t):Ia.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ra.min()))throw new Vi(qi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ia.updateTime(t)}return Ia.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),gf=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Nl(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ac()},e.prototype.ac=function(){var e=this;this.rr.Yi((function(){return(0,yi.mG)(e,void 0,void 0,(function(){var e,t,n=this;return(0,yi.Jh)(this,(function(r){return e=new mf(this.datastore),(t=this.uc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.hc(e)}))}))})).catch((function(e){n.hc(e)})),[2]}))}))}))},e.prototype.uc=function(e){try{var t=this.updateFunction(e);return!Fi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.hc=function(e){var t=this;this.cc>0&&this.lc(e)?(this.cc-=1,this.asyncQueue.enqueueAndForget((function(){return t.ac(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.lc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ga(t)}return!1},e}(),yf=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=ll.UNAUTHENTICATED,this.clientId=Ai.u(),this.credentialListener=function(){},this.receivedInitialUser=new bu,this.credentials.setChangeListener((function(e){Ei("FirestoreClient","Received user=",e.uid),r.user=e,r.credentialListener(e),r.receivedInitialUser.resolve()}))}return e.prototype.getConfiguration=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(e.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},e.prototype.setCredentialChangeListener=function(e){var t=this;this.credentialListener=e,this.receivedInitialUser.promise.then((function(){return t.credentialListener(t.user)}))},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vi(qi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new bu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,yi.mG)(e,void 0,void 0,(function(){var e,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=uh(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();function bf(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i=this;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Ei("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,e.asyncQueue.enqueueRetryable((function(){return(0,yi.mG)(i,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return[4,qc(t.localStore,n)];case 1:return e.sent(),[2]}}))}))})))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function wf(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,_f(e)];case 1:return n=i.sent(),Ei("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(n){return e.asyncQueue.enqueueRetryable((function(){return function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return(n=xi(e)).asyncQueue.verifyOperationInProgress(),Ei("RemoteStore","RemoteStore received new credentials"),r=Gl(n),n.Qr.add(3),[4,Fl(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Qr.delete(3),[4,Ml(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,n)}))})),e.onlineComponents=t,[2]}}))}))}function _f(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Ei("FirestoreClient","Using default OfflineComponentProvider"),[4,bf(e,new cf)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function Ef(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Ei("FirestoreClient","Using default OnlineComponentProvider"),[4,wf(e,new ff)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function Tf(e){return _f(e).then((function(e){return e.persistence}))}function Sf(e){return _f(e).then((function(e){return e.localStore}))}function If(e){return Ef(e).then((function(e){return e.remoteStore}))}function Cf(e){return Ef(e).then((function(e){return e.syncEngine}))}function kf(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,Ef(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=Ah.bind(null,t.syncEngine),n.onUnlisten=Dh.bind(null,t.syncEngine),n)]}}))}))}function xf(e,t,n){var r=this;void 0===n&&(n={});var i=new bu;return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(r,void 0,void 0,(function(){var r;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new pf({next:function(o){t.enqueueAndForget((function(){return vh(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Vi(qi.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Vi(qi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new bh(Bo(n.path),o,{includeMetadataChanges:!0,uo:!0});return ph(e,a)},[4,kf(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function Nf(e,t,n){var r=this;void 0===n&&(n={});var i=new bu;return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(r,void 0,void 0,(function(){var r;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new pf({next:function(n){t.enqueueAndForget((function(){return vh(e,a)})),n.fromCache&&"server"===r.source?i.reject(new Vi(qi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new bh(n,o,{includeMetadataChanges:!0,uo:!0});return ph(e,a)},[4,kf(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var Af=function(e,t,n,r,i,o){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Pf=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Df=new Map,Of=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},Rf=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){this.changeListener=e,e(ll.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Lf=function(){function e(e){var t=this;this.fc=null,this.currentUser=ll.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){t.dc++,t.currentUser=t.wc(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.dc=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),e.get().then((function(e){t.auth=e,t.fc&&t.auth.addAuthTokenListener(t.fc)}),(function(){})))}return e.prototype.getToken=function(){var e=this,t=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.dc!==t?(Ei("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ki("string"==typeof n.accessToken),new Of(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},e.prototype.wc=function(){var e=this.auth&&this.auth.getUid();return ki(null===e||"string"==typeof e),new ll(e)},e}(),Mf=function(){function e(e,t){this._c=e,this.mc=t,this.type="FirstParty",this.user=ll.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.mc},t=this._c.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!1,configurable:!0}),e}(),Ff=function(){function e(e,t){this._c=e,this.mc=t}return e.prototype.getToken=function(){return Promise.resolve(new Mf(this._c,this.mc))},e.prototype.setChangeListener=function(e){e(ll.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function jf(e,t,n){if(!n)throw new Vi(qi.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Uf(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Vi(qi.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function qf(e,t,n,r){if(!0===t&&!0===r)throw new Vi(qi.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Vf(e){if(!Wi.isDocumentKey(e))throw new Vi(qi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Bf(e){if(Wi.isDocumentKey(e))throw new Vi(qi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function zf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":Ci()}function Gf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vi(qi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=zf(e);throw new Vi(qi.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Kf(e,t){if(t<=0)throw new Vi(qi.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var Wf=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Vi(qi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Vi(qi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,qf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),Hf=function(){function e(e,t){this._persistenceKey="(lite)",this._settings=new Wf({}),this._settingsFrozen=!1,e instanceof Pf?(this._databaseId=e,this._credentials=new Rf):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vi(qi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pf(e.options.projectId)}(e),this._credentials=new Lf(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new Vi(qi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new Vi(qi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wf(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Rf;switch(e.type){case"gapi":var t=e.client;return ki(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ff(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new Vi(qi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return this,(e=Df.get(this))&&(Ei("ComponentProvider","Removing Datastore"),Df.delete(this),e.terminate()),Promise.resolve();var e},e}(),Qf=function(e){this._delegate=e},Jf=function(){function e(e,t,n){this._converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Yf(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),$f=function(){function e(e,t,n){this._converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Yf=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,Bo(r))||this).firestore=t,i._path=r,i.type="collection",i}return(0,yi.ZT)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Jf(this.firestore,null,new Wi(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}($f);function Xf(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof Qf&&(e=e._delegate),jf("collection","path",t),e instanceof Hf)return Bf(n=zi.fromString.apply(zi,(0,yi.ev)([t],r))),new Yf(e,null,n);if(!(e instanceof Jf||e instanceof Yf))throw new Vi(qi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bf(n=zi.fromString.apply(zi,(0,yi.ev)([e.path],r)).child(zi.fromString(t))),new Yf(e.firestore,null,n)}function Zf(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof Qf&&(e=e._delegate),1===arguments.length&&(t=Ai.u()),jf("doc","path",t),e instanceof Hf)return Vf(n=zi.fromString.apply(zi,(0,yi.ev)([t],r))),new Jf(e,null,new Wi(n));if(!(e instanceof Jf||e instanceof Yf))throw new Vi(qi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Vf(n=e._path.child(zi.fromString.apply(zi,(0,yi.ev)([t],r)))),new Jf(e.firestore,e instanceof Yf?e._converter:null,new Wi(n))}function ed(e,t){return e instanceof Qf&&(e=e._delegate),t instanceof Qf&&(t=t._delegate),(e instanceof Jf||e instanceof Yf)&&(t instanceof Jf||t instanceof Yf)&&e.firestore===t.firestore&&e.path===t.path&&e._converter===t._converter}function td(e,t){return e instanceof Qf&&(e=e._delegate),t instanceof Qf&&(t=t._delegate),e instanceof $f&&t instanceof $f&&e.firestore===t.firestore&&Yo(e._query,t._query)&&e._converter===t._converter}var nd=function(){function e(){var e=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Nl(this,"async_queue_retry"),this.bc=function(){var t=kl();t&&Ei("AsyncQueue","Visibility state changed to "+t.visibilityState),e.rr.Zi()};var t=kl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.vc(),this.Pc(e)},e.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var e=kl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.bc)}},e.prototype.enqueue=function(e){return this.vc(),this.Ec?new Promise((function(e){})):this.Pc(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.gc.push(e),t.Vc()}))},e.prototype.Vc=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t=this;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Iu(e=n.sent()))throw e;return Ei("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.gc.length>0&&this.rr.Yi((function(){return t.Vc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Pc=function(e){var t=this,n=this.yc.then((function(){return t.Ac=!0,e().catch((function(e){throw t.Ic=e,t.Ac=!1,Ti("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.Ac=!1,e}))}));return this.yc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.vc(),this.Rc.indexOf(e)>-1&&(t=0);var i=sh.createAndSchedule(this,e,t,n,(function(e){return r.Sc(e)}));return this.Tc.push(i),i},e.prototype.vc=function(){this.Ic&&Ci()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Dc=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e;return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return[4,e=this.yc];case 1:t.sent(),t.label=2;case 2:if(e!==this.yc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Cc=function(e){for(var t=0,n=this.Tc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.xc=function(e){var t=this;return this.Dc().then((function(){t.Tc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Dc()}))},e.prototype.Nc=function(e){this.Rc.push(e)},e.prototype.Sc=function(e){var t=this.Tc.indexOf(e);this.Tc.splice(t,1)},e}();function rd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var id=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new bu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),od=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._queue=new nd,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return(0,yi.ZT)(t,e),t.prototype._terminate=function(){return this._firestoreClient||sd(this),this._firestoreClient.terminate()},t}(Hf);function ad(e){return e._firestoreClient||sd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function sd(e){var t=e._freezeSettings(),n=function(e,t,n){return new Af(e,t,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(e._databaseId,e._persistenceKey,t);e._firestoreClient=new yf(e._credentials,e._queue,n)}function ud(e,t,n){var r=this,i=new bu;return e.asyncQueue.enqueue((function(){return(0,yi.mG)(r,void 0,void 0,(function(){var r;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,bf(e,n)];case 1:return o.sent(),[4,wf(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===qi.FAILED_PRECONDITION||e.code===qi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function cd(e){if(e._initialized||e._terminated)throw new Vi(qi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ld=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new Vi(qi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ki(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),hd=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(Hi.fromBase64String(t))}catch(t){throw new Vi(qi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(Hi.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),fd=function(e){this._methodName=e},dd=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vi(qi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vi(qi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return Pi(this._lat,e._lat)||Pi(this._long,e._long)},e}(),pd=/^__.*__$/,vd=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oa(e,this.data,t,this.fieldTransforms)},e}(),md=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function gd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ci()}}var yd=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),e.prototype.Oc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Mc:!1});return r.Lc(e),r},e.prototype.Bc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Mc:!1});return r.$c(),r},e.prototype.qc=function(e){return this.Oc({path:void 0,Mc:!0})},e.prototype.Uc=function(e){return jd(e,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.$c=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Lc(this.path.get(e))},e.prototype.Lc=function(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(gd(this.Fc)&&pd.test(e))throw this.Uc('Document fields cannot begin and end with "__"')},e}(),bd=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.D=n||xl(e)}return e.prototype.Wc=function(e,t,n,r){return void 0===r&&(r=!1),new yd({Fc:e,methodName:t,Kc:n,path:Ki.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},e}();function wd(e){var t=e._freezeSettings(),n=xl(e._databaseId);return new bd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _d(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Wc(o.merge||o.mergeFields?2:0,t,n,i);Rd("Data must be an object, but it was:",a,r);var s,u,c=Dd(r,a);if(o.merge)s=new ia(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ld(t,f[h],n);if(!a.contains(d))throw new Vi(qi.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Ud(l,d)||l.push(d)}s=new ia(l),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new vd(new oa(c),s,u)}var Ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Fc)throw 1===e.Fc?e.Uc(this._methodName+"() can only appear at the top level of your update data"):e.Uc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(fd);function Td(e,t,n){return new yd({Fc:3,Kc:t.settings.Kc,methodName:e._methodName,Mc:n},t.databaseId,t.D,t.ignoreUndefinedProperties)}var Sd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype._toFieldTransform=function(e){return new Ta(e.path,new va)},t.prototype.isEqual=function(e){return e instanceof t},t}(fd),Id=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).jc=n,r}return(0,yi.ZT)(t,e),t.prototype._toFieldTransform=function(e){var t=Td(this,e,!0),n=this.jc.map((function(e){return Pd(e,t)})),r=new ma(n);return new Ta(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(fd),Cd=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).jc=n,r}return(0,yi.ZT)(t,e),t.prototype._toFieldTransform=function(e){var t=Td(this,e,!0),n=this.jc.map((function(e){return Pd(e,t)})),r=new ya(n);return new Ta(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(fd),kd=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Gc=n,r}return(0,yi.ZT)(t,e),t.prototype._toFieldTransform=function(e){var t=new wa(e.D,la(e.D,this.Gc));return new Ta(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(fd);function xd(e,t,n,r){var i=e.Wc(1,t,n);Rd("Data must be an object, but it was:",i,r);var o=[],a=new aa;Li(r,(function(e,r){var s=Fd(t,e,n);r instanceof Qf&&(r=r._delegate);var u=i.Bc(s);if(r instanceof Ed)o.push(s);else{var c=Pd(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new ia(o);return new md(a.v(),s,i.fieldTransforms)}function Nd(e,t,n,r,i,o){var a=e.Wc(1,t,n),s=[Ld(t,r,n)],u=[i];if(o.length%2!=0)throw new Vi(qi.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Ld(t,o[c])),u.push(o[c+1]);for(var l=[],h=new aa,f=s.length-1;f>=0;--f)if(!Ud(l,s[f])){var d=s[f],p=u[f];p instanceof Qf&&(p=p._delegate);var v=a.Bc(d);if(p instanceof Ed)l.push(d);else{var m=Pd(p,v);null!=m&&(l.push(d),h.set(d,m))}}var g=new ia(l);return new md(h.v(),g,a.fieldTransforms)}function Ad(e,t,n,r){return void 0===r&&(r=!1),Pd(n,e.Wc(r?4:3,t))}function Pd(e,t){if(e instanceof Qf&&(e=e._delegate),Od(e))return Rd("Unsupported field value:",t,e),Dd(e,t);if(e instanceof fd)return function(e,t){if(!gd(t.Fc))throw t.Uc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Uc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Mc&&4!==t.Fc)throw t.Uc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=Pd(o[i],t.qc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(e instanceof Qf&&(e=e._delegate),null===e)return{nullValue:"NULL_VALUE"};if("number"==typeof e)return la(t.D,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Xi.fromDate(e);return{timestampValue:ws(t.D,n)}}if(e instanceof Xi)return n=new Xi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:ws(t.D,n)};if(e instanceof dd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hd)return{bytesValue:_s(t.D,e._byteString)};if(e instanceof Jf){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ss(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Uc("Unsupported field value: "+zf(e))}(e,t)}function Dd(e,t){var n={};return Mi(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Li(e,(function(e,r){var i=Pd(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Od(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xi||e instanceof dd||e instanceof hd||e instanceof Jf||e instanceof fd)}function Rd(e,t,n){if(!Od(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=zf(n);throw"an object"===r?t.Uc(e+" a custom object"):t.Uc(e+" "+r)}}function Ld(e,t,n){if(t instanceof Qf&&(t=t._delegate),t instanceof ld)return t._internalPath;if("string"==typeof t)return Fd(e,t);throw jd("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Md=new RegExp("[~\\*/\\[\\]]");function Fd(e,t,n){if(t.search(Md)>=0)throw jd("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(ld.bind.apply(ld,(0,yi.ev)([void 0],t.split(".")))))._internalPath}catch(ke){throw jd("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function jd(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Vi(qi.INVALID_ARGUMENT,(s+=". ")+e+u)}function Ud(e,t){return e.some((function(e){return e.isEqual(t)}))}var qd=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Jf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new Vd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.toProto())}},e.prototype.get=function(e){if(this._document){var t=this._document.data().field(Bd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),Vd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(qd);function Bd(e,t){return"string"==typeof t?Fd(e,t):t instanceof Qf?t._delegate._internalPath:t._internalPath}var zd=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Gd=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return(0,yi.ZT)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.toProto(),e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data().field(Bd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(qd),Kd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Gd),Wd=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Kd(n._firestore,n._userDataWriter,r.key,r,new zd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vi(qi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Kd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query._converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Kd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query._converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Hd(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function Hd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ci()}}function Qd(e,t){return e instanceof Gd&&t instanceof Gd?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Wd&&t instanceof Wd&&e._firestore===t._firestore&&td(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Jd(e){if(Go(e)&&0===e.explicitOrderBy.length)throw new Vi(qi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $d=function(){};function Yd(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Xd=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).zc=t,i.Hc=n,i.Jc=r,i.type="where",i}return(0,yi.ZT)(t,e),t.prototype._apply=function(e){var t=wd(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Vi(qi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){op(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(ip(r,e,h))}s={arrayValue:{values:u}}}else s=ip(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||op(a,o),s=Ad(n,"where",a,"in"===o||"not-in"===o);var f=Io.create(i,o,s);return function(e,t){if(t.g()){var n=Wo(e);if(null!==n&&!n.isEqual(t.field))throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Ko(e);null!==r&&ap(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Vi(qi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Vi(qi.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new $f(e.firestore,e._converter,function(e,t){var n=e.filters.concat([t]);return new qo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}($d),Zd=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).zc=t,r.Yc=n,r.type="orderBy",r}return(0,yi.ZT)(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Mo(t,n);return function(e,t){if(null===Ko(e)){var n=Wo(e);null!==n&&ap(e,n,t.field)}}(e,r),r}(e._query,this.zc,this.Yc);return new $f(e.firestore,e._converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new qo(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}($d),ep=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Xc=n,i.Zc=r,i}return(0,yi.ZT)(t,e),t.prototype._apply=function(e){return new $f(e.firestore,e._converter,$o(e._query,this.Xc,this.Zc))},t}($d),tp=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.ta=n,i.ea=r,i}return(0,yi.ZT)(t,e),t.prototype._apply=function(e){var t=rp(e,this.type,this.ta,this.ea);return new $f(e.firestore,e._converter,function(e,t){return new qo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}($d),np=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.ta=n,i.ea=r,i}return(0,yi.ZT)(t,e),t.prototype._apply=function(e){var t=rp(e,this.type,this.ta,this.ea);return new $f(e.firestore,e._converter,function(e,t){return new qo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}($d);function rp(e,t,n,r){if(n[0]instanceof Qf&&(n[0]=n[0]._delegate),n[0]instanceof qd)return function(e,t,n,r,i){if(!r)throw new Vi(qi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Qo(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(co(t,r.key));else{var c=r.field(u.field);if(Zi(c))throw new Vi(qi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ro(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=wd(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new Vi(qi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ho(e)&&-1!==c.indexOf("/"))throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(zi.fromString(c));if(!Wi.isDocumentKey(l))throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Wi(l);s.push(co(t,h))}else{var f=Ad(n,r,c);s.push(f)}}return new Ro(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function ip(e,t,n){if(n instanceof Qf&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ho(t)&&-1!==n.indexOf("/"))throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(zi.fromString(n));if(!Wi.isDocumentKey(r))throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return co(e,new Wi(r))}if(n instanceof Jf)return co(e,n._key);throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+zf(n)+".")}function op(e,t){if(!Array.isArray(e)||0===e.length)throw new Vi(qi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Vi(qi.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function ap(e,t,n){if(!n.isEqual(t))throw new Vi(qi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var sp=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ci()}},e.prototype.convertObject=function(e,t){var n=this,r={};return Li(e.fields||{},(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new dd($i(e.latitude),$i(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=eo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(to(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=Ji(e);return new Xi(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=zi.fromString(e);ki(Js(n));var r=new Pf(n.get(1),n.get(3)),i=new Wi(n.popFirst(5));return r.isEqual(t)||Ti("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function up(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var cp=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,yi.ZT)(t,e),t.prototype.convertBytes=function(e){return new hd(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jf(this.firestore,null,t)},t}(sp),lp=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wd(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=hp(e,this._firestore),i=up(r._converter,t,n),o=_d(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Ia.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=hp(e,this._firestore);return t instanceof Qf&&(t=t._delegate),o="string"==typeof t||t instanceof ld?Nd(this._dataReader,"WriteBatch.update",a._key,t,n,r):xd(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,Ia.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=hp(e,this._firestore);return this._mutations=this._mutations.concat(new Va(t._key,Ia.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vi(qi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function hp(e,t){if(e instanceof Qf&&(e=e._delegate),e.firestore!==t)throw new Vi(qi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var fp=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,yi.ZT)(t,e),t.prototype.convertBytes=function(e){return new hd(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jf(this.firestore,null,t)},t}(sp);function dp(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Gf(e,Jf);var o=Gf(e.firestore,od),a=wd(o);return t instanceof Qf&&(t=t._delegate),vp(o,[("string"==typeof t||t instanceof ld?Nd(a,"updateDoc",e._key,t,n,r):xd(a,"updateDoc",e._key,t)).toMutation(e._key,Ia.exists(!0))])}function pp(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e instanceof Qf&&(e=e._delegate);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||rd(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(rd(i[s])){var f=i[s];i[s]=null===(t=f.next)||void 0===t?void 0:t.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(e instanceof Jf)c=Gf(e.firestore,od),l=Bo(e._key.path),u={next:function(t){i[s]&&i[s](mp(c,e,t))},error:i[s+1],complete:i[s+2]};else{var d=Gf(e,$f);c=Gf(d.firestore,od),l=d._query;var p=new fp(c);u={next:function(e){i[s]&&i[s](new Wd(c,p,d,e))},error:i[s+1],complete:i[s+2]},Jd(e._query)}return function(e,t,n,r){var i=this,o=new pf(r),a=new bh(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(i,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return t=ph,[4,kf(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Xo(),e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(i,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return t=vh,[4,kf(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))}))}}(ad(c),l,h,u)}function vp(e,t){return function(e,t){var n=this,r=new bu;return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(n,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return n=Oh,[4,Cf(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(ad(e),t)}function mp(e,t,n){var r=n.docs.get(t._key),i=new fp(e);return new Gd(e,i,t._key,r,new zd(n.hasPendingWrites,n.fromCache),t._converter)}var gp=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return(0,yi.ZT)(t,e),t.prototype.get=function(t){var n=this,r=hp(t,this._firestore),i=new fp(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Gd(n._firestore,i,r._key,e._document,new zd(!1,!1),r._converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=wd(e)}return e.prototype.get=function(e){var t=this,n=hp(e,this._firestore),r=new cp(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ci();var i=e[0];if(i instanceof yo)return new qd(t._firestore,r,n._key,null,n._converter);if(i instanceof go)return new qd(t._firestore,r,i.key,i,n._converter);throw Ci()}))},e.prototype.set=function(e,t,n){var r=hp(e,this._firestore),i=up(r._converter,t,n),o=_d(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=hp(e,this._firestore);return t instanceof Qf&&(t=t._delegate),o="string"==typeof t||t instanceof ld?Nd(this._dataReader,"Transaction.update",a._key,t,n,r):xd(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=hp(e,this._firestore);return this._transaction.delete(t._key),this},e}());function yp(){if("undefined"==typeof Uint8Array)throw new Vi(qi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function bp(){if("undefined"==typeof atob)throw new Vi(qi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.fromBase64String=function(e){return bp(),new t(hd.fromBase64String(e))},t.fromUint8Array=function(e){return yp(),new t(hd.fromUint8Array(e))},t.prototype.toBase64=function(){return bp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return yp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(Qf),_p=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){cd(e=Gf(e,od));var n=ad(e),r=e._freezeSettings(),i=new ff;return ud(n,i,new lf(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){cd(e=Gf(e,od));var t=ad(e),n=e._freezeSettings(),r=new ff;return ud(t,r,new hf(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new Vi(qi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new bu;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,yi.mG)(t,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return Eu.At()?(t=e+"main",[4,Eu.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Oc(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),Ep=function(e){function t(t,n,r){var i=this;return(i=e.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},t instanceof Pf||(i.sa=t),i}return(0,yi.ZT)(t,e),Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){e.merge&&delete(e=Object.assign(Object.assign({},this._delegate._getSettings()),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,t){!function(e,t,n){var r=(e=Gf(e,Hf))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==t&&Si("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},r),{host:t+":"+n,ssl:!1}))}(this._delegate,e,t)},t.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return(0,yi.mG)(t,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,Tf(e)];case 1:return t=r.sent(),[4,If(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=xi(e);return t.Qr.delete(0),Ml(t)}(n))]}}))}))}))}(ad(Gf(this._delegate,od)))},t.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return(0,yi.mG)(t,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,Tf(e)];case 1:return t=r.sent(),[4,If(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return(t=xi(e)).Qr.add(0),[4,Fl(t)];case 1:return n.sent(),t.jr.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(ad(Gf(this._delegate,od)))},t.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&qf("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new bu;return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(t,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return t=Uh,[4,Cf(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(ad(Gf(this._delegate,od)))},t.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new pf(t);return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(n,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return t=function(e,t){xi(e).Zr.add(t),t.next()},[4,kf(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Xo(),e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(n,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return t=function(e,t){xi(e).Zr.delete(t)},[4,kf(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(ad(e=Gf(e,od)),rd(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.sa)throw new Vi(qi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new Mp(this,Xf(this._delegate,e))}catch(e){throw xp(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new kp(this,Zf(this._delegate,e))}catch(e){throw xp(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new Op(this,function(e,t){if(e=Gf(e,Hf),jf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Vi(qi.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new $f(e,null,function(e){return new qo(zi.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw xp(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new bu;return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(n,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(e){return Ef(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new gf(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(ad(e),(function(n){return t(new gp(e,n))}))}(this._delegate,(function(n){return e(new Sp(t,n))}))},t.prototype.batch=function(){var e=this;return ad(this._delegate),new Ip(new lp(this._delegate,(function(t){return vp(e._delegate,t)})))},t.prototype.loadBundle=function(e){throw new Vi(qi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new Vi(qi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(Qf),Tp=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,yi.ZT)(t,e),t.prototype.convertBytes=function(e){return new wp(new hd(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return kp.ia(t,this.firestore,null)},t}(sp);var Sp=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r._userDataWriter=new Tp(t),r}return(0,yi.ZT)(t,e),t.prototype.get=function(e){var t=this,n=Fp(e);return this._delegate.get(n).then((function(e){return new Pp(t._firestore,new Gd(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n._converter))}))},t.prototype.set=function(e,t,n){var r=Fp(e);return n?(Uf("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},t.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Fp(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,(0,yi.ev)([a,t,n],i)),this},t.prototype.delete=function(e){var t=Fp(e);return this._delegate.delete(t),this},t}(Qf),Ip=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype.set=function(e,t,n){var r=Fp(e);return n?(Uf("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},t.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Fp(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,(0,yi.ev)([a,t,n],i)),this},t.prototype.delete=function(e){var t=Fp(e);return this._delegate.delete(t),this},t.prototype.commit=function(){return this._delegate.commit()},t}(Qf),Cp=function(e){function t(t,n,r){var i=this;return(i=e.call(this,r)||this)._firestore=t,i._userDataWriter=n,i}return(0,yi.ZT)(t,e),t.prototype.fromFirestore=function(e,t){var n=new Kd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dp(this._firestore,n),null!=t?t:{})},t.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},t.ra=function(e,n){var r=t.oa,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Tp(e),n),i.set(n,o)),o},t}(Qf);Cp.oa=new WeakMap;var kp=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).firestore=t,r._userDataWriter=new Tp(t),r}return(0,yi.ZT)(t,e),t.ca=function(e,n,r){if(e.length%2!=0)throw new Vi(qi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Jf(n._delegate,r,new Wi(e)))},t.ia=function(e,n,r){return new t(n,new Jf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Mp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new Mp(this.firestore,Xf(this._delegate,e))}catch(e){throw xp(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return e instanceof Qf&&(e=e._delegate),e instanceof Jf&&ed(this._delegate,e)},t.prototype.set=function(e,t){t=Uf("DocumentReference.set",t);try{return function(e,t,n){e=Gf(e,Jf);var r=Gf(e.firestore,od),i=up(e._converter,t,n);return vp(r,[_d(wd(r),"setDoc",e._key,i,null!==e._converter,n).toMutation(e._key,Ia.none())])}(this._delegate,e,t)}catch(e){throw xp(e,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?dp(this._delegate,e):dp.apply(void 0,(0,yi.ev)([this._delegate,e,t],n))}catch(e){throw xp(e,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return vp(Gf((e=this._delegate).firestore,od),[new Va(e._key,Ia.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Np(t),i=Ap(t,(function(t){return new Pp(e.firestore,new Gd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}));return pp(this._delegate,r,i)},t.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Gf(e,Jf);var t=Gf(e.firestore,od),n=ad(t),r=new fp(t);return function(e,t){var n=this,r=new bu;return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(n,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=xi(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Kn.In(e,t)}))}(e,t)];case 1:return(i=o.sent())instanceof go?n.resolve(i):i instanceof yo?n.resolve(null):n.reject(new Vi(qi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=uh(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Sf(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new Gd(t,r,e._key,n,new zd(n instanceof go&&n.hasLocalMutations,!0),e._converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Gf(e,Jf);var t=Gf(e.firestore,od);return xf(ad(t),e._key,{source:"server"}).then((function(n){return mp(t,e,n)}))}(this._delegate):function(e){e=Gf(e,Jf);var t=Gf(e.firestore,od);return xf(ad(t),e._key).then((function(n){return mp(t,e,n)}))}(this._delegate)).then((function(e){return new Pp(t.firestore,new Gd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Cp.ra(this.firestore,e)):this._delegate.withConverter(null))},t}(Qf);function xp(e,t,n){return e.message=e.message.replace(t,n),e}function Np(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!rd(r))return r}return{}}function Ap(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=rd(e[0])?e[0]:rd(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pp=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r}return(0,yi.ZT)(t,e),Object.defineProperty(t.prototype,"ref",{get:function(){return new kp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,t){return this._delegate.get(e,t)},t.prototype.isEqual=function(e){return Qd(this._delegate,e._delegate)},t}(Qf),Dp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(Pp),Op=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).firestore=t,r._userDataWriter=new Tp(t),r}return(0,yi.ZT)(t,e),t.prototype.where=function(e,n,r){try{return new t(this.firestore,Yd(this._delegate,function(e,t,n){var r=t,i=Bd("where",e);return new Xd(i,r,n)}(e,n,r)))}catch(e){throw xp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Yd(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Bd("orderBy",e);return new Zd(r,n)}(e,n)))}catch(e){throw xp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Yd(this._delegate,function(e){return Kf("limit",e),new ep("limit",e,"F")}(e)))}catch(e){throw xp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Yd(this._delegate,function(e){return Kf("limitToLast",e),new ep("limitToLast",e,"L")}(e)))}catch(e){throw xp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new tp("startAt",e,!0)}.apply(void 0,e)))}catch(e){throw xp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new tp("startAfter",e,!1)}.apply(void 0,e)))}catch(e){throw xp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new np("endBefore",e,!0)}.apply(void 0,e)))}catch(e){throw xp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new np("endAt",e,!1)}.apply(void 0,e)))}catch(e){throw xp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return td(this._delegate,e._delegate)},t.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Gf(e,$f);var t=Gf(e.firestore,od),n=ad(t),r=new fp(t);return function(e,t){var n=this,r=new bu;return e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(n,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Qc(e,t,!0)];case 1:return s=u.sent(),r=new Ch(t,s.jn),i=r.Io(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=uh(a,"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Sf(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new Wd(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Gf(e,$f);var t=Gf(e.firestore,od),n=ad(t),r=new fp(t);return Nf(n,e._query,{source:"server"}).then((function(n){return new Wd(t,r,e,n)}))}(this._delegate):function(e){e=Gf(e,$f);var t=Gf(e.firestore,od),n=ad(t),r=new fp(t);return Jd(e._query),Nf(n,e._query).then((function(n){return new Wd(t,r,e,n)}))}(this._delegate)).then((function(e){return new Lp(t.firestore,new Wd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},t.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Np(t),i=Ap(t,(function(t){return new Lp(e.firestore,new Wd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return pp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Cp.ra(this.firestore,e)):this._delegate.withConverter(null))},t}(Qf),Rp=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r}return(0,yi.ZT)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Dp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(Qf),Lp=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r}return(0,yi.ZT)(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return new Op(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new Dp(e._firestore,t)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Rp(t._firestore,e)}))},t.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Dp(n._firestore,r))}))},t.prototype.isEqual=function(e){return Qd(this._delegate,e._delegate)},t}(Qf),Mp=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return(0,yi.ZT)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new kp(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new kp(this.firestore,void 0===e?Zf(this._delegate):Zf(this._delegate,e))}catch(e){throw xp(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=Gf(e.firestore,od),r=Zf(e),i=up(e._converter,t);return vp(n,[_d(wd(e.firestore),"addDoc",r._key,i,null!==e._converter,{}).toMutation(r._key,Ia.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new kp(t.firestore,e)}))},t.prototype.isEqual=function(e){return ed(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Cp.ra(this.firestore,e)):this._delegate.withConverter(null))},t}(Op);function Fp(e){return e instanceof Qf&&(e=e._delegate),Gf(e,Jf)}var jp=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.call(this,new(ld.bind.apply(ld,(0,yi.ev)([void 0],t))))||this}return(0,yi.ZT)(t,e),t.documentId=function(){return new t(Ki.keyField().canonicalString())},t.prototype.isEqual=function(e){return e instanceof Qf&&(e=e._delegate),e instanceof ld&&this._delegate._internalPath.isEqual(e._internalPath)},t}(Qf),Up=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,yi.ZT)(t,e),t.serverTimestamp=function(){var e=new Sd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ed("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Id("arrayUnion",e)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Cd("arrayRemove",e)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(e){return new kd("increment",e)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}(Qf);function qp(e){return function(e,t){var n=ad(e=Gf(e,od)),r=new id;return function(e,t,n,r){var i=this,o=function(e,t){return function(e,t){return new vf(e,t)}(function(e,t){if(e instanceof Uint8Array)return df(e,t);if(e instanceof ArrayBuffer)return df(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,xl(t));e.asyncQueue.enqueueAndForget((function(){return(0,yi.mG)(i,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return t=uf,[4,Cf(e)];case 1:return t.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,e._databaseId,t,r),r}(this._delegate,e)}function Vp(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return(0,yi.mG)(n,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=xi(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.He.getNamedQuery(e,t)}))},[4,Sf(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(ad(t=Gf(t,od)),n).then((function(e){return e?new $f(t,null,e.query):null}))).then((function(e){return e?new Op(r,e):null}))}var Bp,zp,Gp=n(826),Kp={Firestore:Ep,GeoPoint:dd,Timestamp:Xi,Blob:wp,Transaction:Sp,WriteBatch:Ip,DocumentReference:kp,DocumentSnapshot:Pp,Query:Op,QueryDocumentSnapshot:Dp,QuerySnapshot:Lp,CollectionReference:Mp,FieldPath:jp,FieldValue:Up,setLogLevel:function(e){var t;t=e,wi.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Gp.wA("firestore",(function(e){return function(e,t){return new Ep(e,new od(e,t),new _p)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Kp)))})(Bp=ue.Z),Bp.registerVersion("@firebase/firestore","2.2.1"),(zp=Ep).prototype.loadBundle=qp,zp.prototype.namedQuery=Vp;var Wp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hp=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return(0,yi.ZT)(t,e),t}(Error);var Qp=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e;return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(Bp){return[2,void 0]}return[2]}))}))},e.prototype.getContext=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function Jp(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var $p=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return Jp(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?Jp(e,(function(e){return t.decode(e)})):e},e}();var Yp=function(){function e(e,t,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=e,this.fetchImpl=i,this.serializer=new $p,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Qp(t,n),this.cancelAllRequests=new Promise((function(e){o.deleteService=function(){return e()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(Bp){this.customDomain=null,this.region=r}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},e.prototype.call=function(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,d;return(0,yi.Jh)(this,(function(p){switch(p.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(a=p.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new Hp("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(s),c=u.timer,l=u.promise,[4,Promise.race([Xp(c,this.postJSON(r,i,o)),l,Xp(c,this.cancelAllRequests)])];case 2:if(!(h=p.sent()))throw new Hp("cancelled","Firebase Functions instance was deleted.");if(f=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"===typeof s){if(!Wp[s])return new Hp("internal","internal");r=Wp[s],i=s}var u=a.message;"string"===typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(Bp){}return"ok"===r?null:new Hp(r,i,o)}(h.status,h.json,this.serializer),f)throw f;if(!h.json)throw new Hp("internal","Response is not valid JSON object.");if("undefined"===typeof(d=h.json.data)&&(d=h.json.result),"undefined"===typeof d)throw new Hp("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},e}();function Xp(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}!function(e,t){var n={Functions:Yp};e.INTERNAL.registerComponent(new Gp.wA("functions",(function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("messaging");return new Yp(i,o,a,r,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(ue.Z,fetch.bind(self)),ue.Z.registerVersion("@firebase/functions","0.6.4");var Zp,ev=n(494),tv="0.4.22",nv=1e4,rv="w:0.4.22",iv="FIS_v2",ov=36e5,av=((Zp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Zp["not-registered"]="Firebase Installation is not registered.",Zp["installation-not-found"]="Firebase Installation not found.",Zp["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Zp["app-offline"]="Could not process request. Application offline.",Zp["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Zp),sv=new le.LL("installations","Installations",av);function uv(e){return e instanceof le.ZR&&e.code.includes("request-failed")}function cv(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function lv(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function hv(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,sv.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function fv(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function dv(e,t){var n=t.refreshToken,r=fv(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}(n)),r}function pv(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function vv(e,t){var n=t.fid;return(0,yi.mG)(this,void 0,void 0,(function(){var t,r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return t=cv(e),r=fv(e),i={fid:n,authVersion:iv,appId:e.appId,sdkVersion:rv},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,pv((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:lv(s.authToken)}];case 3:return[4,hv("Create Installation",a)];case 4:throw u.sent()}}))}))}function mv(e){return new Promise((function(t){setTimeout(t,e)}))}var gv=/^[cdef][\w-]{21}$/;function yv(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,(0,yi.ev)([],(0,yi.CR)(t)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return gv.test(t)?t:""}catch(_d){return""}}function bv(e){return e.appName+"!"+e.appId}var wv=new Map;function _v(e,t){var n=bv(e);Ev(n,t),function(e,t){var n=Sv();n&&n.postMessage({key:e,fid:t});Iv()}(n,t)}function Ev(e,t){var n,r,i=wv.get(e);if(i)try{for(var o=(0,yi.XA)(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Tv=null;function Sv(){return!Tv&&"BroadcastChannel"in self&&((Tv=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Ev(e.data.key,e.data.fid)}),Tv}function Iv(){0===wv.size&&Tv&&(Tv.close(),Tv=null)}var Cv,kv="firebase-installations-store",xv=null;function Nv(){return xv||(xv=(0,ev.openDb)("firebase-installations-database",1,(function(e){if(0===e.oldVersion)e.createObjectStore(kv)}))),xv}function Av(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:return n=bv(e),[4,Nv()];case 1:return r=s.sent(),i=r.transaction(kv,"readwrite"),[4,(o=i.objectStore(kv)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||_v(e,t.fid),[2,t]}}))}))}function Pv(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return t=bv(e),[4,Nv()];case 1:return n=i.sent(),[4,(r=n.transaction(kv,"readwrite")).objectStore(kv).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Dv(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return n=bv(e),[4,Nv()];case 1:return r=u.sent(),i=r.transaction(kv,"readwrite"),[4,(o=i.objectStore(kv)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||_v(e,s.fid),[2,s]}}))}))}function Ov(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,Dv(e,(function(n){var r=function(e){return Mv(e||{fid:yv(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(sv.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,vv(e,t)];case 1:return n=i.sent(),[2,Av(e,n)];case 2:return uv(r=i.sent())&&409===r.customData.serverCode?[4,Pv(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Av(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Rv(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Rv(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return[4,Lv(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,mv(100)];case 3:return o.sent(),[4,Lv(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Ov(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function Lv(e){return Dv(e,(function(e){if(!e)throw sv.create("installation-not-found");return Mv(e)}))}function Mv(e){return 1===(t=e).registrationStatus&&t.registrationTime+nv<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Fv(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,yi.mG)(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return(0,yi.Jh)(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return cv(e)+"/"+n+"/authTokens:generate"}(n,t),i=dv(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:rv}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,pv((function(){return fetch(e,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,lv(c)];case 3:return[4,hv("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function jv(e,t){return void 0===t&&(t=!1),(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return[4,Dv(e.appConfig,(function(r){if(!qv(r))throw sv.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+ov}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,Uv(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,mv(100)];case 3:return i.sent(),[4,Uv(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,jv(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw sv.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return(0,yi.pi)((0,yi.pi)({},e),{authToken:t})}(r);return n=function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Fv(e,t)];case 1:return n=o.sent(),i=(0,yi.pi)((0,yi.pi)({},t),{authToken:n}),[4,Av(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!uv(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Pv(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,yi.pi)((0,yi.pi)({},t),{authToken:{requestStatus:0}}),[4,Av(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Uv(e){return Dv(e,(function(e){if(!qv(e))throw sv.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+nv<Date.now()?(0,yi.pi)((0,yi.pi)({},e),{authToken:{requestStatus:0}}):e}))}function qv(e){return void 0!==e&&2===e.registrationStatus}function Vv(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return[4,Ov(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Bv(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return cv(e)+"/"+n}(e,t),r=dv(e,t),i={method:"DELETE",headers:r},[4,pv((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,hv("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function zv(e,t){var n=e.appConfig;return function(e,t){Sv();var n=bv(e),r=wv.get(n);r||(r=new Set,wv.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=bv(e),r=wv.get(n);r&&(r.delete(t),0===r.size&&wv.delete(n),Iv())}(n,t)}}function Gv(e){return sv.create("missing-app-config-values",{valueName:e})}(Cv=ue.Z).INTERNAL.registerComponent(new Gp.wA("installations",(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){var t,n;if(!e||!e.options)throw Gv("App Configuration");if(!e.name)throw Gv("App Name");try{for(var r=(0,yi.XA)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Gv(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),r={appConfig:n,platformLoggerProvider:e.getProvider("platform-logger")},i={app:t,getId:function(){return function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,Ov(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):jv(e).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return[4,Vv(e.appConfig)];case 1:return n.sent(),[4,jv(e,t)];case 2:return[2,n.sent().token]}}))}))}(r,e)},delete:function(){return function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,Dv(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw sv.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw sv.create("app-offline");case 3:return[4,Bv(t,n)];case 4:return r.sent(),[4,Pv(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(e){return zv(r,e)}};return i}),"PUBLIC")),Cv.registerVersion("@firebase/installations",tv);var Kv,Wv,Hv=n(365),Qv=((Kv={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Kv["only-available-in-window"]="This method is available in a Window context.",Kv["only-available-in-sw"]="This method is available in a service worker context.",Kv["permission-default"]="The notification permission was not granted and dismissed instead.",Kv["permission-blocked"]="The notification permission was not granted and blocked instead.",Kv["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Kv["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Kv["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Kv["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Kv["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Kv["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Kv["token-update-no-token"]="FCM returned no token when updating the user to push.",Kv["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Kv["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Kv["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Kv["invalid-vapid-key"]="The public VAPID key must be a string.",Kv["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Kv),Jv=new le.LL("messaging","Messaging",Qv),$v="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yv="google.c.a.c_id";function Xv(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,yi.ev)([],(0,yi.CR)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zv(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Wv||(Wv={}));var em="fcm_token_details_db",tm="fcm_token_object_Store";function nm(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i=this;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=o.sent(),n=t.map((function(e){return e.name})),!n.includes(em))return[2,null];o.label=2;case 2:return r=null,[4,(0,Hv.openDb)(em,5,(function(t){return(0,yi.mG)(i,void 0,void 0,(function(){var n,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(tm)?[4,(n=t.transaction.objectStore(tm)).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:Xv(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(r={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Xv(o.auth),p256dh:Xv(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Xv(o.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,(0,Hv.deleteDb)(em)];case 4:return o.sent(),[4,(0,Hv.deleteDb)("fcm_vapid_details_db")];case 5:return o.sent(),[4,(0,Hv.deleteDb)("undefined")];case 6:return o.sent(),[2,rm(r)?r:null]}}))}))}function rm(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var im="firebase-messaging-store",om=null;function am(){return om||(om=(0,Hv.openDb)("firebase-messaging-database",1,(function(e){if(0===e.oldVersion)e.createObjectStore(im)}))),om}function sm(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return t=lm(e),[4,am()];case 1:return[4,i.sent().transaction(im).objectStore(im).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,nm(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,um(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function um(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return n=lm(e),[4,am()];case 1:return r=o.sent(),[4,(i=r.transaction(im,"readwrite")).objectStore(im).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function cm(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return t=lm(e),[4,am()];case 1:return n=i.sent(),[4,(r=n.transaction(im,"readwrite")).objectStore(im).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function lm(e){return e.appConfig.appId}function hm(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return[4,vm(e)];case 1:n=u.sent(),r=mm(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(pm(e.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),Jv.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,Jv.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw Jv.create("token-subscribe-no-token");return[2,o.token]}}))}))}function fm(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return[4,vm(e)];case 1:n=u.sent(),r=mm(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(pm(e.appConfig)+"/"+t.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),Jv.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,Jv.create("token-update-failed",{errorInfo:s});if(!o.token)throw Jv.create("token-update-no-token");return[2,o.token]}}))}))}function dm(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:return[4,vm(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(pm(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,Jv.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),Jv.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function pm(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function vm(e){var t=e.appConfig,n=e.installations;return(0,yi.mG)(this,void 0,void 0,(function(){var e;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function mm(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==$v&&(o.web.applicationPubKey=i),o}function gm(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw Jv.create("permission-blocked");return[4,_m(t,n)];case 1:return r=s.sent(),[4,sm(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:Xv(r.getKey("auth")),p256dh:Xv(r.getKey("p256dh"))},i?[3,3]:[2,wm(e,o)];case 3:if(function(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,dm(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,wm(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,bm({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function ym(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,sm(e)];case 1:return(n=i.sent())?[4,dm(e,n.token)]:[3,4];case 2:return i.sent(),[4,cm(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function bm(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,fm(t,e)];case 1:return r=a.sent(),i=(0,yi.pi)((0,yi.pi)({},e),{token:r,createTime:Date.now()}),[4,um(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,ym(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function wm(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,hm(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,um(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function _m(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zv(t)})]}}))}))}function Em(e){return"object"===typeof e&&!!e&&Yv in e}function Tm(e){return new Promise((function(t){setTimeout(t,e)}))}var Sm=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw Jv.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return(0,yi.mG)(this,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,sm(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:$v,r.label=2;case 2:return[2,gm(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return ym(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Jv.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw Jv.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw Jv.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw Jv.create("only-available-in-window")},e.prototype.onMessage=function(){throw Jv.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Jv.create("only-available-in-window")},e.prototype.onPush=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e),t?[4,xm()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,km(n,t)]:(r=!1,t.notification?[4,Nm(Im(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Tm(1e3)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return(0,yi.mG)(this,void 0,void 0,(function(){var r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,ym(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,sm(this.firebaseDependencies)];case 3:return r=i.sent(),[4,ym(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,gm(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:$v)]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Em(e.data)?self.location.origin:null}(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,Cm(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,Tm(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=Wv.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function Im(e){var t,n=(0,yi.pi)({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function Cm(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return[4,xm()];case 1:t=u.sent();try{for(n=(0,yi.XA)(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function km(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=Wv.PUSH_RECEIVED;try{for(var i=(0,yi.XA)(e),o=i.next();!o.done;o=i.next()){o.value.postMessage(t)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function xm(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Nm(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var Am=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===Wv.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),Em(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw Jv.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,gm(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=$v),[2]}))}))},e.prototype.updateSwReg=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw Jv.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),Jv.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,ym(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e;return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Jv.create("permission-blocked"):Jv.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw Jv.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw Jv.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw Jv.create("invalid-sw-registration");if(this.swRegistration)throw Jv.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Jv.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Jv.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case Wv.NOTIFICATION_CLICKED:return"notification_open";case Wv.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function Pm(e){return Jv.create("missing-app-config-values",{valueName:e})}var Dm={isSupported:Om};function Om(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}ue.Z.INTERNAL.registerComponent(new Gp.wA("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){var t,n;if(!e||!e.options)throw Pm("App Configuration Object");if(!e.name)throw Pm("App Name");var r=e.options;try{for(var i=(0,yi.XA)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw Pm(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),r={app:t,appConfig:n,installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!Om())throw Jv.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Sm(r):new Am(r)}),"PUBLIC").setServiceProps(Dm));var Rm="firebasestorage.googleapis.com",Lm=function(e){function t(n,r){var i=e.call(this,Mm(n),"Firebase Storage: "+r+" ("+Mm(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,t.prototype),i}return(0,yi.ZT)(t,e),t.prototype._codeEquals=function(e){return Mm(e)===this.code},Object.defineProperty(t.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e},enumerable:!1,configurable:!0}),t}(le.ZR);function Mm(e){return"storage/"+e}function Fm(){return new Lm("unknown","An unknown error occurred, please check the error payload for server response.")}function jm(){return new Lm("canceled","User canceled the upload/download.")}function Um(){return new Lm("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qm(e){return new Lm("invalid-argument",e)}function Vm(){return new Lm("app-deleted","The Firebase app was deleted.")}function Bm(e){return new Lm("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zm(e,t){return new Lm("invalid-format","String does not match format '"+e+"': "+t)}function Gm(e){throw new Lm("internal-error","Internal error: "+e)}var Km={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Wm=function(e,t){this.data=e,this.contentType=t||null};function Hm(e,t){switch(e){case Km.RAW:return new Wm(Qm(t));case Km.BASE64:case Km.BASE64URL:return new Wm(Jm(e,t));case Km.DATA_URL:return new Wm(function(e){var t=new $m(e);return t.base64?Jm(Km.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(Bp){throw zm(Km.DATA_URL,"Malformed data URL.")}return Qm(t)}(t.rest)}(t),new $m(t).contentType)}throw Fm()}function Qm(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Jm(e,t){switch(e){case Km.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw zm(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Km.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw zm(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(Bp){throw zm(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var $m=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw zm(Km.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1);var r,i};var Ym,Xm={STATE_CHANGED:"state_changed"},Zm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eg(e){switch(e){case"running":case"pausing":case"canceling":return Zm.RUNNING;case"paused":return Zm.PAUSED;case"success":return Zm.SUCCESS;case"canceled":return Zm.CANCELED;default:return Zm.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ym||(Ym={}));var tg=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ym.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=Ym.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=Ym.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw Gm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Gm("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Gm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Bp){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Gm("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),ng=function(){function e(){}return e.prototype.createXhrIo=function(){return new tg},e}(),rg=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(Bp){return new e(t,"")}if(""===n.path)return n;throw new Lm("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var a=Rm.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){var h=l[c.indices.bucket],f=l[c.indices.path];f||(f=""),n=new e(h,f),c.postModify(n);break}}if(null==n)throw function(e){return new Lm("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}(),ig=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function og(e){return"string"===typeof e||e instanceof String}function ag(e){return sg()&&e instanceof Blob}function sg(){return"undefined"!==typeof Blob}function ug(e,t,n,r){if(r<t)throw qm("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw qm("Invalid value for '"+e+"'. Expected "+n+" or less.")}function cg(e){return"https://"+Rm+"/v0"+e}function lg(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}var hg=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());!function(e){return void 0!==e}(s)?i():i(s)}catch(Bp){o(Bp)}else null!==a?((r=Fm()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?Vm():jm()):o(r=new Lm("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new fg(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)c.call.apply(c,(0,yi.ev)([null,e],t));else{var i;s()||o?c.call.apply(c,(0,yi.ev)([null,e],t)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(t,n){if(n)t(!1,new fg(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=n.getErrorCode()===Ym.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new fg(a,n))}else{var s=n.getErrorCode()===Ym.ABORT;t(!1,new fg(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),fg=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function dg(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function pg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=dg();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(sg())return new Blob(e);throw new Lm("unsupported-environment","This browser doesn't seem to support creating Blobs")}var vg=function(){function e(e,t){var n=0,r="";ag(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(ag(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(sg()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(pg.apply(null,r))}var i=t.map((function(e){return og(e)?Hm(Km.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function mg(e){var t;try{t=JSON.parse(e)}catch(Bp){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function gg(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function yg(e,t){return t}var bg=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||yg},wg=null;function _g(){if(wg)return wg;var e=[];e.push(new bg("bucket")),e.push(new bg("generation")),e.push(new bg("metageneration")),e.push(new bg("name","fullPath",!0));var t=new bg("name");t.xform=function(e,t){return function(e){return!og(e)||e.length<2?e:gg(e)}(t)},e.push(t);var n=new bg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new bg("timeCreated")),e.push(new bg("updated")),e.push(new bg("md5Hash",null,!0)),e.push(new bg("cacheControl",null,!0)),e.push(new bg("contentDisposition",null,!0)),e.push(new bg("contentEncoding",null,!0)),e.push(new bg("contentLanguage",null,!0)),e.push(new bg("contentType",null,!0)),e.push(new bg("metadata","customMetadata",!0)),wg=e}function Eg(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new rg(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Tg(e,t,n){var r=mg(t);return null===r?null:Eg(e,r,n)}function Sg(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function Ig(e,t,n){var r=mg(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new rg(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=e._makeStorageReference(new rg(t,l.name)),r.items.push(s)}return r}(e,t,r)}var Cg=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function kg(e){if(!e)throw Fm()}function xg(e,t){return function(n,r){var i=Tg(e,r,t);return kg(null!==i),i}}function Ng(e,t){return function(n,r){var i=Tg(e,r,t);return kg(null!==i),function(e,t){var n=mg(t);if(null===n)return null;if(!og(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.bucket,r=e.fullPath;return cg("/b/"+i(n)+"/o/"+i(r))+lg({alt:"media",token:t})}))[0]}(i,r)}}function Ag(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=new Lm("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Lm("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Lm("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Pg(e){var t=Ag(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new Lm("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Dg(e,t,n){var r=cg(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new Cg(r,"GET",xg(e,n),i);return o.errorHandler=Pg(t),o}function Og(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=cg(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime,u=new Cg(a,"GET",function(e,t){return function(n,r){var i=Ig(e,t,r);return kg(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=Ag(t),u}function Rg(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var Lg=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function Mg(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Bp){kg(!1)}return kg(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Fg=262144;function jg(e,t,n,r,i,o,a,s){var u=new Lg(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Lm("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,f);if(null===p)throw Um();var v=t.maxUploadRetryTime,m=new Cg(n,"POST",(function(e,n){var i,a=Mg(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?xg(t,o)(e,n):null,new Lg(s,c,"final"===a,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=Ag(e),m}var Ug=function(e,t,n){var r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=t,this.complete=n;else{var i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}};function qg(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var Vg=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=_g(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;this._ref.storage._getAuthToken().then((function(n){switch(t._state){case"running":e(n);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=Rg(t,r,i),s={name:a.fullPath},u=cg(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Sg(a,n),h=e.maxUploadRetryTime,f=new Cg(u,"POST",(function(e){var t;Mg(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Bp){kg(!1)}return kg(og(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=Ag(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new Cg(n,"POST",(function(e){var t=Mg(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Bp){kg(!1)}n||kg(!1);var i=Number(n);return kg(!isNaN(i)),new Lg(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Ag(t),o}(e._ref.storage,e._ref._location,t,e._blob),i=e._ref.storage._makeRequest(r,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=Fg*this._chunkMultiplier,n=new Lg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=jg(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(Bp){return e._error=Bp,void e._transition("error")}var a=e._ref.storage._makeRequest(o,i);e._request=a,a.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){Fg*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t){var n=Dg(e._ref.storage,e._ref._location,e._mappings),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=Rg(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Sg(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=vg.getBlob(c,r,l);if(null===h)throw Um();var f={name:u.fullPath},d=cg(o),p=e.maxUploadRetryTime,v=new Cg(d,"POST",xg(e,n),p);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=Ag(t),v}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=jm(),this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=eg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new Ug(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(eg(this._state)){case Zm.SUCCESS:qg(this._resolve.bind(null,this.snapshot))();break;case Zm.CANCELED:case Zm.ERROR:qg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(eg(this._state)){case Zm.RUNNING:case Zm.PAUSED:e.next&&qg(e.next.bind(e,this.snapshot))();break;case Zm.SUCCESS:e.complete&&qg(e.complete.bind(e))();break;default:e.error&&qg(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),Bg=function(){function e(e,t){this._service=e,this._location=t instanceof rg?t:rg.makeFromUrl(t)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new rg(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return gg(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new rg(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw Bm(e)},e}();function zg(e){var t={prefixes:[],items:[]};return Gg(e,t).then((function(){return t}))}function Gg(e,t,n){return(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return[4,Kg(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Gg(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Kg(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return null!=t&&"number"===typeof t.maxResults&&ug("options.maxResults",1,1e3,t.maxResults),[4,e.storage._getAuthToken()];case 1:return n=o.sent(),r=t||{},i=Og(e.storage,e._location,"/",r.pageToken,r.maxResults),[2,e.storage._makeRequest(i,n).getPromise()]}}))}))}function Wg(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage._getAuthToken()];case 1:return n=i.sent(),r=function(e,t,n,r){var i=cg(t.fullServerUrl()),o=Sg(n,r),a=e.maxOperationRetryTime,s=new Cg(i,"PATCH",xg(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Pg(t),s}(e.storage,e._location,t,_g()),[2,e.storage._makeRequest(r,n).getPromise()]}}))}))}function Hg(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t,n){var r=cg(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new Cg(r,"GET",Ng(e,n),i);return o.errorHandler=Pg(t),o}(e.storage,e._location,_g()),[2,e.storage._makeRequest(n,t).getPromise().then((function(e){if(null===e)throw new Lm("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function Qg(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t){var n=cg(t.fullServerUrl()),r=e.maxOperationRetryTime,i=new Cg(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Pg(t),i}(e.storage,e._location),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}function Jg(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new rg(e._location.bucket,n);return new Bg(e.storage,r)}function $g(e){return/^[A-Za-z]+:\/\//.test(e)}function Yg(e,t){if(e instanceof Zg){var n=e;if(null==n._bucket)throw new Lm("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Bg(n,n._bucket);return null!=t?Yg(r,t):r}if(void 0!==t){if(t.includes(".."))throw qm('`path` param cannot contain ".."');return Jg(e,t)}return e}function Xg(e,t){if(t&&$g(t)){if(e instanceof Zg)return new Bg(e,t);throw qm("To use ref(service, url), the first argument must be a Storage instance.")}return Yg(e,t)}var Zg=function(){function e(e,t,n,r,i){this.app=e,this._authProvider=t,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?rg.makeFromBucketSpec(r):function(e){var t=null===e||void 0===e?void 0:e.storageBucket;return null==t?null:rg.makeFromBucketSpec(t)}(this.app.options)}return Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new Bg(this,e)},e.prototype._makeRequest=function(e,t){var n=this;if(this._deleted)return new ig(Vm());var r=function(e,t,n,r,i){var o=lg(e.urlParams),a=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,i),new hg(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,t,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},e}();function ey(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Vg(e,new vg(t),n)}(e,t,n)}function ty(e){return function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=Dg(e.storage,e._location,_g()),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}(e)}function ny(e,t){return Xg(e,t)}var ry=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),iy=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new ry(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new ry(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new ry(e,i,i._ref))}:{next:t.next?function(e){return t.next(new ry(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),oy=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new ay(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new ay(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),ay=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=function(e,t){return Jg(e,t)}(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new iy(ey(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=Km.RAW),this._throwIfRoot("putString");var r=Hm(t,e),i=(0,yi.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new iy(new Vg(this._delegate,new vg(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return function(e){return zg(e)}(this._delegate).then((function(t){return new oy(t,e.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return Kg(e,t)}(this._delegate,e||void 0).then((function(e){return new oy(e,t.storage)}))},e.prototype.getMetadata=function(){return ty(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return Wg(e,t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return function(e){return Hg(e)}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function(e){return Qg(e)}(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw Bm(e)},e}(),sy=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if($g(e))throw qm("ref() expected a child path but got a URL, use refFromURL instead.");return new ay(ny(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!$g(e))throw qm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rg.makeFromUrl(e)}catch(Bp){throw qm("refFromUrl() expected a valid full URL but got an invalid one.")}return new ay(ny(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e}();function uy(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal");return new sy(r,new Zg(r,i,new ng,n,ue.Z.SDK_VERSION))}!function(e){var t={TaskState:Zm,TaskEvent:Xm,StringFormat:Km,Storage:Zg,Reference:ay};e.INTERNAL.registerComponent(new Gp.wA("storage",uy,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.4.5")}(ue.Z);var cy,ly,hy,fy="0.4.8",dy=fy,py="FB-PERF-TRACE-MEASURE",vy="_wt_",my="_fcp",gy="_fid",yy="@firebase/performance/config",by="@firebase/performance/configexpire",wy="Performance",_y=((cy={})["trace started"]="Trace {$traceName} was started before.",cy["trace stopped"]="Trace {$traceName} is not running.",cy["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",cy["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",cy["no window"]="Window is not available.",cy["no app id"]="App id is not available.",cy["no project id"]="Project id is not available.",cy["no api key"]="Api key is not available.",cy["invalid cc log"]="Attempted to queue invalid cc event",cy["FB not default"]="Performance can only start when Firebase app instance is the default one.",cy["RC response not ok"]="RC response is not ok",cy["invalid attribute name"]="Attribute name {$attributeName} is invalid.",cy["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",cy["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",cy["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",cy),Ey=new le.LL("performance",wy,_y),Ty=new ce.Yd(wy);Ty.logLevel=ce.in.INFO;var Sy,Iy=function(){function e(e){if(this.window=e,!e)throw Ey.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,le.hl)()||(Ty.info("IndexedDB is not supported by current browswer"),!1):(Ty.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}}));n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===ly&&(ly=new e(hy)),ly},e}();function Cy(e,t){var n=e.length-t.length;if(n<0||n>1)throw Ey.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var ky,xy,Ny=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Cy("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Cy("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Ey.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Ey.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Ey.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===Sy&&(Sy=new e),Sy},e}();function Ay(){return ky}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(xy||(xy={}));var Py=["firebase_","google_","ga_"],Dy=new RegExp("^[a-zA-Z]\\w*$");function Oy(){var e=Iy.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function Ry(){switch(Iy.getInstance().document.visibilityState){case"visible":return xy.VISIBLE;case"hidden":return xy.HIDDEN;default:return xy.UNKNOWN}}function Ly(){var e=Iy.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var My="0.0.1",Fy=!0,jy="FIREBASE_INSTALLATIONS_AUTH";function Uy(e){var t=function(){var e=Iy.getInstance().localStorage;if(!e)return;var t=e.getItem(by);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;var r=e.getItem(yy);if(!r)return;try{return JSON.parse(r)}catch(_d){return}}();return t?(Vy(t),Promise.resolve()):function(e){return function(){var e=Ny.getInstance().installationsService.getToken();return e.then((function(e){})),e}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Ny.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Ny.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:jy+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Ny.getInstance().getAppId(),app_version:dy,sdk_version:My})});return fetch(r).then((function(e){if(e.ok)return e.json();throw Ey.create("RC response not ok")}))})).catch((function(){Ty.info(qy)}))}(e).then(Vy).then((function(e){return function(e){var t=Iy.getInstance().localStorage;if(!e||!t)return;t.setItem(yy,JSON.stringify(e)),t.setItem(by,String(Date.now()+60*Ny.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}var qy="Could not fetch config, will use default configs";function Vy(e){if(!e)return e;var t=Ny.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=Fy,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=By(t.tracesSamplingRate),t.logNetworkAfterSampling=By(t.networkRequestsSamplingRate),e}function By(e){return Math.random()<=e}var zy,Gy=1;function Ky(){return Gy=2,zy=zy||function(){var e=Iy.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return function(){var e=Ny.getInstance().installationsService.getId();return e.then((function(e){ky=e})),e}()})).then((function(e){return Uy(e)})).then((function(){return Wy()}),(function(){return Wy()}))}function Wy(){Gy=3}var Hy,Qy=1e4,Jy=3,$y=[],Yy=!1;function Xy(e){setTimeout((function(){if(0!==Jy)return $y.length?void function(){var e=$y.splice(0,1e3),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}));(function(e,t){return function(e){var t=Ny.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||Ty.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=Qy;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&($y=(0,yi.ev)((0,yi.ev)([],t),$y),Ty.info("Retry transport request later.")),Jy=3,Xy(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ny.getInstance().logSource,log_event:t},e).catch((function(){$y=(0,yi.ev)((0,yi.ev)([],e),$y),Jy--,Ty.info("Tries left: "+Jy+"."),Xy(Qy)}))}():Xy(Qy)}),e)}function Zy(e){if(!e.eventTime||!e.message)throw Ey.create("invalid cc log");$y=(0,yi.ev)((0,yi.ev)([],$y),[e])}function eb(e,t){Hy||(Hy=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Zy({message:e.apply(void 0,t),eventTime:Date.now()})}}(rb)),Hy(e,t)}function tb(e){var t=Ny.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&Iy.getInstance().requiredApisAvailable()&&(e.isAuto&&Ry()!==xy.VISIBLE||(3===Gy?nb(e):Ky().then((function(){return nb(e)}),(function(){return nb(e)}))))}function nb(e){if(Ay()){var t=Ny.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return eb(e,1)}),0)}}function rb(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:ib(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:ib(),trace_metric:t};return JSON.stringify(r)}(e)}function ib(){return{google_app_id:Ny.getInstance().getAppId(),app_instance_id:Ay(),web_app_info:{sdk_version:dy,page_url:Iy.getInstance().getUrl(),service_worker_status:Oy(),visibility_state:Ry(),effective_connection_type:Ly()},application_process_state:0}}var ob=["_fp",my,gy];var ab=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=Iy.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw Ey.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw Ey.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),tb(this)},e.prototype.record=function(e,t,n){if(e<=0)throw Ey.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Ey.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=(0,yi.pi)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}tb(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(n=e,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(vy)&&ob.indexOf(n)>-1)&&n.startsWith("_"))throw Ey.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){var t=Math.floor(e);return t<e&&Ty.info("Metric value should be an Integer, setting the value as : "+t+"."),t}(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40)&&!Py.some((function(e){return n.startsWith(e)}))&&!!n.match(Dy),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Ey.create("invalid attribute name",{attributeName:e});if(!i)throw Ey.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return(0,yi.pi)({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=Iy.getInstance().getUrl();if(i){var o=new e(vy+i,!0),a=Math.floor(1e3*Iy.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&o.putMetric(my,Math.floor(1e3*u.startTime)),r&&o.putMetric(gy,Math.floor(1e3*r))}tb(o)}},e.createUserTimingTrace=function(t){tb(new e(t,!1,t))},e}();function sb(e){var t=e;if(t&&void 0!==t.responseStart){var n=Iy.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=Ny.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return eb(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function ub(){Ay()&&(setTimeout((function(){return function(){var e=Iy.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){ab.createOobTrace(t,n),r=void 0}),5e3);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),ab.createOobTrace(t,n,e))}))}else ab.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=Iy.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){sb(r[n])}e.setupObserver("resource",sb)}()}),0),setTimeout((function(){return function(){for(var e=Iy.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){cb(r[n])}e.setupObserver("measure",cb)}()}),0))}function cb(e){var t=e.name;t.substring(0,py.length)!==py&&ab.createUserTimingTrace(t)}var lb=function(){function e(e){this.app=e,Iy.getInstance().requiredApisAvailable()&&(0,le.eu)().then((function(e){e&&(Yy||(Xy(5500),Yy=!0),Ky().then(ub,ub))})).catch((function(e){Ty.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new ab(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Ny.getInstance().instrumentationEnabled},set:function(e){Ny.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Ny.getInstance().dataCollectionEnabled},set:function(e){Ny.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();!function(e){var t=function(e,t){if("[DEFAULT]"!==e.name)throw Ey.create("FB not default");if("undefined"===typeof window)throw Ey.create("no window");return function(e){hy=e}(window),Ny.getInstance().firebaseAppInstance=e,Ny.getInstance().installationsService=t,new lb(e)};e.INTERNAL.registerComponent(new Gp.wA("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion("@firebase/performance",fy)}(ue.Z);var hb,fb,db="https://www.googletagmanager.com/gtag/js";!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(hb||(hb={})),function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(fb||(fb={}));var pb,vb=new ce.Yd("@firebase/analytics");function mb(e,t,n,r,i,o){return(0,yi.mG)(this,void 0,void 0,(function(){var a,s,u,c;return(0,yi.Jh)(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(e){return e.measurementId===i})))?[4,t[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),vb.error(c),[3,8];case 8:return e(hb.CONFIG,i,o),[2]}}))}))}function gb(e,t,n,r,i){return(0,yi.mG)(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f;return(0,yi.Jh)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=d.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(h=l[c],"break"!==u(h));c++);d.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return d.sent(),e(hb.EVENT,r,i||{}),[3,5];case 4:return f=d.sent(),vb.error(f),[3,5];case 5:return[2]}}))}))}function yb(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,a){return(0,yi.mG)(this,void 0,void 0,(function(){var s;return(0,yi.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==hb.EVENT?[3,2]:[4,gb(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==hb.CONFIG?[3,4]:[4,mb(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(hb.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),vb.error(s),[3,7];case 7:return[2]}}))}))}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}var bb=((pb={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",pb["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",pb["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",pb["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pb["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pb["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",pb["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",pb["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',pb["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',pb),wb=new le.LL("analytics","Analytics",bb),_b=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function Eb(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Tb(e){var t;return(0,yi.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,yi.Jh)(this,(function(c){switch(c.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:Eb(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw wb.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function Sb(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=_b),(0,yi.mG)(this,void 0,void 0,(function(){var t,a,s,u,c,l,h;return(0,yi.Jh)(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Ib(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return vb.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,Tb(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(!function(e){if(!(e instanceof le.ZR)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c=f.sent())){if(r.deleteThrottleMetadata(t),a)return vb.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?(0,le.$s)(o,r.intervalMillis,30):(0,le.$s)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(t,h),vb.debug("Calling attemptFetch again in "+l+" millis"),[2,Sb(e,h,n,r)];case 7:return[2]}}))}))}function Ib(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(wb.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var Cb=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();function kb(e,t,n,r,i,o){return(0,yi.mG)(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return(0,yi.Jh)(this,(function(d){switch(d.label){case 0:return a=function(e,t,n){return void 0===t&&(t=_b),(0,yi.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return(0,yi.Jh)(this,(function(l){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw wb.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw wb.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Cb,setTimeout((function(){return(0,yi.mG)(c,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,Sb({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}(e),a.then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&vb.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return vb.error(e)})),t.push(a),s=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e;return(0,yi.Jh)(this,(function(t){switch(t.label){case 0:return(0,le.hl)()?[3,1]:(vb.warn(wb.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,le.eu)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),vb.warn(wb.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(db))return r}return null}()||function(e,t){var n=document.createElement("script");n.src=db+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(hb.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}var xb,Nb,Ab={},Pb=[],Db={},Ob="dataLayer",Rb="gtag",Lb=!1;function Mb(e){if(Lb)throw wb.create("already-initialized");e.dataLayerName&&(Ob=e.dataLayerName),e.gtagName&&(Rb=e.gtagName)}function Fb(e,t){!function(){var e=[];if((0,le.ru)()&&e.push("This is a browser extension environment."),(0,le.zI)()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=wb.create("invalid-analytics-context",{errorInfo:t});vb.warn(n.message)}}();var n=e.options.appId;if(!n)throw wb.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw wb.create("no-api-key");vb.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Ab[n])throw wb.create("already-exists",{id:n});if(!Lb){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ob);var r=yb(Ab,Pb,Db,Ob,Rb),i=r.wrappedGtag,o=r.gtagCore;Nb=i,xb=o,Lb=!0}Ab[n]=kb(e,Pb,Db,t,xb,Ob);var a={app:e,logEvent:function(e,t,r){(function(e,t,n,r,i){return(0,yi.mG)(this,void 0,void 0,(function(){var o,a;return(0,yi.Jh)(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(hb.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=(0,yi.pi)((0,yi.pi)({},r),{send_to:o}),e(hb.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(Nb,Ab[n],e,t,r).catch((function(e){return vb.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(hb.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(hb.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(Nb,Ab[n],e,t).catch((function(e){return vb.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i;return(0,yi.Jh)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(hb.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(hb.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(Nb,Ab[n],e,t).catch((function(e){return vb.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return(0,yi.mG)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,yi.Jh)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(hb.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(hb.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Nb,Ab[n],e,t).catch((function(e){return vb.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(Ab[n],e).catch((function(e){return vb.error(e)}))},INTERNAL:{delete:function(){return delete Ab[n],Promise.resolve()}}};return a}var jb="analytics";function Ub(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:if((0,le.ru)())return[2,!1];if(!(0,le.zI)())return[2,!1];if(!(0,le.hl)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,le.eu)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}!function(e){e.INTERNAL.registerComponent(new Gp.wA(jb,(function(e){return Fb(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Mb,EventName:fb,isSupported:Ub})),e.INTERNAL.registerComponent(new Gp.wA("analytics-internal",(function(e){try{return{logEvent:e.getProvider(jb).getImmediate().logEvent}}catch(Bp){throw wb.create("interop-component-reg-failed",{reason:Bp})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.6")}(ue.Z);var qb,Vb=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),Bb=((qb={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",qb["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",qb["registration-api-key"]="Undefined API key. Check Firebase app initialization.",qb["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",qb["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",qb["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",qb["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",qb["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",qb["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",qb["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',qb["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',qb["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",qb["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",qb),zb=new le.LL("remoteconfig","Remote Config",Bb);var Gb=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b;return(0,yi.Jh)(this,(function(w){switch(w.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=w.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===_&&(_=navigator),_.languages&&_.languages[0]||_.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),w.label=2;case 2:return w.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return w.sent(),[4,c];case 4:return h=w.sent(),[3,6];case 5:throw f=w.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),zb.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,w.label=7;case 7:return w.trys.push([7,9,,10]),[4,h.json()];case 8:return y=w.sent(),[3,10];case 9:throw b=w.sent(),zb.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:m=y.entries,g=y.state,w.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?p=500:"NO_CHANGE"===g?p=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(m={}),304!==p&&200!==p)throw zb.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:v,config:m}]}var _}))}))},e}(),Kb=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),Wb=["1","true","t","yes","y","on"],Hb=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&Wb.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),Qb=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=ce.in.DEBUG;break;case"silent":this._logger.logLevel=ce.in.SILENT;break;default:this._logger.logLevel=ce.in.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t,n;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t,n,r=this;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:e=new Kb,setTimeout((function(){return(0,yi.mG)(r,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof le.ZR&&-1!==e.code.indexOf(t)}(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return(0,yi.mG)(this,void 0,void 0,(function(){return(0,yi.Jh)(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys((0,yi.pi)((0,yi.pi)({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new Hb("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new Hb("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new Hb("static"))},e}();function Jb(e,t){var n=e.target.error||void 0;return zb.create(t,{originalErrorMessage:n&&n.message})}var $b="app_namespace_store";var Yb=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(Jb(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore($b,{keyPath:"compositeKey"})}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n=this;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([$b],"readonly").objectStore($b),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(Jb(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(Bp){i(zb.create("storage-get",{originalErrorMessage:Bp&&Bp.message}))}}))]}}))}))},e.prototype.set=function(e,t){return(0,yi.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,yi.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([$b],"readwrite").objectStore($b),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(Jb(e,"storage-set"))},u.onsuccess=function(){i()}}catch(Bp){o(zb.create("storage-set",{originalErrorMessage:Bp&&Bp.message}))}}))]}}))}))},e.prototype.delete=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t,n=this;return(0,yi.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([$b],"readwrite").objectStore($b),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(Jb(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(Bp){i(zb.create("storage-delete",{originalErrorMessage:Bp&&Bp.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),Xb=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return(0,yi.mG)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();function Zb(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(zb.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var ew,tw=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return(0,yi.mG)(this,void 0,void 0,(function(){var t;return(0,yi.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return(0,yi.mG)(this,void 0,void 0,(function(){var t,i,o;return(0,yi.Jh)(this,(function(a){switch(a.label){case 0:return[4,Zb(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof le.ZR)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,le.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),nw="@firebase/remote-config";(ew=ue.Z).INTERNAL.registerComponent(new Gp.wA("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw zb.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw zb.create("registration-project-id");if(!s)throw zb.create("registration-api-key");if(!u)throw zb.create("registration-app-id");n=n||"firebase";var c=new Yb(u,r.name,n),l=new Xb(c),h=new ce.Yd(nw);h.logLevel=ce.in.ERROR;var f=new Gb(i,ew.SDK_VERSION,n,a,s,u),d=new tw(f,c),p=new Vb(d,c,l,h),v=new Qb(r,p,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),ew.registerVersion(nw,"0.1.33");ue.Z.registerVersion("firebase","8.3.1","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),ue.Z.registerVersion("firebase","8.3.1");var rw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},iw=o.createContext&&o.createContext(rw),ow=function(){return ow=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ow.apply(this,arguments)},aw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function sw(e){return e&&e.map((function(e,t){return o.createElement(e.tag,ow({key:t},e.attr),sw(e.child))}))}function uw(e){return function(t){return o.createElement(cw,ow({attr:ow({},e.attr)},t),sw(e.child))}}function cw(e){var t=function(t){var n,r=e.attr,i=e.size,a=e.title,s=aw(e,["attr","size","title"]),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),o.createElement("svg",ow({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:ow(ow({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&o.createElement("title",null,a),e.children)};return void 0!==iw?o.createElement(iw.Consumer,null,(function(e){return t(e)})):t(rw)}function lw(e){return uw({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attr:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}function hw(e){return uw({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]})(e)}function fw(e){return uw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m2.394 13.742 4.743 3.62 7.616-8.704-1.506-1.316-6.384 7.296-3.257-2.486zm19.359-5.084-1.506-1.316-6.369 7.279-.753-.602-1.25 1.562 2.247 1.798z"}}]})(e)}function dw(e){return uw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}}]})(e)}function pw(e){return uw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6,16 L16,16 L6,16 L6,16 Z M6,12 L18,12 L6,12 L6,12 Z M6,8 L11,8 L6,8 L6,8 Z M14,1 L14,8 L21,8 M3,23 L3,1 L15,1 L21,7 L21,23 L3,23 Z"}}]})(e)}function vw(e){return uw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5a2.5 2.5 0 015 0v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5a2.5 2.5 0 005 0V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}}]})(e)}function mw(e){return uw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 16l-6-6h12z"}}]}]})(e)}function gw(e){return uw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 4V2h10v2h5v2h-2v15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6H2V4h5zM6 6v14h12V6H6zm3 3h2v8H9V9zm4 0h2v8h-2V9z"}}]}]})(e)}function yw(e){return uw({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z",clipRule:"evenodd"}}]})(e)}ue.Z.initializeApp({apiKey:"AIzaSyApI8TBUiAyjWEUFWye5LZ8WjVA1LFSfaM",authDomain:"chat-712d9.firebaseapp.com",projectId:"chat-712d9",storageBucket:"chat-712d9.appspot.com",messagingSenderId:"331439033949",appId:"1:331439033949:web:90b5942484302d447047b4",measurementId:"G-1VFQ6ZGD0P"});var bw=ue.Z.storage(),ww=ue.Z.auth(),_w=ue.Z.database(),Ew=new ue.Z.auth.GoogleAuthProvider;Ew.setCustomParameters({prompt:"select_account"});var Tw=n(184);var Sw=function(e){var t=e.path,n=e.textColor,i=r((0,o.useState)(""),2),a=i[0],s=i[1],u=r((0,o.useState)(!1),2),c=(u[0],u[1]),l=((0,o.useContext)(Y).theme,function(){var e=te(Z().mark((function e(){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bw.ref(t).getDownloadURL();case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}());return(0,o.useEffect)((function(){c(!0),l()}),[t]),(0,Tw.jsxs)("a",{href:a,style:{color:n,display:"flex",alignItems:"center"},target:"_blank",children:[(0,Tw.jsx)(yw,{size:30}),(0,Tw.jsx)("span",{style:{marginLeft:"8px"},children:t.split("/")[2]})]})};var Iw=function(e){var t=e.path,n=e.isLoading,i=(e.textColor,r((0,o.useState)(t),2)),a=i[0],s=i[1];return(0,o.useEffect)((function(){!function(){try{bw.ref(t).getDownloadURL().then((function(e){s(e)})).catch((function(e){console.log(e)}))}catch(e){console.log("Error",e)}}()}),[]),(0,Tw.jsxs)(Tw.Fragment,{children:[n&&(0,Tw.jsxs)(Tw.Fragment,{children:[(0,Tw.jsx)("span",{className:"overlay"}),(0,Tw.jsx)("span",{className:"iframe-loading"})]}),(0,Tw.jsx)("img",{src:a,width:"200",height:"100%"})]})};function Cw(e){var t=e.path,n=(e.textColor,e.isLoading),i=r((0,o.useState)(""),2),a=i[0],s=i[1],u=function(){var e=te(Z().mark((function e(){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bw.ref(t).getDownloadURL();case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){u()}),[t]),(0,Tw.jsxs)(Tw.Fragment,{children:[n&&(0,Tw.jsxs)(Tw.Fragment,{children:[(0,Tw.jsx)("span",{className:"overlay"}),(0,Tw.jsx)("span",{className:"iframe-loading"})]}),(0,Tw.jsx)("iframe",{loading:"eager",src:a,height:"100%",width:200,style:{border:"none"}})]})}var kw=o.memo(Cw),xw=function(e){var t=e.myId,n=e.otherId;return t>n?"".concat(t,"-").concat(n):"".concat(n,"-").concat(t)};function Nw(e){return uw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M146.217 28.218l-100.07 42.86 106.296 248.194 41.188-17.64-27.606-191.945-1.28-8.909 78.567-11.3-12.519-29.23c-16.682 3.773-28.871 3.449-47.402 21.062l-5.993 5.693-6.181-5.484c-18.118-16.072-20.828-36.566-25-53.301zm18.912.492c3.243 12.805 5.535 24.275 12.777 33.68 12.818-10.212 24.447-14.227 34.951-16.733-14.485-7.674-29.652-12.217-47.728-16.947zm127.746 71.826l-107.752 15.496 38.436 267.25 36.978-5.318 23.188-193.996 1.068-8.936 86.086 10.29-4.598-31.96c-17.092-.671-28.78-4.14-51.24 8.076l-7.26 3.95-4.552-6.899c-13.34-20.213-10.655-40.708-10.354-57.953zm18.139 5.367c-.182 13.21-.937 24.883 3.625 35.842 15.025-6.547 27.298-7.415 38.093-7.117-12.006-11.162-25.481-19.477-41.718-28.725zm-10.485 89.139l-32.043 268.092 172.77 20.648 24.598-205.793c-16.337-5.073-26.73-11.452-51.586-5.465l-8.034 1.936-2.61-7.84c-7.655-22.977.243-42.079 4.997-58.658zm124.225 22.799c-3.594 12.713-7.345 23.792-5.775 35.558 16.207-2.435 28.286-.097 38.636 2.985-8.708-13.889-19.571-25.409-32.861-38.543z"}}]})(e)}oe().extend(se());var Aw=null;function Pw(){var e,t,n,i,a,s,u,c,l,h,f,d=r((0,o.useState)(""),2),p=d[0],v=d[1],m=j().id,g=r((0,o.useState)([]),2),y=g[0],b=g[1],w=r((0,o.useState)(null),2),_=w[0],E=w[1],T=(0,o.useRef)(null),S=r((0,o.useState)(!1),2),I=S[0],C=S[1],k=r((0,o.useState)(!1),2),x=k[0],N=k[1],A=r((0,o.useState)(!1),2),P=A[0],D=A[1],O=r((0,o.useState)(null),2),R=O[0],L=O[1],M=(0,o.useContext)(Y).theme,F=r((0,o.useState)([]),2),U=F[0],q=F[1],V=(0,o.useRef)(null),B=(0,o.useRef)(null),z=r((0,o.useState)([]),2),G=z[0],K=z[1],W=r((0,o.useState)(!1),2),H=W[0],Q=W[1],J=r((0,o.useState)(0),2),$=J[0],X=J[1],ee=r((0,o.useState)(!1),2),ie=(ee[0],ee[1]),ae=r(o.useState(!1),2),se=ae[0],ce=ae[1];(0,o.useEffect)((function(){_w.ref("user/".concat(m)).get().then((function(e){L(null===e||void 0===e?void 0:e.val())})),v("")}),[m]);(0,o.useEffect)((function(){var e;return null===V||void 0===V||null===(e=V.current)||void 0===e||e.focus(),ww.onAuthStateChanged((function(e){null===e?b([]):function(){try{var e;_w.ref("messages").child(xw({myId:null===ww||void 0===ww||null===(e=ww.currentUser)||void 0===e?void 0:e.uid,otherId:m})).on("value",(function(e){var t=[];b([]),e.forEach((function(e){t.push(e.val())})),b([].concat(t))}))}catch(t){console.log("fetch mesageserr ",t)}}()})),function(){var e;_w.ref("messages").child(xw({myId:null===(e=ww.currentUser)||void 0===e?void 0:e.uid,otherId:m})).off()}}),[m]),(0,o.useEffect)((function(){return m&&_w.ref("user").child(m).on("value",(function(e){var t,n;C(null===e||void 0===e||null===(t=e.val())||void 0===t?void 0:t.online),D(null===e||void 0===e||null===(n=e.val())||void 0===n?void 0:n.chattingWith)})),function(){_w.ref("user").child(m).off()}}),[m]),(0,o.useEffect)((function(){var e,t;null!==ww&&void 0!==ww&&null!==(e=ww.currentUser)&&void 0!==e&&e.uid&&_w.ref("user").child(null===ww||void 0===ww||null===(t=ww.currentUser)||void 0===t?void 0:t.uid).on("value",(function(e){var t;N(null===e||void 0===e||null===(t=e.val())||void 0===t?void 0:t.chattingWith)}));return function(){_w.ref("user").child(m).off()}}),[m]);(0,o.useEffect)((function(){var e,t,n,r,i,o={channelId:xw({myId:null===ww||void 0===ww||null===(e=ww.currentUser)||void 0===e?void 0:e.uid,otherId:m}),members:[null===ww||void 0===ww||null===(t=ww.currentUser)||void 0===t?void 0:t.uid,m],lastMessage:"",unreadCount:(n={},ne(n,ww.currentUser.uid,{count:0}),ne(n,m,{count:0}),n),channelName:"".concat(null===ww||void 0===ww||null===(r=ww.currentUser)||void 0===r?void 0:r.displayName,"-").concat(null===R||void 0===R?void 0:R.name),createdAt:Date.now()};null===(i=o.members)||void 0===i||i.forEach(function(){var e=te(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_w.ref("channels").child(t).child(null===o||void 0===o?void 0:o.channelId);case 2:if(null!==(n=e.sent)&&void 0!==n&&n.length){e.next=6;break}return e.next=6,n.update(o).catch((function(e){console.log("update channel err",e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[m]);var le=function(e,t){try{var n,r,i,o,a,s,u,c,l;if(!p.trim()&&!e)return;var h=Date.now(),f=p;v(""),_w.ref("messages").child(xw({myId:null===(n=ww.currentUser)||void 0===n?void 0:n.uid,otherId:m})).child(h).set({message:f,sentBy:{id:ww.currentUser.uid,name:null===ww||void 0===ww||null===(r=ww.currentUser)||void 0===r?void 0:r.displayName,photo:null===ww||void 0===ww||null===(i=ww.currentUser)||void 0===i?void 0:i.photoURL},createdAt:h,img:e,messageType:t,read:1}).catch((function(e){v(f)})).finally((function(){ie(!1)}));var d={channelId:xw({myId:null===ww||void 0===ww||null===(o=ww.currentUser)||void 0===o?void 0:o.uid,otherId:m}),members:[null===ww||void 0===ww||null===(a=ww.currentUser)||void 0===a?void 0:a.uid,m],lastMessage:f,unreadCount:null===(s=[null===ww||void 0===ww||null===(u=ww.currentUser)||void 0===u?void 0:u.uid,m])||void 0===s?void 0:s.reduce((function(e,t){var n;return e[t]={count:(null===ww||void 0===ww||null===(n=ww.currentUser)||void 0===n?void 0:n.uid)===t?0:ue.Z.database.ServerValue.increment(1)},e}),{}),channelName:"".concat(null===ww||void 0===ww||null===(c=ww.currentUser)||void 0===c?void 0:c.displayName,"-").concat(null===R||void 0===R?void 0:R.name),createdAt:h};null===(l=d.members)||void 0===l||l.forEach(function(){var e=te(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_w.ref("channels").child(t).child(null===d||void 0===d?void 0:d.channelId).update(d).catch((function(e){console.log("update channel err",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(g){console.log("handle send err",g)}},he=function(e){var t;return ww.currentUser.uid===(null===(t=e.sentBy)||void 0===t?void 0:t.id)};(0,o.useEffect)((function(){!function(){var e,t,n,r=(null===T||void 0===T||null===(e=T.current)||void 0===e?void 0:e.scrollHeight)-(null===T||void 0===T||null===(t=T.current)||void 0===t?void 0:t.clientHeight);null===T||void 0===T||null===(n=T.current)||void 0===n||n.scrollTo(0,r)}()}),[y]);var fe=function(e){var t,n;1===(null===e||void 0===e?void 0:e.read)&&(null===_w||void 0===_w||null===(t=_w.ref("messages").child(xw({myId:null===ww||void 0===ww||null===(n=ww.currentUser)||void 0===n?void 0:n.uid,otherId:m})))||void 0===t||t.child(null===e||void 0===e?void 0:e.createdAt).update({read:2}))},de=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?ce(!0):"dragleave"===e.type&&ce(!1)};return(0,Tw.jsxs)("div",{onDragEnter:de,className:"chatBox",style:{backgroundColor:null===M||void 0===M||null===(e=M.chat)||void 0===e?void 0:e.bg,height:"93vh",position:"relative",flex:.86},children:[(0,Tw.jsxs)("div",{style:{display:"flex",alignItems:"center",backgroundColor:null===M||void 0===M||null===(t=M.chat)||void 0===t?void 0:t.headerBg,boxShadow:"0px 2px 11px 0 rgb(0 0 0 / 20%), 0px -2px 0px 0px rgb(0 0 0 / 19%)",minHeight:"42px",maxHeight:"42px"},children:[(0,Tw.jsx)("img",{src:null===R||void 0===R?void 0:R.picture,style:{width:"35px",height:"35px",borderRadius:"50%",margin:"0 12px"},alt:"img"}),(0,Tw.jsxs)("p",{style:{fontWeight:"bold",display:"flex",flexDirection:"column",color:null===M||void 0===M||null===(n=M.chat)||void 0===n?void 0:n.headerText},children:[null===R||void 0===R?void 0:R.name,P===(null===ww||void 0===ww||null===(i=ww.currentUser)||void 0===i?void 0:i.uid)?(0,Tw.jsx)("span",{style:{color:null===M||void 0===M||null===(a=M.chat)||void 0===a?void 0:a.headerText,fontSize:"10px",fontWeight:"600"},children:"typing ..."}):I?(0,Tw.jsx)("span",{style:{color:null===M||void 0===M||null===(s=M.chat)||void 0===s?void 0:s.headerText,fontSize:"10px",fontWeight:"600"},children:"Online"}):null]})]}),(0,Tw.jsxs)("div",{className:"chat",ref:T,style:{height:(null===U||void 0===U?void 0:U.length)>0&&"72vh"},children:[H&&(0,Tw.jsx)("progress",{style:{position:"absolute",left:"35%",top:"12%",fontSize:"25px"},value:$,max:"100"}),null===y||void 0===y?void 0:y.map((function(e,t){var n,r,i,o,a,s,u,c,l,h,f,d,p,v;return(0,Tw.jsxs)("div",{style:{display:"flex",justifyContent:he(e)?"flex-end":"flex-start"},children:[(null===ww||void 0===ww||null===(n=ww.currentUser)||void 0===n?void 0:n.uid)===(null===R||void 0===R?void 0:R.activeChannelId)&&fe(e),(0,Tw.jsxs)("div",{className:"roll-out",style:{display:"flex",alignItems:"center",maxWidth:"60%"},onMouseEnter:function(){E(null===e||void 0===e?void 0:e.createdAt)},onMouseLeave:function(){return E(null)},children:[(0,Tw.jsxs)("p",{style:{backgroundColor:he(e)?null===M||void 0===M||null===(r=M.chat)||void 0===r?void 0:r.messageBg:null===M||void 0===M||null===(i=M.chat)||void 0===i?void 0:i.senderBg,padding:"6px 13px",color:"white",display:"flex",borderRadius:he(e)?"0px 6px 6px 6px":"6px 0px 6px 6px",fontSize:14,alignItems:"end"},children:["text"===(null===e||void 0===e?void 0:e.messageType)&&(0,Tw.jsx)("span",{style:{color:he(e)?null===M||void 0===M||null===(o=M.chat)||void 0===o?void 0:o.messageText:null===M||void 0===M||null===(a=M.chat)||void 0===a?void 0:a.senderText,wordBreak:"break-all"},children:null===e||void 0===e?void 0:e.message}),"image"===(null===e||void 0===e?void 0:e.messageType)&&(0,Tw.jsx)("span",{style:{position:"relative"},children:(0,Tw.jsx)(Iw,{path:null===e||void 0===e?void 0:e.img,isLoading:null===e||void 0===e?void 0:e.isLoading,textColor:he(e)?null===M||void 0===M||null===(s=M.chat)||void 0===s?void 0:s.messageText:null===M||void 0===M||null===(u=M.chat)||void 0===u?void 0:u.senderText})}),"video"===(null===e||void 0===e?void 0:e.messageType)&&(0,Tw.jsx)("span",{style:{position:"relative"},children:(0,Tw.jsx)(kw,{path:e.img,isLoading:null===e||void 0===e?void 0:e.isLoading,textColor:he(e)?null===M||void 0===M||null===(c=M.chat)||void 0===c?void 0:c.messageText:null===M||void 0===M||null===(l=M.chat)||void 0===l?void 0:l.senderText})}),"application"===(null===e||void 0===e?void 0:e.messageType)&&(0,Tw.jsx)(Sw,{path:e.img,textColor:he(e)?null===M||void 0===M||null===(h=M.chat)||void 0===h?void 0:h.messageText:null===M||void 0===M||null===(f=M.chat)||void 0===f?void 0:f.senderText}),(0,Tw.jsxs)("span",{style:{fontSize:"7px",marginLeft:"12px",display:"flex",alignItems:"center",color:he(e)?null===M||void 0===M||null===(d=M.chat)||void 0===d?void 0:d.messageText:null===M||void 0===M||null===(p=M.chat)||void 0===p?void 0:p.senderText},children:[oe()(null===e||void 0===e?void 0:e.createdAt).format("LT"),2===(null===e||void 0===e?void 0:e.read)?he(e)&&(0,Tw.jsx)(fw,{style:{fontSize:"14px",color:null===M||void 0===M||null===(v=M.sidebar)||void 0===v?void 0:v.activePresence}}):he(e)&&(0,Tw.jsx)(fw,{style:{fontSize:"14px"}})]})]}),he(e)&&(0,Tw.jsx)("span",{onClick:function(){return function(e,t){var n=re(y);n.splice(t,1),b(n);try{var r;_w.ref("messages").child(xw({myId:null===ww||void 0===ww||null===(r=ww.currentUser)||void 0===r?void 0:r.uid,otherId:m})).child(null===e||void 0===e?void 0:e.createdAt).remove(),bw.ref().child(e.img).delete()}catch(i){console.log("handle delete err",i)}}(e,t)},children:!(null!==e&&void 0!==e&&e.isLoading)&&(0,Tw.jsx)(gw,{className:"render\n                   ".concat(_===(null===e||void 0===e?void 0:e.createdAt)?"show":void 0,"\n                 "),style:{fontSize:"18px",color:"red",marginLeft:5}})})]})]},t)}))]}),(0,Tw.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Tw.jsxs)("div",{style:{position:"absolute",bottom:0,width:"96%",display:"flex",height:"45px",backgroundColor:null===M||void 0===M||null===(u=M.chat)||void 0===u?void 0:u.inputBg,borderRadius:"25px",marginBottom:"10px",paddingBottom:(null===U||void 0===U?void 0:U.length)>0&&"94px"},children:[(0,Tw.jsx)("input",{ref:V,onKeyDown:function(e){"Enter"===e.key&&le(null,"text")},onChange:function(e){try{var t;v(e.target.value);var n=_w.ref("user").child(null===ww||void 0===ww||null===(t=ww.currentUser)||void 0===t?void 0:t.uid);x||n.update({chattingWith:m}),Aw&&(clearInterval(Aw),Aw=null),Aw=setTimeout((function(){var e;Aw&&_w.ref("user").child(null===ww||void 0===ww||null===(e=ww.currentUser)||void 0===e?void 0:e.uid).update({chattingWith:null})}),1e3)}catch(r){console.log("handle input err",r)}},value:p,type:"text",placeholder:"Message ".concat(null===R||void 0===R?void 0:R.name,"..."),style:{width:"90%",backgroundColor:null===M||void 0===M||null===(c=M.chat)||void 0===c?void 0:c.inputBg,border:"none",borderRadius:"25px",outline:"none",color:null===M||void 0===M||null===(l=M.chat)||void 0===l?void 0:l.inputText,padding:"0 12px"}}),(null===U||void 0===U?void 0:U.length)>0&&U.map((function(e,t){var n;return(0,Tw.jsxs)("div",{style:{position:"absolute",left:"".concat(100*t+10,"px"),bottom:"6px",padding:" 3px 2px",borderRadius:"6px",boxShadow:" 0px 0px 4px",display:"flex",alignItems:"center"},children:["video"===(null===e||void 0===e?void 0:e.messageType)&&(0,Tw.jsx)("video",{width:"70px",height:"75px",children:(0,Tw.jsx)("source",{src:null===e||void 0===e?void 0:e.img,type:"video/mp4"})}),"image"===(null===e||void 0===e?void 0:e.messageType)&&(0,Tw.jsx)("img",{src:null===e||void 0===e?void 0:e.img,width:"70px",height:"75px"}),"application"===(null===e||void 0===e?void 0:e.messageType)&&(0,Tw.jsx)(pw,{fontSize:70}),(0,Tw.jsx)(lw,{style:{position:"absolute",top:"-9px",right:"-9px"},color:null===M||void 0===M||null===(n=M.chat)||void 0===n?void 0:n.inputText,onClick:function(){return function(e){var t=(null===U||void 0===U?void 0:U.length)>0?re(U):[];t.splice(e,1),q(t)}(t)}})]},t)})),(0,Tw.jsxs)("div",{style:{position:"absolute",top:"20%",right:"54px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",height:"25px",width:"25px",fontSize:"20px",transform:"rotate(42deg)"},children:[(0,Tw.jsx)("input",{type:"file",ref:B,onChange:function(e){return function(e){var t,n,r=(null===U||void 0===U?void 0:U.length)>0?re(U):[];if((null===(t=e.target)||void 0===t||null===(n=t.files[0])||void 0===n?void 0:n.size)<2e7){var i,o,a,s,u,c,l,h,f=null===e||void 0===e||null===(i=e.target)||void 0===i||null===(o=i.files[0])||void 0===o?void 0:o.type.split("/");K([].concat(re(G),[null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.files[0]])),r.push({createdAt:Date.now(),messageType:f[0],message:p,isLoading:!0,img:null===(s=URL)||void 0===s?void 0:s.createObjectURL(null===e||void 0===e||null===(u=e.target)||void 0===u?void 0:u.files[0]),sentBy:{id:null===ww||void 0===ww||null===(c=ww.currentUser)||void 0===c?void 0:c.uid,name:null===ww||void 0===ww||null===(l=ww.currentUser)||void 0===l?void 0:l.displayName,photo:null===ww||void 0===ww||null===(h=ww.currentUser)||void 0===h?void 0:h.photoURL}}),q(r),e.target.value=""}else alert("please select file size less then 20MB")}(e)},multiple:!0,style:{display:"none"}}),(0,Tw.jsx)(vw,{color:null===M||void 0===M||null===(h=M.chat)||void 0===h?void 0:h.sendIcon,onClick:function(){var e;return null===B||void 0===B||null===(e=B.current)||void 0===e?void 0:e.click()}})]}),(0,Tw.jsx)("div",{style:{position:"absolute",top:"20%",right:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",height:"25px",width:"25px"},onClick:function(){return(null===U||void 0===U?void 0:U.length)>0?function(){q([]),K([]);var e=re(y);null===U||void 0===U||U.forEach((function(t){e.push(t)})),b(e);for(var t=Date.now(),n=function(e){var n,r,i=bw.ref().child("".concat(null===(n=U[e])||void 0===n?void 0:n.messageType,"/").concat(t,"/").concat(null===(r=G[e])||void 0===r?void 0:r.name)).put(G[e]);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;X(t),Q(!0),100===t&&Q(!1)}),(function(e){console.log("unUpload",e)}),(function(){var t;le(i.snapshot.ref.fullPath,null===(t=U[e])||void 0===t?void 0:t.messageType)}))},r=0;r<U.length;r++)n(r)}():le(null,"text")},children:(0,Tw.jsx)(dw,{color:null===M||void 0===M||null===(f=M.chat)||void 0===f?void 0:f.sendIcon})})]})}),se&&(0,Tw.jsxs)("div",{id:"drag-file-element",onDragEnter:de,onDragLeave:de,onDragOver:de,onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),ce(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){var t,n=[];Object.entries(null===(t=e.dataTransfer)||void 0===t?void 0:t.files).forEach((function(e){var t=r(e,2),i=(t[0],t[1]);n.push(i)})),function(e){for(var t=(null===U||void 0===U?void 0:U.length)>0?re(U):[],n=0;n<(null===e||void 0===e?void 0:e.length);n++){var r;if((null===(r=e[n])||void 0===r?void 0:r.size)<2e7){var i,o,a,s,u,c=null===(i=e[n])||void 0===i?void 0:i.type.split("/");K([].concat(re(G),[e[n]])),t.push({createdAt:Date.now(),messageType:c[0],message:p,isLoading:!0,img:null===(o=URL)||void 0===o?void 0:o.createObjectURL(e[n]),sentBy:{id:null===ww||void 0===ww||null===(a=ww.currentUser)||void 0===a?void 0:a.uid,name:null===ww||void 0===ww||null===(s=ww.currentUser)||void 0===s?void 0:s.displayName,photo:null===ww||void 0===ww||null===(u=ww.currentUser)||void 0===u?void 0:u.photoURL}})}else alert("please select file size less then 20MB")}q(re(t))}(n)}},children:[(0,Tw.jsx)(Nw,{size:50}),(0,Tw.jsx)("div",{style:{fontSize:"22px",fontWeight:"500"},children:"Upload File"})]})]})}var Dw=o.memo(Pw);var Ow=function(){var e,t,n,i=r((0,o.useState)(!1),2),a=i[0],s=i[1],u=(0,o.useContext)(Y).theme,c=M();return(0,o.useEffect)((function(){ww.onAuthStateChanged((function(e){e?(s(!0),c("/user")):s(!1)}))}),[c]),!a&&(0,Tw.jsx)("div",{style:{display:"grid",placeItems:"center",height:"100vh",fontSize:24,backgroundColor:null===u||void 0===u||null===(e=u.sidebar)||void 0===e?void 0:e.bg},children:(0,Tw.jsxs)("div",{style:{display:"flex",alignItems:"center",color:null===u||void 0===u||null===(t=u.sidebar)||void 0===t?void 0:t.itemText},children:["Welcome to Chat App",(0,Tw.jsx)("p",{style:{color:null===u||void 0===u||null===(n=u.sidebar)||void 0===n?void 0:n.activePresence,marginLeft:10,cursor:"pointer"},onClick:function(){ww.setPersistence(ue.Z.auth.Auth.Persistence.LOCAL).then((function(){return ww.signInWithPopup(Ew).then((function(e){var t,n,r,i,o;(c("/"),_w.ref("user").child(null===(t=e.user)||void 0===t?void 0:t.uid))?_w.ref("user").child(null===(n=e.user)||void 0===n?void 0:n.uid).update({id:null===(r=e.user)||void 0===r?void 0:r.uid,name:e.additionalUserInfo.profile.name,picture:e.additionalUserInfo.profile.picture}).catch(alert):_w.ref("user").child(null===(i=e.user)||void 0===i?void 0:i.uid).set({id:null===(o=e.user)||void 0===o?void 0:o.uid,name:e.additionalUserInfo.profile.name,picture:e.additionalUserInfo.profile.picture}).catch(alert)})).catch(alert)}))},children:"Login"})]})})};function Rw(e){return uw({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z"}}]})(e)}function Lw(e){return uw({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"circle",attr:{cx:"8",cy:"8",r:"8"}}]})(e)}var Mw=function(e){var t,n,i,a,s,u=e.users,c=r((0,o.useState)(""),2),l=c[0],h=c[1],f=r((0,o.useState)(!1),2),d=f[0],p=f[1],v=r((0,o.useState)([]),2),m=v[0],g=v[1],y=(0,o.useContext)(Y).theme,b=j().id,w=(0,o.useRef)(null),_=((0,o.useRef)(null),r((0,o.useState)(0),2)),E=_[0],T=_[1],S=M();return(0,o.useEffect)((function(){document.addEventListener("keydown",(function(e){var t,n;"KeyG"===e.code&&e.ctrlKey&&(e.preventDefault(),p(!0),null===w||void 0===w||null===(t=w.current)||void 0===t||t.focus());"Escape"===e.code&&(null===w||void 0===w||null===(n=w.current)||void 0===n||n.blur(),T(0))}))}),[]),(0,o.useEffect)((function(){var e=null===u||void 0===u?void 0:u.filter((function(e){return Object.values(e).join().toLowerCase().includes(l.toLowerCase())}));g(e)}),[l,d]),(0,Tw.jsx)("div",{style:{width:"100%",backgroundColor:null===y||void 0===y||null===(t=y.sidebar)||void 0===t?void 0:t.bg,textAlign:"center",height:"7vh"},children:(0,Tw.jsxs)("div",{className:"inputWrapper",children:[(0,Tw.jsxs)("div",{className:"search-new-user",style:{display:"flex",alignItems:"center",backgroundColor:null===y||void 0===y||null===(n=y.sidebar)||void 0===n?void 0:n.activeItemBg,color:null===y||void 0===y||null===(i=y.sidebar)||void 0===i?void 0:i.activeItemText},children:[(0,Tw.jsx)(hw,{color:"#FFFF"}),(0,Tw.jsx)("input",{ref:w,className:"search-new-user",type:"text",value:l,onChange:function(e){return h(e.target.value)},placeholder:"Search User",onKeyDown:function(e){if("ArrowDown"===e.code){if(E===(null===u||void 0===u?void 0:u.length)-1)return void T(0);T((function(e){return e+1}))}var t,n;"Enter"===e.code&&(S("/user/".concat(null===(t=u[E])||void 0===t?void 0:t.id)),null===w||void 0===w||null===(n=w.current)||void 0===n||n.blur())},onKeyUp:function(e){if("ArrowUp"===e.code){if(0===E)return void T((null===u||void 0===u?void 0:u.length)-1);T((function(e){return e-1}))}},style:{backgroundColor:null===y||void 0===y||null===(a=y.sidebar)||void 0===a?void 0:a.activeItemBg,color:null===y||void 0===y||null===(s=y.sidebar)||void 0===s?void 0:s.activeItemText,width:"100%"}})]}),(0,Tw.jsx)("div",{className:"searchContent",children:null===m||void 0===m?void 0:m.map((function(e,t){var n,r,i,o,a;return(0,Tw.jsxs)($,{className:"userRow",state:{data:e},to:"/user/".concat(e.id),style:{color:b===(null===e||void 0===e?void 0:e.id)?null===y||void 0===y||null===(n=y.sidebar)||void 0===n?void 0:n.activeItemText:null===y||void 0===y||null===(r=y.sidebar)||void 0===r?void 0:r.itemText,backgroundColor:t===E?null===y||void 0===y||null===(i=y.sidebar)||void 0===i?void 0:i.activeItemBg:"",position:"relative"},children:[(0,Tw.jsx)("img",{src:null===e||void 0===e?void 0:e.picture,height:"30px",width:"30px",style:{borderRadius:25},alt:"userImg"}),(null===e||void 0===e?void 0:e.online)&&(0,Tw.jsx)(Lw,{color:null===y||void 0===y||null===(o=y.sidebar)||void 0===o?void 0:o.activePresence,style:{position:"absolute",left:"24px",top:"4px",fontSize:"11px"}}),(0,Tw.jsx)("p",{style:{paddingLeft:"8px",color:null===y||void 0===y||null===(a=y.sidebar)||void 0===a?void 0:a.itemText},children:null===e||void 0===e?void 0:e.name})]},null===e||void 0===e?void 0:e.id)}))})]})})};function Fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fw(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uw=function(e){var t,n,i,a,s,u,c,l,h,f,d,p,v,m,g,y,b,w,_,E=e.item,T=r((0,o.useState)(null),2),S=T[0],I=T[1],C=(0,o.useContext)(Y).theme,k=j().id;(0,o.useEffect)((function(){var e;I(null);var t=null===E||void 0===E||null===(e=E.members)||void 0===e?void 0:e.find((function(e){var t;return e!==(null===ww||void 0===ww||null===(t=ww.currentUser)||void 0===t?void 0:t.uid)}));x(t)}),[E]);var x=function(){var e=te(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_w.ref("user").child(t).get();case 3:return n=e.sent,I(jw(jw({},E),{},{userInfo:null===n||void 0===n?void 0:n.val()})),e.abrupt("return",null===n||void 0===n?void 0:n.val());case 8:e.prev=8,e.t0=e.catch(0),console.log("get other user info err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,Tw.jsxs)($,{className:"userRow",state:{data:S},to:"/user/".concat(null===S||void 0===S||null===(t=S.userInfo)||void 0===t?void 0:t.id),style:{color:k===(null===S||void 0===S||null===(n=S.userInfo)||void 0===n?void 0:n.id)?null===C||void 0===C||null===(i=C.sidebar)||void 0===i?void 0:i.activeItemText:null===C||void 0===C||null===(a=C.sidebar)||void 0===a?void 0:a.itemText,backgroundColor:k===(null===S||void 0===S||null===(s=S.userInfo)||void 0===s?void 0:s.id)?null===C||void 0===C||null===(u=C.sidebar)||void 0===u?void 0:u.activeItemBg:null===C||void 0===C||null===(c=C.sidebar)||void 0===c?void 0:c.bg,position:"relative"},children:[(0,Tw.jsx)("img",{src:null===S||void 0===S||null===(l=S.userInfo)||void 0===l?void 0:l.picture,height:"30px",width:"30px",style:{borderRadius:25},alt:"userImg"}),(null===S||void 0===S||null===(h=S.userInfo)||void 0===h?void 0:h.online)&&(0,Tw.jsx)(Lw,{color:null===C||void 0===C||null===(f=C.sidebar)||void 0===f?void 0:f.activePresence,style:{position:"absolute",left:"24px",top:"4px",fontSize:"11px"}}),(0,Tw.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Tw.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Tw.jsx)("span",{style:{paddingLeft:"8px",color:null===C||void 0===C||null===(d=C.sidebar)||void 0===d?void 0:d.itemText},children:null===S||void 0===S||null===(p=S.userInfo)||void 0===p?void 0:p.name}),(null===S||void 0===S?void 0:S.lastMessage)&&(0,Tw.jsx)("span",{style:{fontSize:"8px",paddingLeft:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100px"},children:null===S||void 0===S?void 0:S.lastMessage})]}),0!==(null===S||void 0===S||null===(v=S.unreadCount)||void 0===v||null===(m=v[null===ww||void 0===ww||null===(g=ww.currentUser)||void 0===g?void 0:g.uid])||void 0===m?void 0:m.count)&&(0,Tw.jsx)("span",{style:{marginLeft:"18px",width:"20px",height:"20px",fontSize:"13px",textAlign:"center",backgroundColor:null===C||void 0===C||null===(y=C.sidebar)||void 0===y?void 0:y.activePresence,borderRadius:"50%"},children:null===S||void 0===S||null===(b=S.unreadCount)||void 0===b||null===(w=b[null===ww||void 0===ww||null===(_=ww.currentUser)||void 0===_?void 0:_.uid])||void 0===w?void 0:w.count})]})]})},qw=n(948),Vw=n.n(qw);var Bw=function(e){var t,n,i,a=e.isVisible,s=e.setVisible,u=(0,o.useContext)(Y),c=u.theme,l=u.themeData,h=r((0,o.useState)(null),2),f=h[0],d=h[1];return(0,o.useEffect)((function(){d(c)}),[c]),console.log({theme:c}),(0,Tw.jsxs)(Vw(),{ariaHideApp:!1,onRequestClose:function(){return s(!1)},isOpen:a,shouldCloseOnOverlayClick:!0,style:{content:{width:.62*window.innerWidth,height:.7*window.innerHeight,margin:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:null===c||void 0===c?void 0:c.chatColor,backgroundImage:"linear-gradient(to right,".concat(null===c||void 0===c||null===(t=c.sidebar)||void 0===t?void 0:t.bg,", ").concat(null===c||void 0===c||null===(n=c.chat)||void 0===n?void 0:n.bg,", ").concat(null===c||void 0===c||null===(i=c.chat)||void 0===i?void 0:i.headerBg,")")},overlay:{backgroundColor:"rgba(0,0,0,0.3)"}},shouldCloseOnEsc:!0,children:[(0,Tw.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 20px",marginBottom:30},children:[(0,Tw.jsx)("h2",{style:{color:null===c||void 0===c?void 0:c.chatColor},children:"Select Theme"}),(0,Tw.jsx)("div",{style:{position:"absolute",right:50,color:null===c||void 0===c?void 0:c.headerColor,fontSize:18,cursor:"pointer"},onClick:function(){return s(!1)},children:"Close"})]}),(0,Tw.jsx)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:l.map((function(e,t){var n,r,i,o;return(0,Tw.jsxs)("div",{onClick:function(){!function(e,t){var n;_w.ref("user").child(null===ww||void 0===ww||null===(n=ww.currentUser)||void 0===n?void 0:n.uid).update({themeId:null===e||void 0===e?void 0:e.id})}(e)},style:{width:260,height:170,margin:10,position:"relative"},children:[(0,Tw.jsxs)("div",{style:{display:"flex",width:260,height:150},children:[(0,Tw.jsx)("div",{style:{width:100,backgroundColor:null===e||void 0===e||null===(n=e.sidebar)||void 0===n?void 0:n.bg},children:(0,Tw.jsx)("div",{className:"boxShadow",style:{height:30,backgroundColor:null===e||void 0===e||null===(r=e.sidebar)||void 0===r?void 0:r.bg}})}),(0,Tw.jsx)("div",{style:{width:280,backgroundColor:null===e||void 0===e||null===(i=e.chat)||void 0===i?void 0:i.bg},children:(0,Tw.jsx)("div",{className:"boxShadow",style:{height:30,backgroundColor:null===e||void 0===e||null===(o=e.chat)||void 0===o?void 0:o.bg}})})]}),(null===f||void 0===f?void 0:f.id)===(null===e||void 0===e?void 0:e.id)&&(0,Tw.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%"},children:(0,Tw.jsx)(Rw,{})})]},t)}))})]})};var zw=function(){var e,t,n,i=r((0,o.useState)(null),2),a=i[0],s=i[1],u=r((0,o.useState)(!1),2),c=u[0],l=u[1],h=(0,o.useContext)(Y).theme,f=M();return(0,o.useEffect)((function(){ww.onAuthStateChanged((function(e){s({name:null===e||void 0===e?void 0:e.displayName,id:null===e||void 0===e?void 0:e.uid,picture:null===e||void 0===e?void 0:e.photoURL})}))}),[]),(0,Tw.jsxs)(Tw.Fragment,{children:[(0,Tw.jsxs)("div",{style:{backgroundColor:null===h||void 0===h||null===(e=h.sidebar)||void 0===e?void 0:e.bg},className:"header boxShadow",children:[(0,Tw.jsx)("div",{className:"left-side",children:"ChatApp"}),(0,Tw.jsx)("div",{className:"right-side",children:(0,Tw.jsxs)("div",{className:"dropdown",children:[(0,Tw.jsxs)("div",{className:"dropdownBtn",style:{color:null===h||void 0===h||null===(t=h.sidebar)||void 0===t?void 0:t.itemText,cursor:"pointer",alignItems:"center",display:"flex"},children:[(0,Tw.jsx)("img",{src:null===a||void 0===a?void 0:a.picture,height:"30px",width:"30px",style:{borderRadius:25},alt:"userImg"}),(0,Tw.jsx)(mw,{})]}),(0,Tw.jsxs)("div",{className:"dropdownContent",style:{backgroundColor:null===h||void 0===h||null===(n=h.chat)||void 0===n?void 0:n.bg},children:[(0,Tw.jsx)("div",{onClick:function(){return l(!0)},className:"dropdownContentOption",children:"Change Theme"}),(0,Tw.jsx)("div",{className:"dropdownContentOption",onClick:function(){ww.signOut().then((function(e){var t=_w.ref("user").child(null===a||void 0===a?void 0:a.id);null===t||void 0===t||t.update({online:!1,activeChannelId:null}),s(null),f("/")})).catch(alert)},children:"LogOut"})]})]})})]}),c&&(0,Tw.jsx)(Bw,{isVisible:c,setVisible:l})]})};var Gw=function(){var e,t,n,i=r((0,o.useState)([]),2),a=i[0],s=i[1],u=r((0,o.useState)([]),2),c=u[0],l=u[1],h=r((0,o.useState)(""),2),f=(h[0],h[1],(0,o.useContext)(Y)),d=f.theme,p=f.themeData,v=f.setTheme,m=j().id;return(0,o.useEffect)((function(){ww.onAuthStateChanged((function(e){null===e?s([]):(_w.ref("user").on("value",(function(e){var t=[];e.forEach((function(e){var n;e.val().id!==(null===ww||void 0===ww||null===(n=ww.currentUser)||void 0===n?void 0:n.uid)&&t.push(e.val())})),s([].concat(t))})),function(){try{var e;_w.ref("channels").child(null===ww||void 0===ww||null===(e=ww.currentUser)||void 0===e?void 0:e.uid).orderByChild("createdAt").on("value",(function(e){var t=[];null===e||void 0===e||e.forEach((function(e){t.push(null===e||void 0===e?void 0:e.val())})),l(t.reverse())}))}catch(t){console.log("fetch channel info err",t)}}())}))}),[p,v]),(0,o.useEffect)((function(){var e,t;null!==ww&&void 0!==ww&&null!==(e=ww.currentUser)&&void 0!==e&&e.uid&&_w.ref("user").child(null===ww||void 0===ww||null===(t=ww.currentUser)||void 0===t?void 0:t.uid).update({activeChannelId:null!==m&&void 0!==m?m:null})}),[m]),(0,Tw.jsxs)("div",{style:{display:"flex",backgroundColor:null===d||void 0===d||null===(e=d.chat)||void 0===e?void 0:e.bg,flexWrap:"wrap",height:"100vh"},children:[(0,Tw.jsx)(Mw,{users:a}),(0,Tw.jsxs)("div",{className:"userBox",style:{backgroundColor:null===d||void 0===d||null===(t=d.sidebar)||void 0===t?void 0:t.bg,height:"93vh",flex:.15},children:[(0,Tw.jsx)(zw,{}),(0,Tw.jsx)("div",{className:"userContainer",style:{height:window.innerHeight-42},children:null===c||void 0===c?void 0:c.map((function(e,t){return(0,Tw.jsx)(Uw,{item:e},t)}))})]}),!m&&(0,Tw.jsx)("div",{style:{flex:.82,alignItems:"center",justifyContent:"center",display:"flex",color:null===d||void 0===d||null===(n=d.sidebar)||void 0===n?void 0:n.itemText},children:"Please click on a user to start a converstion"}),(0,Tw.jsx)(V,{})]})};var Kw=function(){var e=(0,o.useContext)(Y),t=e.setTheme,n=e.themeData;return(0,o.useEffect)((function(){ww.onAuthStateChanged((function(e){if(null!==e){var r=_w.ref("user").child(null===e||void 0===e?void 0:e.uid);null===r||void 0===r||r.update({online:!0}),r.on("value",(function(e){var r,i=e.val();(r=n.find((function(e){return e.id===(null===i||void 0===i?void 0:i.themeId)})))&&t(r)}))}}))}),[n,t]),(0,o.useEffect)((function(){var e,t;null!==ww&&void 0!==ww&&null!==(e=ww.currentUser)&&void 0!==e&&e.uid&&_w.ref("user").child(null===(t=ww.currentUser)||void 0===t?void 0:t.uid).onDisconnect().update({online:!1,activeChannelId:null})}),[]),(0,Tw.jsx)("div",{className:"App",children:(0,Tw.jsxs)(G,{children:[(0,Tw.jsx)(B,{path:"/",element:(0,Tw.jsx)(Ow,{})}),(0,Tw.jsx)(B,{path:"user",element:(0,Tw.jsx)(Gw,{}),children:(0,Tw.jsx)(B,{path:"/user/:id",element:(0,Tw.jsx)(Dw,{})})})]})})},Ww=function(e){var t=e.children,n=r(o.useState({title:"",message:"",isVisible:!1}),2),i=n[0],a=n[1];return(0,o.useEffect)((function(){(function(e){var t=e.message,n=e.title,r=e.successFn;return a(jw({isVisible:!0,message:t,title:n},r&&{successFn:r})),null}),function(){return a(jw(jw({},i),{},{isVisible:!1})),null}}),[i]),(0,Tw.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column",width:"100%"},children:[t,i.isVisible?(0,Tw.jsx)("div",{style:{display:"flex",height:"100%",width:"100%",position:"fixed",alignItems:"center",justifyContent:"center",padding:"0px 20px",backgroundColor:"rgba(0,0,0,0.4)"},children:(0,Tw.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"15px",alignSelf:"center",width:"".concat(.5*window.innerWidth,"px")},children:[(0,Tw.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"12px 13px"},children:(0,Tw.jsx)("div",{style:{fontSize:22,color:"black"},children:i.title})}),(0,Tw.jsx)("div",{style:{width:"100%,",borderBottom:"1px solid #E2E2E2"}}),(0,Tw.jsx)("div",{style:{fontSize:18,color:"black",padding:"10px 13px"},children:i.message}),(0,Tw.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"10px 13px ",backgroundColor:"#EEECEC",borderEndEndRadius:"15px",borderEndStartRadius:"15px"},children:(0,Tw.jsx)("button",{onClick:function(){i.successFn&&i.successFn(),a((function(e){return jw(jw({},e),{},{isVisible:!1})}))},children:"ok"})})]})}):null]})},Hw=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))},Qw=function(){var e,t,n=r((0,o.useState)({}),2),i=n[0],a=n[1],s=r((0,o.useState)([]),2),u=s[0],c=s[1],l=r((0,o.useState)(!1),2),h=l[0],f=l[1],d=r((0,o.useState)(!1),2),p=d[0],v=d[1];return(0,o.useEffect)((function(){f(!0),_w.ref("theme").get().then((function(e){var t;null!==e&&void 0!==e&&e.val()&&(c(null===e||void 0===e?void 0:e.val()),a(null===e||void 0===e||null===(t=e.val())||void 0===t?void 0:t[0]))})).finally((function(){f(!1)}))}),[]),(0,o.useEffect)((function(){_w.ref(".info/connected").on("value",(function(e){!0===e.val()?v(!0):v(!1)}))}),[]),(0,Tw.jsx)(Y.Provider,{value:{theme:i,setTheme:a,themeData:u},children:(0,Tw.jsx)(J,{children:(0,Tw.jsx)(Ww,{children:h||!p?(0,Tw.jsx)("div",{style:{height:null===(e=window)||void 0===e?void 0:e.innerHeight,width:null===(t=window)||void 0===t?void 0:t.innerWidth,color:"#fff",display:"grid",placeItems:"center"},children:h?(0,Tw.jsx)("div",{className:"loading"}):(0,Tw.jsx)("div",{children:"There is a problem connecting to our server"})}):(0,Tw.jsx)(Kw,{})})})})};a.createRoot(document.getElementById("root")).render((0,Tw.jsx)(Qw,{})),Hw()}()}();
//# sourceMappingURL=main.736f5b4c.js.map